import{a as Vc}from"./chunk-KRH23UU6.js";import{a as ll}from"./chunk-KW2MP2OX.js";import{a as ai,b as al}from"./chunk-XPG4BQXJ.js";import{a as Kc,b as cl}from"./chunk-JP3ZF3QJ.js";import{a as Rc}from"./chunk-G4T3JZKF.js";import{a as si}from"./chunk-MEZ43UVW.js";import{a as Qc,b as Xc,c as Zc,d as Jc,e as el,f as tl,g as rl,h as il,i as nl,j as ol,k as sl}from"./chunk-PYHOBQRH.js";import{a as Yc}from"./chunk-JRXFZ4PK.js";import"./chunk-7TT7MJZV.js";import{a as Bc}from"./chunk-J7X3E2XP.js";import{a as jc}from"./chunk-TQ2FTZGT.js";import{a as an,b as Wc,c as cn,d as qc}from"./chunk-AY7ZO27C.js";import{b as xc}from"./chunk-P3NV4V3V.js";import{a as Ka}from"./chunk-YZSBYHRQ.js";import{a as kc}from"./chunk-535LWD52.js";import{a as Dc,c as Nc,d as Lc,e as Hc,f as Gc}from"./chunk-QZIZ42UW.js";import{a as $c}from"./chunk-3VLVAJN3.js";import{A as wc,I as Oc,J as Pc,K as oi,a as Ya,c as bc,d as Tc}from"./chunk-5QBQTCCY.js";import"./chunk-YDTREYEI.js";import{f as Mc,g as Fc}from"./chunk-CPEQU6K5.js";import"./chunk-PSJWFII4.js";import"./chunk-DTM43PO4.js";import{c as Uc,f as zc}from"./chunk-EIGQZWYH.js";import{c as Cc,d as Ic}from"./chunk-23ZPZIQT.js";import"./chunk-PVJ4N7OM.js";import"./chunk-IVJKOVM3.js";import"./chunk-LKLXEOPF.js";import{B as nc,C as oc,H as sc,K as ac,M as cc,Q as Jr,R as lc,S as ei,X as pc,_ as ti,a as wt,aa as fc,b as U,ba as $e,c as ee,ca as gc,d as R,da as yc,e as us,f as it,g as Mt,ga as ri,h as Va,ha as ii,i as za,ia as _c,j as Ha,ja as Sc,k as nn,ka as Ec,l as ot,la as vc,ma as ni,na as Ac,p as Wa,pa as at,q as Qr,qa as Ce,r as qa,ra as Ke,s as Wd,t as Qa,u as Xa,v as Za,va as Ve,w as Gt,wa as ge,x as tc,y as rc,z as ic}from"./chunk-APPAM3AT.js";import{a as Ga,b as qr,d as Xr}from"./chunk-DUOCZ7Q3.js";import{a as Ja,b as Ht,d as Zr,e as f,l as ec,p as ye,q as on,s as sn,t as dc,u as mc,v as uc,w as hc,x as st}from"./chunk-OBJ3GHUI.js";import{$ as rs,$a as Ps,A as Yo,Aa as hs,Ab as nt,B as Ko,Ba as fs,Bd as Js,C as Fr,Ca as Pt,Cb as $s,Ce as jr,D as Vo,Da as Dr,Db as Bs,Df as fa,Ea as rt,Eb as js,Ee as kt,Ef as ga,F as zo,Fa as gs,Fd as Lr,Fe as Ur,Ga as ys,Gb as Us,Gd as T,Gf as ya,H as zi,Ha as _s,Hd as ea,I as Yt,Id as en,If as _a,J as Ho,Ja as Ss,Jd as ta,Jh as zr,K as Go,Ka as Es,La as vs,Ld as ft,M as Wo,Md as Me,Mg as ba,N as Q,Na as bs,Nd as ce,Oa as Ts,Od as Rt,Oi as Ba,Pd as ra,Pi as ja,Q as qo,Qa as As,Qh as Hr,Qi as Ua,R as Qo,Re as ca,Rg as Ta,Rh as Ia,S as Xo,Si as rn,T as Zo,Te as la,Tf as Sa,Th as wa,Ti as g,U as Hi,Ue as pa,V as Kt,Va as Cs,Vc as Vs,Ve as da,W as B,Wc as Nr,X as Ye,Xa as Is,Xc as zs,Xe as ma,Y as Jo,Ya as ws,Yc as Zi,Ye as H,Yg as Aa,Z as es,Zc as Hs,Ze as Yr,_ as ts,_a as Os,_c as Gs,a as Ze,aa as Vt,ad as Ws,b as It,bb as Ms,bd as qs,bi as Oa,ca as is,cb as Fs,cd as Qs,di as Pa,ea as ns,eb as Rs,ed as Ji,ei as Ma,f as Je,fb as ks,fd as Ft,ff as ua,fi as Fa,ga as Gi,gi as Ra,ha as Ot,hb as Ds,hc as Ys,ia as Wi,ib as Ns,id as Xs,ih as Kr,ii as ka,ja as Rr,k as Pr,ka as os,kb as Ls,kh as Vr,ki as Da,la as ss,lb as xs,ld as Zs,li as Na,mi as Gr,nf as ha,ni as Wr,oa as qi,oi as La,pa as kr,pe as xr,pi as xa,q as et,qa as as,qf as tn,qi as $a,ra as cs,sa as ls,sb as zt,se as ia,sg as Ea,sh as Ca,t as Mr,ta as Qi,tc as Xi,te as na,tg as va,u as $o,ua as ps,ue as $r,v as Bo,va as ds,ve as oa,w as tt,wa as j,x as Vi,xe as Br,y as jo,yc as Ks,ye as sa,z as Uo,za as ms}from"./chunk-7QY7AI5L.js";import{b as aa}from"./chunk-SCYYT2VV.js";import{$a as Tt,$b as le,Ab as V,Ba as y,Bb as oe,C as yo,Ca as b,Cc as Or,D as _o,E as hr,Fb as vr,G as Yi,Ha as ve,Hb as Ro,Hc as Oe,I as ut,Ia as be,Ic as Pe,J as $,La as Co,N as ne,Nc as xo,O as fr,Ob as Ne,P as So,Q as gr,Qb as Ge,Ra as Te,Rb as q,S as ae,Sa as Ae,Sb as ko,T as Eo,Tb as Xe,U as vo,Va as Io,Vb as Do,Vc as Ut,Xa as wo,Y as bt,Ya as Oo,_ as Ie,_b as J,ab as Sr,ac as pe,ad as Ct,cb as Po,dc as No,e as Ui,ec as Ue,ga as yr,h as uo,ha as bo,hb as Ki,i as pr,ia as _r,ic as fe,j as De,ja as To,jc as de,k as ho,ka as Ao,kc as br,la as k,lc as Tr,m as dr,ma as jt,na as D,oc as Ar,p as fo,pa as Se,pc as Cr,q as mr,qc as Ir,r as z,ra as me,s as ur,sa as K,sc as At,tb as Mo,tc as wr,ub as Fo,uc as Lo,w as go,wa as E,wb as Er,x as w,xa as Ee,y as he,za as ht}from"./chunk-WZKGUPHF.js";import{a as C,b as F,d as cr,e as He,f as lr,g as ji,h as re}from"./chunk-YAHGIH44.js";var Hl=He((Kf,zl)=>{"use strict";var Au=function(r){return Cu(r)&&!Iu(r)};function Cu(i){return!!i&&typeof i=="object"}function Iu(i){var r=Object.prototype.toString.call(i);return r==="[object RegExp]"||r==="[object Date]"||Pu(i)}var wu=typeof Symbol=="function"&&Symbol.for,Ou=wu?Symbol.for("react.element"):60103;function Pu(i){return i.$$typeof===Ou}function Mu(i){return Array.isArray(i)?[]:{}}function er(i,r){return r.clone!==!1&&r.isMergeableObject(i)?xt(Mu(i),i,r):i}function Fu(i,r,e){return i.concat(r).map(function(t){return er(t,e)})}function Ru(i,r){if(!r.customMerge)return xt;var e=r.customMerge(i);return typeof e=="function"?e:xt}function ku(i){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(i).filter(function(r){return Object.propertyIsEnumerable.call(i,r)}):[]}function Kl(i){return Object.keys(i).concat(ku(i))}function Vl(i,r){try{return r in i}catch{return!1}}function Du(i,r){return Vl(i,r)&&!(Object.hasOwnProperty.call(i,r)&&Object.propertyIsEnumerable.call(i,r))}function Nu(i,r,e){var t={};return e.isMergeableObject(i)&&Kl(i).forEach(function(n){t[n]=er(i[n],e)}),Kl(r).forEach(function(n){Du(i,n)||(Vl(i,n)&&e.isMergeableObject(r[n])?t[n]=Ru(n,e)(i[n],r[n],e):t[n]=er(r[n],e))}),t}function xt(i,r,e){e=e||{},e.arrayMerge=e.arrayMerge||Fu,e.isMergeableObject=e.isMergeableObject||Au,e.cloneUnlessOtherwiseSpecified=er;var t=Array.isArray(r),n=Array.isArray(i),o=t===n;return o?t?e.arrayMerge(i,r,e):Nu(i,r,e):er(r,e)}xt.all=function(r,e){if(!Array.isArray(r))throw new Error("first argument should be an array");return r.reduce(function(t,n){return xt(t,n,e)},{})};var Lu=xt;zl.exports=Lu});var no=He((SS,Wp)=>{var Uh=/-?\d+(\.\d+)?%?/g;function Yh(i){return i.match(Uh)}Wp.exports=Yh});var oo=He((ES,qp)=>{function Kh(i,r,e){return Math.min(Math.max(i,r),e)}qp.exports=Kh});var Xp=He((vS,Qp)=>{var Vh=no(),so=oo();function zh(i,r){switch(i=parseFloat(i),r){case 0:return so(i,0,360);case 1:case 2:return so(i,0,100);case 3:return so(i,0,1)}}function Hh(i){return Vh(i).map(zh)}Qp.exports=Hh});var Jp=He((bS,Zp)=>{function Gh(i){for(var r="#",e=1;e<i.length;e++){var t=i.charAt(e);r+=t+t}return r}function Wh(i){(i.length===4||i.length===5)&&(i=Gh(i));var r=[parseInt(i.substring(1,3),16),parseInt(i.substring(3,5),16),parseInt(i.substring(5,7),16)];if(i.length===9){var e=parseFloat((parseInt(i.substring(7,9),16)/255).toFixed(2));r.push(e)}return r}Zp.exports=Wh});var td=He((TS,ed)=>{var qh=no(),ao=oo();function Qh(i,r){return r<3?i.indexOf("%")!=-1?Math.round(255*ao(parseInt(i,10),0,100)/100):ao(parseInt(i,10),0,255):ao(parseFloat(i),0,1)}function Xh(i){return qh(i).map(Qh)}ed.exports=Xh});var id=He((AS,rd)=>{function Zh(i){var r=i[0]/360,e=i[1]/100,t=i[2]/100,n,o,s,a,c;if(e==0)return c=t*255,[c,c,c];t<.5?o=t*(1+e):o=t+e-t*e,n=2*t-o,a=[0,0,0];for(var l=0;l<3;l++)s=r+1/3*-(l-1),s<0&&s++,s>1&&s--,6*s<1?c=n+(o-n)*6*s:2*s<1?c=o:3*s<2?c=n+(o-n)*(2/3-s)*6:c=n,a[l]=c*255;return a}rd.exports=Zh});var ld=He((CS,cd)=>{var od=Xp(),sd=Jp(),ad=td(),Jh=id();function ef(i){var r=od(i),e=Jh(r);return r.length===4&&e.push(r[3]),e}var nd={"#":sd,hsl:ef,rgb:ad};function ki(i){for(var r in nd)if(i.indexOf(r)===0)return nd[r](i)}ki.rgb=ad;ki.hsl=od;ki.hex=sd;cd.exports=ki});var dd=He((IS,pd)=>{function tf(i){var r=i[0]/255,e=i[1]/255,t=i[2]/255,n=Math.min(r,e,t),o=Math.max(r,e,t),s=o-n,a,c,l;return o==n?a=0:r==o?a=(e-t)/s:e==o?a=2+(t-r)/s:t==o&&(a=4+(r-e)/s),a=Math.min(a*60,360),a<0&&(a+=360),l=(n+o)/2,o==n?c=0:l<=.5?c=s/(o+n):c=s/(2-o-n),[a,c*100,l*100]}pd.exports=tf});function ln(i){return typeof i=="string"&&i.endsWith("/")?i.slice(0,-1):i}function pl(i){let e=localStorage.getItem(Kt+"apiUrl");e?.length>0&&(i.apiUrl=ln(e));let n=localStorage.getItem(Kt+"apiToken");n?.length>0&&(i.apiToken=n);let s=localStorage.getItem(Kt+"analyticsTrackerHttpUrl");s?.length>0&&(i.tracking.httpUrl=ln(s));let c=localStorage.getItem(Kt+"analyticsEnabled");i.tracking.enabled=!!c}function dl(i){return new K(3e3,!1)}function qd(){return new K(3100,!1)}function Qd(){return new K(3101,!1)}function Xd(i){return new K(3001,!1)}function Zd(i){return new K(3003,!1)}function Jd(i){return new K(3004,!1)}function em(i,r){return new K(3005,!1)}function tm(){return new K(3006,!1)}function rm(){return new K(3007,!1)}function im(i,r){return new K(3008,!1)}function nm(i){return new K(3002,!1)}function om(i,r,e,t,n){return new K(3010,!1)}function sm(){return new K(3011,!1)}function am(){return new K(3012,!1)}function cm(){return new K(3200,!1)}function lm(){return new K(3202,!1)}function pm(){return new K(3013,!1)}function dm(i){return new K(3014,!1)}function mm(i){return new K(3015,!1)}function um(i){return new K(3016,!1)}function hm(i,r){return new K(3404,!1)}function fm(i){return new K(3502,!1)}function gm(i){return new K(3503,!1)}function ym(){return new K(3300,!1)}function _m(i){return new K(3504,!1)}function Sm(i){return new K(3301,!1)}function Em(i,r){return new K(3302,!1)}function vm(i){return new K(3303,!1)}function bm(i,r){return new K(3400,!1)}function Tm(i){return new K(3401,!1)}function Am(i){return new K(3402,!1)}function Cm(i,r){return new K(3505,!1)}function ct(i){switch(i.length){case 0:return new Ot;case 1:return i[0];default:return new Wi(i)}}function Cl(i,r,e=new Map,t=new Map){let n=[],o=[],s=-1,a=null;if(r.forEach(c=>{let l=c.get("offset"),m=l==s,d=m&&a||new Map;c.forEach((S,v)=>{let h=v,_=S;if(v!=="offset")switch(h=i.normalizePropertyName(h,n),_){case Rr:_=e.get(v);break;case Ye:_=t.get(v);break;default:_=i.normalizeStyleValue(v,h,_,n);break}d.set(h,_)}),m||o.push(d),a=d,s=l}),n.length)throw fm(n);return o}function Rn(i,r,e,t){switch(r){case"start":i.onStart(()=>t(e&&pn(e,"start",i)));break;case"done":i.onDone(()=>t(e&&pn(e,"done",i)));break;case"destroy":i.onDestroy(()=>t(e&&pn(e,"destroy",i)));break}}function pn(i,r,e){let t=e.totalTime,n=!!e.disabled,o=kn(i.element,i.triggerName,i.fromState,i.toState,r||i.phaseName,t??i.totalTime,n),s=i._data;return s!=null&&(o._data=s),o}function kn(i,r,e,t,n="",o=0,s){return{element:i,triggerName:r,fromState:e,toState:t,phaseName:n,totalTime:o,disabled:!!s}}function Re(i,r,e){let t=i.get(r);return t||i.set(r,t=e),t}function ml(i){let r=i.indexOf(":"),e=i.substring(1,r),t=i.slice(r+1);return[e,t]}var Im=typeof document>"u"?null:document.documentElement;function Dn(i){let r=i.parentNode||i.host||null;return r===Im?null:r}function wm(i){return i.substring(1,6)=="ebkit"}var gt=null,ul=!1;function Om(i){gt||(gt=Pm()||{},ul=gt.style?"WebkitAppearance"in gt.style:!1);let r=!0;return gt.style&&!wm(i)&&(r=i in gt.style,!r&&ul&&(r="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in gt.style)),r}function Pm(){return typeof document<"u"?document.body:null}function Il(i,r){for(;r;){if(r===i)return!0;r=Dn(r)}return!1}function wl(i,r,e){if(e)return Array.from(i.querySelectorAll(r));let t=i.querySelector(r);return t?[t]:[]}var Nn=(()=>{let r=class r{validateStyleProperty(t){return Om(t)}containsElement(t,n){return Il(t,n)}getParentElement(t){return Dn(t)}query(t,n,o){return wl(t,n,o)}computeStyle(t,n,o){return o||""}animate(t,n,o,s,a,c=[],l){return new Ot(o,s)}};r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=E({token:r,factory:r.\u0275fac});let i=r;return i})(),Bn=class Bn{};Bn.NOOP=new Nn;var St=Bn,Et=class{};var Mm=1e3,Ol="{{",Fm="}}",Pl="ng-enter",gn="ng-leave",ci="ng-trigger",ui=".ng-trigger",hl="ng-animating",yn=".ng-animating";function We(i){if(typeof i=="number")return i;let r=i.match(/^(-?[\.\d]+)(m?s)/);return!r||r.length<2?0:_n(parseFloat(r[1]),r[2])}function _n(i,r){switch(r){case"s":return i*Mm;default:return i}}function hi(i,r,e){return i.hasOwnProperty("duration")?i:Rm(i,r,e)}function Rm(i,r,e){let t=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,n,o=0,s="";if(typeof i=="string"){let a=i.match(t);if(a===null)return r.push(dl(i)),{duration:0,delay:0,easing:""};n=_n(parseFloat(a[1]),a[2]);let c=a[3];c!=null&&(o=_n(parseFloat(c),a[4]));let l=a[5];l&&(s=l)}else n=i;if(!e){let a=!1,c=r.length;n<0&&(r.push(qd()),a=!0),o<0&&(r.push(Qd()),a=!0),a&&r.splice(c,0,dl(i))}return{duration:n,delay:o,easing:s}}function km(i){return i.length?i[0]instanceof Map?i:i.map(r=>new Map(Object.entries(r))):[]}function ze(i,r,e){r.forEach((t,n)=>{let o=Ln(n);e&&!e.has(n)&&e.set(n,i.style[o]),i.style[o]=t})}function _t(i,r){r.forEach((e,t)=>{let n=Ln(t);i.style[n]=""})}function Wt(i){return Array.isArray(i)?i.length==1?i[0]:rs(i):i}function Dm(i,r,e){let t=r.params||{},n=Ml(i);n.length&&n.forEach(o=>{t.hasOwnProperty(o)||e.push(Xd(o))})}var Sn=new RegExp(`${Ol}\\s*(.+?)\\s*${Fm}`,"g");function Ml(i){let r=[];if(typeof i=="string"){let e;for(;e=Sn.exec(i);)r.push(e[1]);Sn.lastIndex=0}return r}function Qt(i,r,e){let t=`${i}`,n=t.replace(Sn,(o,s)=>{let a=r[s];return a==null&&(e.push(Zd(s)),a=""),a.toString()});return n==t?i:n}var Nm=/-+([a-z0-9])/g;function Ln(i){return i.replace(Nm,(...r)=>r[1].toUpperCase())}function Lm(i,r){return i===0||r===0}function xm(i,r,e){if(e.size&&r.length){let t=r[0],n=[];if(e.forEach((o,s)=>{t.has(s)||n.push(s),t.set(s,o)}),n.length)for(let o=1;o<r.length;o++){let s=r[o];n.forEach(a=>s.set(a,xn(i,a)))}}return r}function Fe(i,r,e){switch(r.type){case B.Trigger:return i.visitTrigger(r,e);case B.State:return i.visitState(r,e);case B.Transition:return i.visitTransition(r,e);case B.Sequence:return i.visitSequence(r,e);case B.Group:return i.visitGroup(r,e);case B.Animate:return i.visitAnimate(r,e);case B.Keyframes:return i.visitKeyframes(r,e);case B.Style:return i.visitStyle(r,e);case B.Reference:return i.visitReference(r,e);case B.AnimateChild:return i.visitAnimateChild(r,e);case B.AnimateRef:return i.visitAnimateRef(r,e);case B.Query:return i.visitQuery(r,e);case B.Stagger:return i.visitStagger(r,e);default:throw Jd(r.type)}}function xn(i,r){return window.getComputedStyle(i)[r]}var $m=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),fi=class extends Et{normalizePropertyName(r,e){return Ln(r)}normalizeStyleValue(r,e,t,n){let o="",s=t.toString().trim();if($m.has(e)&&t!==0&&t!=="0")if(typeof t=="number")o="px";else{let a=t.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&n.push(em(r,t))}return s+o}};var gi="*";function Bm(i,r){let e=[];return typeof i=="string"?i.split(/\s*,\s*/).forEach(t=>jm(t,e,r)):e.push(i),e}function jm(i,r,e){if(i[0]==":"){let c=Um(i,e);if(typeof c=="function"){r.push(c);return}i=c}let t=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(t==null||t.length<4)return e.push(mm(i)),r;let n=t[1],o=t[2],s=t[3];r.push(fl(n,s));let a=n==gi&&s==gi;o[0]=="<"&&!a&&r.push(fl(s,n))}function Um(i,r){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,t)=>parseFloat(t)>parseFloat(e);case":decrement":return(e,t)=>parseFloat(t)<parseFloat(e);default:return r.push(um(i)),"* => *"}}var li=new Set(["true","1"]),pi=new Set(["false","0"]);function fl(i,r){let e=li.has(i)||pi.has(i),t=li.has(r)||pi.has(r);return(n,o)=>{let s=i==gi||i==n,a=r==gi||r==o;return!s&&e&&typeof n=="boolean"&&(s=n?li.has(i):pi.has(i)),!a&&t&&typeof o=="boolean"&&(a=o?li.has(r):pi.has(r)),s&&a}}var Fl=":self",Ym=new RegExp(`s*${Fl}s*,?`,"g");function Rl(i,r,e,t){return new En(i).build(r,e,t)}var gl="",En=class{constructor(r){this._driver=r}build(r,e,t){let n=new vn(e);return this._resetContextStyleTimingState(n),Fe(this,Wt(r),n)}_resetContextStyleTimingState(r){r.currentQuerySelector=gl,r.collectedStyles=new Map,r.collectedStyles.set(gl,new Map),r.currentTime=0}visitTrigger(r,e){let t=e.queryCount=0,n=e.depCount=0,o=[],s=[];return r.name.charAt(0)=="@"&&e.errors.push(tm()),r.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),a.type==B.State){let c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(m=>{c.name=m,o.push(this.visitState(c,e))}),c.name=l}else if(a.type==B.Transition){let c=this.visitTransition(a,e);t+=c.queryCount,n+=c.depCount,s.push(c)}else e.errors.push(rm())}),{type:B.Trigger,name:r.name,states:o,transitions:s,queryCount:t,depCount:n,options:null}}visitState(r,e){let t=this.visitStyle(r.styles,e),n=r.options&&r.options.params||null;if(t.containsDynamicStyles){let o=new Set,s=n||{};t.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{Ml(c).forEach(l=>{s.hasOwnProperty(l)||o.add(l)})})}),o.size&&e.errors.push(im(r.name,[...o.values()]))}return{type:B.State,name:r.name,style:t,options:n?{params:n}:null}}visitTransition(r,e){e.queryCount=0,e.depCount=0;let t=Fe(this,Wt(r.animation),e),n=Bm(r.expr,e.errors);return{type:B.Transition,matchers:n,animation:t,queryCount:e.queryCount,depCount:e.depCount,options:yt(r.options)}}visitSequence(r,e){return{type:B.Sequence,steps:r.steps.map(t=>Fe(this,t,e)),options:yt(r.options)}}visitGroup(r,e){let t=e.currentTime,n=0,o=r.steps.map(s=>{e.currentTime=t;let a=Fe(this,s,e);return n=Math.max(n,e.currentTime),a});return e.currentTime=n,{type:B.Group,steps:o,options:yt(r.options)}}visitAnimate(r,e){let t=Hm(r.timings,e.errors);e.currentAnimateTimings=t;let n,o=r.styles?r.styles:Vt({});if(o.type==B.Keyframes)n=this.visitKeyframes(o,e);else{let s=r.styles,a=!1;if(!s){a=!0;let l={};t.easing&&(l.easing=t.easing),s=Vt(l)}e.currentTime+=t.duration+t.delay;let c=this.visitStyle(s,e);c.isEmptyStep=a,n=c}return e.currentAnimateTimings=null,{type:B.Animate,timings:t,style:n,options:null}}visitStyle(r,e){let t=this._makeStyleAst(r,e);return this._validateStyleAst(t,e),t}_makeStyleAst(r,e){let t=[],n=Array.isArray(r.styles)?r.styles:[r.styles];for(let a of n)typeof a=="string"?a===Ye?t.push(a):e.errors.push(nm(a)):t.push(new Map(Object.entries(a)));let o=!1,s=null;return t.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let c of a.values())if(c.toString().indexOf(Ol)>=0){o=!0;break}}}),{type:B.Style,styles:t,easing:s,offset:r.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(r,e){let t=e.currentAnimateTimings,n=e.currentTime,o=e.currentTime;t&&o>0&&(o-=t.duration+t.delay),r.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,c)=>{let l=e.collectedStyles.get(e.currentQuerySelector),m=l.get(c),d=!0;m&&(o!=n&&o>=m.startTime&&n<=m.endTime&&(e.errors.push(om(c,m.startTime,m.endTime,o,n)),d=!1),o=m.startTime),d&&l.set(c,{startTime:o,endTime:n}),e.options&&Dm(a,e.options,e.errors)})})}visitKeyframes(r,e){let t={type:B.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(sm()),t;let n=1,o=0,s=[],a=!1,c=!1,l=0,m=r.steps.map(x=>{let W=this._makeStyleAst(x,e),se=W.offset!=null?W.offset:zm(W.styles),M=0;return se!=null&&(o++,M=W.offset=se),c=c||M<0||M>1,a=a||M<l,l=M,s.push(M),W});c&&e.errors.push(am()),a&&e.errors.push(cm());let d=r.steps.length,S=0;o>0&&o<d?e.errors.push(lm()):o==0&&(S=n/(d-1));let v=d-1,h=e.currentTime,_=e.currentAnimateTimings,L=_.duration;return m.forEach((x,W)=>{let se=S>0?W==v?1:S*W:s[W],M=se*L;e.currentTime=h+_.delay+M,_.duration=M,this._validateStyleAst(x,e),x.offset=se,t.styles.push(x)}),t}visitReference(r,e){return{type:B.Reference,animation:Fe(this,Wt(r.animation),e),options:yt(r.options)}}visitAnimateChild(r,e){return e.depCount++,{type:B.AnimateChild,options:yt(r.options)}}visitAnimateRef(r,e){return{type:B.AnimateRef,animation:this.visitReference(r.animation,e),options:yt(r.options)}}visitQuery(r,e){let t=e.currentQuerySelector,n=r.options||{};e.queryCount++,e.currentQuery=r;let[o,s]=Km(r.selector);e.currentQuerySelector=t.length?t+" "+o:o,Re(e.collectedStyles,e.currentQuerySelector,new Map);let a=Fe(this,Wt(r.animation),e);return e.currentQuery=null,e.currentQuerySelector=t,{type:B.Query,selector:o,limit:n.limit||0,optional:!!n.optional,includeSelf:s,animation:a,originalSelector:r.selector,options:yt(r.options)}}visitStagger(r,e){e.currentQuery||e.errors.push(pm());let t=r.timings==="full"?{duration:0,delay:0,easing:"full"}:hi(r.timings,e.errors,!0);return{type:B.Stagger,animation:Fe(this,Wt(r.animation),e),timings:t,options:null}}};function Km(i){let r=!!i.split(/\s*,\s*/).find(e=>e==Fl);return r&&(i=i.replace(Ym,"")),i=i.replace(/@\*/g,ui).replace(/@\w+/g,e=>ui+"-"+e.slice(1)).replace(/:animating/g,yn),[i,r]}function Vm(i){return i?C({},i):null}var vn=class{constructor(r){this.errors=r,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function zm(i){if(typeof i=="string")return null;let r=null;if(Array.isArray(i))i.forEach(e=>{if(e instanceof Map&&e.has("offset")){let t=e;r=parseFloat(t.get("offset")),t.delete("offset")}});else if(i instanceof Map&&i.has("offset")){let e=i;r=parseFloat(e.get("offset")),e.delete("offset")}return r}function Hm(i,r){if(i.hasOwnProperty("duration"))return i;if(typeof i=="number"){let o=hi(i,r).duration;return dn(o,0,"")}let e=i;if(e.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=dn(0,0,"");return o.dynamic=!0,o.strValue=e,o}let n=hi(e,r);return dn(n.duration,n.delay,n.easing)}function yt(i){return i?(i=C({},i),i.params&&(i.params=Vm(i.params))):i={},i}function dn(i,r,e){return{duration:i,delay:r,easing:e}}function $n(i,r,e,t,n,o,s=null,a=!1){return{type:1,element:i,keyframes:r,preStyleProps:e,postStyleProps:t,duration:n,delay:o,totalTime:n+o,easing:s,subTimeline:a}}var Xt=class{constructor(){this._map=new Map}get(r){return this._map.get(r)||[]}append(r,e){let t=this._map.get(r);t||this._map.set(r,t=[]),t.push(...e)}has(r){return this._map.has(r)}clear(){this._map.clear()}},Gm=1,Wm=":enter",qm=new RegExp(Wm,"g"),Qm=":leave",Xm=new RegExp(Qm,"g");function kl(i,r,e,t,n,o=new Map,s=new Map,a,c,l=[]){return new bn().buildKeyframes(i,r,e,t,n,o,s,a,c,l)}var bn=class{buildKeyframes(r,e,t,n,o,s,a,c,l,m=[]){l=l||new Xt;let d=new Tn(r,e,l,n,o,m,[]);d.options=c;let S=c.delay?We(c.delay):0;d.currentTimeline.delayNextStep(S),d.currentTimeline.setStyles([s],null,d.errors,c),Fe(this,t,d);let v=d.timelines.filter(h=>h.containsAnimation());if(v.length&&a.size){let h;for(let _=v.length-1;_>=0;_--){let L=v[_];if(L.element===e){h=L;break}}h&&!h.allowOnlyTimelineStyles()&&h.setStyles([a],null,d.errors,c)}return v.length?v.map(h=>h.buildKeyframes()):[$n(e,[],[],[],0,S,"",!1)]}visitTrigger(r,e){}visitState(r,e){}visitTransition(r,e){}visitAnimateChild(r,e){let t=e.subInstructions.get(e.element);if(t){let n=e.createSubContext(r.options),o=e.currentTimeline.currentTime,s=this._visitSubInstructions(t,n,n.options);o!=s&&e.transformIntoNewTimeline(s)}e.previousNode=r}visitAnimateRef(r,e){let t=e.createSubContext(r.options);t.transformIntoNewTimeline(),this._applyAnimationRefDelays([r.options,r.animation.options],e,t),this.visitReference(r.animation,t),e.transformIntoNewTimeline(t.currentTimeline.currentTime),e.previousNode=r}_applyAnimationRefDelays(r,e,t){for(let n of r){let o=n?.delay;if(o){let s=typeof o=="number"?o:We(Qt(o,n?.params??{},e.errors));t.delayNextStep(s)}}}_visitSubInstructions(r,e,t){let o=e.currentTimeline.currentTime,s=t.duration!=null?We(t.duration):null,a=t.delay!=null?We(t.delay):null;return s!==0&&r.forEach(c=>{let l=e.appendInstructionToTimeline(c,s,a);o=Math.max(o,l.duration+l.delay)}),o}visitReference(r,e){e.updateOptions(r.options,!0),Fe(this,r.animation,e),e.previousNode=r}visitSequence(r,e){let t=e.subContextCount,n=e,o=r.options;if(o&&(o.params||o.delay)&&(n=e.createSubContext(o),n.transformIntoNewTimeline(),o.delay!=null)){n.previousNode.type==B.Style&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=yi);let s=We(o.delay);n.delayNextStep(s)}r.steps.length&&(r.steps.forEach(s=>Fe(this,s,n)),n.currentTimeline.applyStylesToKeyframe(),n.subContextCount>t&&n.transformIntoNewTimeline()),e.previousNode=r}visitGroup(r,e){let t=[],n=e.currentTimeline.currentTime,o=r.options&&r.options.delay?We(r.options.delay):0;r.steps.forEach(s=>{let a=e.createSubContext(r.options);o&&a.delayNextStep(o),Fe(this,s,a),n=Math.max(n,a.currentTimeline.currentTime),t.push(a.currentTimeline)}),t.forEach(s=>e.currentTimeline.mergeTimelineCollectedStyles(s)),e.transformIntoNewTimeline(n),e.previousNode=r}_visitTiming(r,e){if(r.dynamic){let t=r.strValue,n=e.params?Qt(t,e.params,e.errors):t;return hi(n,e.errors)}else return{duration:r.duration,delay:r.delay,easing:r.easing}}visitAnimate(r,e){let t=e.currentAnimateTimings=this._visitTiming(r.timings,e),n=e.currentTimeline;t.delay&&(e.incrementTime(t.delay),n.snapshotCurrentStyles());let o=r.style;o.type==B.Keyframes?this.visitKeyframes(o,e):(e.incrementTime(t.duration),this.visitStyle(o,e),n.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=r}visitStyle(r,e){let t=e.currentTimeline,n=e.currentAnimateTimings;!n&&t.hasCurrentStyleProperties()&&t.forwardFrame();let o=n&&n.easing||r.easing;r.isEmptyStep?t.applyEmptyStep(o):t.setStyles(r.styles,o,e.errors,e.options),e.previousNode=r}visitKeyframes(r,e){let t=e.currentAnimateTimings,n=e.currentTimeline.duration,o=t.duration,a=e.createSubContext().currentTimeline;a.easing=t.easing,r.styles.forEach(c=>{let l=c.offset||0;a.forwardTime(l*o),a.setStyles(c.styles,c.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(n+o),e.previousNode=r}visitQuery(r,e){let t=e.currentTimeline.currentTime,n=r.options||{},o=n.delay?We(n.delay):0;o&&(e.previousNode.type===B.Style||t==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=yi);let s=t,a=e.invokeQuery(r.selector,r.originalSelector,r.limit,r.includeSelf,!!n.optional,e.errors);e.currentQueryTotal=a.length;let c=null;a.forEach((l,m)=>{e.currentQueryIndex=m;let d=e.createSubContext(r.options,l);o&&d.delayNextStep(o),l===e.element&&(c=d.currentTimeline),Fe(this,r.animation,d),d.currentTimeline.applyStylesToKeyframe();let S=d.currentTimeline.currentTime;s=Math.max(s,S)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),c&&(e.currentTimeline.mergeTimelineCollectedStyles(c),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=r}visitStagger(r,e){let t=e.parentContext,n=e.currentTimeline,o=r.timings,s=Math.abs(o.duration),a=s*(e.currentQueryTotal-1),c=s*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":c=a-c;break;case"full":c=t.currentStaggerTime;break}let m=e.currentTimeline;c&&m.delayNextStep(c);let d=m.currentTime;Fe(this,r.animation,e),e.previousNode=r,t.currentStaggerTime=n.currentTime-d+(n.startTime-t.currentTimeline.startTime)}},yi={},Tn=class i{constructor(r,e,t,n,o,s,a,c){this._driver=r,this.element=e,this.subInstructions=t,this._enterClassName=n,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=yi,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new _i(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(r,e){if(!r)return;let t=r,n=this.options;t.duration!=null&&(n.duration=We(t.duration)),t.delay!=null&&(n.delay=We(t.delay));let o=t.params;if(o){let s=n.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!e||!s.hasOwnProperty(a))&&(s[a]=Qt(o[a],s,this.errors))})}}_copyOptions(){let r={};if(this.options){let e=this.options.params;if(e){let t=r.params={};Object.keys(e).forEach(n=>{t[n]=e[n]})}}return r}createSubContext(r=null,e,t){let n=e||this.element,o=new i(this._driver,n,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(n,t||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(r),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(r){return this.previousNode=yi,this.currentTimeline=this.currentTimeline.fork(this.element,r),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(r,e,t){let n={duration:e??r.duration,delay:this.currentTimeline.currentTime+(t??0)+r.delay,easing:""},o=new An(this._driver,r.element,r.keyframes,r.preStyleProps,r.postStyleProps,n,r.stretchStartingKeyframe);return this.timelines.push(o),n}incrementTime(r){this.currentTimeline.forwardTime(this.currentTimeline.duration+r)}delayNextStep(r){r>0&&this.currentTimeline.delayNextStep(r)}invokeQuery(r,e,t,n,o,s){let a=[];if(n&&a.push(this.element),r.length>0){r=r.replace(qm,"."+this._enterClassName),r=r.replace(Xm,"."+this._leaveClassName);let c=t!=1,l=this._driver.query(this.element,r,c);t!==0&&(l=t<0?l.slice(l.length+t,l.length):l.slice(0,t)),a.push(...l)}return!o&&a.length==0&&s.push(dm(e)),a}},_i=class i{constructor(r,e,t,n){this._driver=r,this.element=e,this.startTime=t,this._elementTimelineStylesLookup=n,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(r){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+r),e&&this.snapshotCurrentStyles()):this.startTime+=r}fork(r,e){return this.applyStylesToKeyframe(),new i(this._driver,r,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=Gm,this._loadKeyframe()}forwardTime(r){this.applyStylesToKeyframe(),this.duration=r,this._loadKeyframe()}_updateStyle(r,e){this._localTimelineStyles.set(r,e),this._globalTimelineStyles.set(r,e),this._styleSummary.set(r,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(r){r&&this._previousKeyframe.set("easing",r);for(let[e,t]of this._globalTimelineStyles)this._backFill.set(e,t||Ye),this._currentKeyframe.set(e,Ye);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(r,e,t,n){e&&this._previousKeyframe.set("easing",e);let o=n&&n.params||{},s=Zm(r,this._globalTimelineStyles);for(let[a,c]of s){let l=Qt(c,o,t);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Ye),this._updateStyle(a,l)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((r,e)=>{this._currentKeyframe.set(e,r)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((r,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,r)}))}snapshotCurrentStyles(){for(let[r,e]of this._localTimelineStyles)this._pendingStyles.set(r,e),this._updateStyle(r,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let r=[];for(let e in this._currentKeyframe)r.push(e);return r}mergeTimelineCollectedStyles(r){r._styleSummary.forEach((e,t)=>{let n=this._styleSummary.get(t);(!n||e.time>n.time)&&this._updateStyle(t,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let r=new Set,e=new Set,t=this._keyframes.size===1&&this.duration===0,n=[];this._keyframes.forEach((a,c)=>{let l=new Map([...this._backFill,...a]);l.forEach((m,d)=>{m===Rr?r.add(d):m===Ye&&e.add(d)}),t||l.set("offset",c/this.duration),n.push(l)});let o=[...r.values()],s=[...e.values()];if(t){let a=n[0],c=new Map(a);a.set("offset",0),c.set("offset",1),n=[a,c]}return $n(this.element,n,o,s,this.duration,this.startTime,this.easing,!1)}},An=class extends _i{constructor(r,e,t,n,o,s,a=!1){super(r,e,s.delay),this.keyframes=t,this.preStyleProps=n,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let r=this.keyframes,{delay:e,duration:t,easing:n}=this.timings;if(this._stretchStartingKeyframe&&e){let o=[],s=t+e,a=e/s,c=new Map(r[0]);c.set("offset",0),o.push(c);let l=new Map(r[0]);l.set("offset",yl(a)),o.push(l);let m=r.length-1;for(let d=1;d<=m;d++){let S=new Map(r[d]),v=S.get("offset"),h=e+v*t;S.set("offset",yl(h/s)),o.push(S)}t=s,e=0,n="",r=o}return $n(this.element,r,this.preStyleProps,this.postStyleProps,t,e,n,!0)}};function yl(i,r=3){let e=Math.pow(10,r-1);return Math.round(i*e)/e}function Zm(i,r){let e=new Map,t;return i.forEach(n=>{if(n==="*"){t??=r.keys();for(let o of t)e.set(o,Ye)}else for(let[o,s]of n)e.set(o,s)}),e}function _l(i,r,e,t,n,o,s,a,c,l,m,d,S){return{type:0,element:i,triggerName:r,isRemovalTransition:n,fromState:e,fromStyles:o,toState:t,toStyles:s,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:m,totalTime:d,errors:S}}var mn={},Si=class{constructor(r,e,t){this._triggerName=r,this.ast=e,this._stateStyles=t}match(r,e,t,n){return Jm(this.ast.matchers,r,e,t,n)}buildStyles(r,e,t){let n=this._stateStyles.get("*");return r!==void 0&&(n=this._stateStyles.get(r?.toString())||n),n?n.buildStyles(e,t):new Map}build(r,e,t,n,o,s,a,c,l,m){let d=[],S=this.ast.options&&this.ast.options.params||mn,v=a&&a.params||mn,h=this.buildStyles(t,v,d),_=c&&c.params||mn,L=this.buildStyles(n,_,d),x=new Set,W=new Map,se=new Map,M=n==="void",X={params:Dl(_,S),delay:this.ast.options?.delay},N=m?[]:kl(r,e,this.ast.animation,o,s,h,L,X,l,d),te=0;return N.forEach(Z=>{te=Math.max(Z.duration+Z.delay,te)}),d.length?_l(e,this._triggerName,t,n,M,h,L,[],[],W,se,te,d):(N.forEach(Z=>{let xe=Z.element,vt=Re(W,xe,new Set);Z.preStyleProps.forEach(dt=>vt.add(dt));let co=Re(se,xe,new Set);Z.postStyleProps.forEach(dt=>co.add(dt)),xe!==e&&x.add(xe)}),_l(e,this._triggerName,t,n,M,h,L,N,[...x.values()],W,se,te))}};function Jm(i,r,e,t,n){return i.some(o=>o(r,e,t,n))}function Dl(i,r){let e=C({},r);return Object.entries(i).forEach(([t,n])=>{n!=null&&(e[t]=n)}),e}var Cn=class{constructor(r,e,t){this.styles=r,this.defaultParams=e,this.normalizer=t}buildStyles(r,e){let t=new Map,n=Dl(r,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=Qt(s,n,e));let c=this.normalizer.normalizePropertyName(a,e);s=this.normalizer.normalizeStyleValue(a,c,s,e),t.set(a,s)})}),t}};function eu(i,r,e){return new In(i,r,e)}var In=class{constructor(r,e,t){this.name=r,this.ast=e,this._normalizer=t,this.transitionFactories=[],this.states=new Map,e.states.forEach(n=>{let o=n.options&&n.options.params||{};this.states.set(n.name,new Cn(n.style,o,t))}),Sl(this.states,"true","1"),Sl(this.states,"false","0"),e.transitions.forEach(n=>{this.transitionFactories.push(new Si(r,n,this.states))}),this.fallbackTransition=tu(r,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(r,e,t,n){return this.transitionFactories.find(s=>s.match(r,e,t,n))||null}matchStyles(r,e,t){return this.fallbackTransition.buildStyles(r,e,t)}};function tu(i,r,e){let t=[(s,a)=>!0],n={type:B.Sequence,steps:[],options:null},o={type:B.Transition,animation:n,matchers:t,options:null,queryCount:0,depCount:0};return new Si(i,o,r)}function Sl(i,r,e){i.has(r)?i.has(e)||i.set(e,i.get(r)):i.has(e)&&i.set(r,i.get(e))}var ru=new Xt,wn=class{constructor(r,e,t){this.bodyNode=r,this._driver=e,this._normalizer=t,this._animations=new Map,this._playersById=new Map,this.players=[]}register(r,e){let t=[],n=[],o=Rl(this._driver,e,t,n);if(t.length)throw gm(t);n.length&&void 0,this._animations.set(r,o)}_buildPlayer(r,e,t){let n=r.element,o=Cl(this._normalizer,r.keyframes,e,t);return this._driver.animate(n,o,r.duration,r.delay,r.easing,[],!0)}create(r,e,t={}){let n=[],o=this._animations.get(r),s,a=new Map;if(o?(s=kl(this._driver,e,o,Pl,gn,new Map,new Map,t,ru,n),s.forEach(m=>{let d=Re(a,m.element,new Map);m.postStyleProps.forEach(S=>d.set(S,null))})):(n.push(ym()),s=[]),n.length)throw _m(n);a.forEach((m,d)=>{m.forEach((S,v)=>{m.set(v,this._driver.computeStyle(d,v,Ye))})});let c=s.map(m=>{let d=a.get(m.element);return this._buildPlayer(m,new Map,d)}),l=ct(c);return this._playersById.set(r,l),l.onDestroy(()=>this.destroy(r)),this.players.push(l),l}destroy(r){let e=this._getPlayer(r);e.destroy(),this._playersById.delete(r);let t=this.players.indexOf(e);t>=0&&this.players.splice(t,1)}_getPlayer(r){let e=this._playersById.get(r);if(!e)throw Sm(r);return e}listen(r,e,t,n){let o=kn(e,"","","");return Rn(this._getPlayer(r),t,o,n),()=>{}}command(r,e,t,n){if(t=="register"){this.register(r,n[0]);return}if(t=="create"){let s=n[0]||{};this.create(r,e,s);return}let o=this._getPlayer(r);switch(t){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(n[0]));break;case"destroy":this.destroy(r);break}}},El="ng-animate-queued",iu=".ng-animate-queued",un="ng-animate-disabled",nu=".ng-animate-disabled",ou="ng-star-inserted",su=".ng-star-inserted",au=[],Nl={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},cu={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Be="__ng_removed",Zt=class{get params(){return this.options.params}constructor(r,e=""){this.namespaceId=e;let t=r&&r.hasOwnProperty("value"),n=t?r.value:r;if(this.value=pu(n),t){let o=r,{value:s}=o,a=cr(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(r){let e=r.params;if(e){let t=this.options.params;Object.keys(e).forEach(n=>{t[n]==null&&(t[n]=e[n])})}}},qt="void",hn=new Zt(qt),On=class{constructor(r,e,t){this.id=r,this.hostElement=e,this._engine=t,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+r,Le(e,this._hostClassName)}listen(r,e,t,n){if(!this._triggers.has(e))throw Em(t,e);if(t==null||t.length==0)throw vm(e);if(!du(t))throw bm(t,e);let o=Re(this._elementListeners,r,[]),s={name:e,phase:t,callback:n};o.push(s);let a=Re(this._engine.statesByElement,r,new Map);return a.has(e)||(Le(r,ci),Le(r,ci+"-"+e),a.set(e,hn)),()=>{this._engine.afterFlush(()=>{let c=o.indexOf(s);c>=0&&o.splice(c,1),this._triggers.has(e)||a.delete(e)})}}register(r,e){return this._triggers.has(r)?!1:(this._triggers.set(r,e),!0)}_getTrigger(r){let e=this._triggers.get(r);if(!e)throw Tm(r);return e}trigger(r,e,t,n=!0){let o=this._getTrigger(e),s=new Jt(this.id,e,r),a=this._engine.statesByElement.get(r);a||(Le(r,ci),Le(r,ci+"-"+e),this._engine.statesByElement.set(r,a=new Map));let c=a.get(e),l=new Zt(t,this.id);if(!(t&&t.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(e,l),c||(c=hn),!(l.value===qt)&&c.value===l.value){if(!hu(c.params,l.params)){let _=[],L=o.matchStyles(c.value,c.params,_),x=o.matchStyles(l.value,l.params,_);_.length?this._engine.reportError(_):this._engine.afterFlush(()=>{_t(r,L),ze(r,x)})}return}let S=Re(this._engine.playersByElement,r,[]);S.forEach(_=>{_.namespaceId==this.id&&_.triggerName==e&&_.queued&&_.destroy()});let v=o.matchTransition(c.value,l.value,r,l.params),h=!1;if(!v){if(!n)return;v=o.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:r,triggerName:e,transition:v,fromState:c,toState:l,player:s,isFallbackTransition:h}),h||(Le(r,El),s.onStart(()=>{Dt(r,El)})),s.onDone(()=>{let _=this.players.indexOf(s);_>=0&&this.players.splice(_,1);let L=this._engine.playersByElement.get(r);if(L){let x=L.indexOf(s);x>=0&&L.splice(x,1)}}),this.players.push(s),S.push(s),s}deregister(r){this._triggers.delete(r),this._engine.statesByElement.forEach(e=>e.delete(r)),this._elementListeners.forEach((e,t)=>{this._elementListeners.set(t,e.filter(n=>n.name!=r))})}clearElementCache(r){this._engine.statesByElement.delete(r),this._elementListeners.delete(r);let e=this._engine.playersByElement.get(r);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(r))}_signalRemovalForInnerTriggers(r,e){let t=this._engine.driver.query(r,ui,!0);t.forEach(n=>{if(n[Be])return;let o=this._engine.fetchNamespacesByElement(n);o.size?o.forEach(s=>s.triggerLeaveAnimation(n,e,!1,!0)):this.clearElementCache(n)}),this._engine.afterFlushAnimationsDone(()=>t.forEach(n=>this.clearElementCache(n)))}triggerLeaveAnimation(r,e,t,n){let o=this._engine.statesByElement.get(r),s=new Map;if(o){let a=[];if(o.forEach((c,l)=>{if(s.set(l,c.value),this._triggers.has(l)){let m=this.trigger(r,l,qt,n);m&&a.push(m)}}),a.length)return this._engine.markElementAsRemoved(this.id,r,!0,e,s),t&&ct(a).onDone(()=>this._engine.processLeaveNode(r)),!0}return!1}prepareLeaveAnimationListeners(r){let e=this._elementListeners.get(r),t=this._engine.statesByElement.get(r);if(e&&t){let n=new Set;e.forEach(o=>{let s=o.name;if(n.has(s))return;n.add(s);let c=this._triggers.get(s).fallbackTransition,l=t.get(s)||hn,m=new Zt(qt),d=new Jt(this.id,s,r);this._engine.totalQueuedPlayers++,this._queue.push({element:r,triggerName:s,transition:c,fromState:l,toState:m,player:d,isFallbackTransition:!0})})}}removeNode(r,e){let t=this._engine;if(r.childElementCount&&this._signalRemovalForInnerTriggers(r,e),this.triggerLeaveAnimation(r,e,!0))return;let n=!1;if(t.totalAnimations){let o=t.players.length?t.playersByQueriedElement.get(r):[];if(o&&o.length)n=!0;else{let s=r;for(;s=s.parentNode;)if(t.statesByElement.get(s)){n=!0;break}}}if(this.prepareLeaveAnimationListeners(r),n)t.markElementAsRemoved(this.id,r,!1,e);else{let o=r[Be];(!o||o===Nl)&&(t.afterFlush(()=>this.clearElementCache(r)),t.destroyInnerAnimations(r),t._onRemovalComplete(r,e))}}insertNode(r,e){Le(r,this._hostClassName)}drainQueuedTransitions(r){let e=[];return this._queue.forEach(t=>{let n=t.player;if(n.destroyed)return;let o=t.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==t.triggerName){let c=kn(o,t.triggerName,t.fromState.value,t.toState.value);c._data=r,Rn(t.player,a.phase,c,a.callback)}}),n.markedForDestroy?this._engine.afterFlush(()=>{n.destroy()}):e.push(t)}),this._queue=[],e.sort((t,n)=>{let o=t.transition.ast.depCount,s=n.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(t.element,n.element)?1:-1})}destroy(r){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,r)}},Pn=class{_onRemovalComplete(r,e){this.onRemovalComplete(r,e)}constructor(r,e,t){this.bodyNode=r,this.driver=e,this._normalizer=t,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(n,o)=>{}}get queuedPlayers(){let r=[];return this._namespaceList.forEach(e=>{e.players.forEach(t=>{t.queued&&r.push(t)})}),r}createNamespace(r,e){let t=new On(r,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(t,e):(this.newHostElements.set(e,t),this.collectEnterElement(e)),this._namespaceLookup[r]=t}_balanceNamespaceList(r,e){let t=this._namespaceList,n=this.namespacesByHostElement;if(t.length-1>=0){let s=!1,a=this.driver.getParentElement(e);for(;a;){let c=n.get(a);if(c){let l=t.indexOf(c);t.splice(l+1,0,r),s=!0;break}a=this.driver.getParentElement(a)}s||t.unshift(r)}else t.push(r);return n.set(e,r),r}register(r,e){let t=this._namespaceLookup[r];return t||(t=this.createNamespace(r,e)),t}registerTrigger(r,e,t){let n=this._namespaceLookup[r];n&&n.register(e,t)&&this.totalAnimations++}destroy(r,e){r&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let t=this._fetchNamespace(r);this.namespacesByHostElement.delete(t.hostElement);let n=this._namespaceList.indexOf(t);n>=0&&this._namespaceList.splice(n,1),t.destroy(e),delete this._namespaceLookup[r]}))}_fetchNamespace(r){return this._namespaceLookup[r]}fetchNamespacesByElement(r){let e=new Set,t=this.statesByElement.get(r);if(t){for(let n of t.values())if(n.namespaceId){let o=this._fetchNamespace(n.namespaceId);o&&e.add(o)}}return e}trigger(r,e,t,n){if(di(e)){let o=this._fetchNamespace(r);if(o)return o.trigger(e,t,n),!0}return!1}insertNode(r,e,t,n){if(!di(e))return;let o=e[Be];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(e);s>=0&&this.collectedLeaveElements.splice(s,1)}if(r){let s=this._fetchNamespace(r);s&&s.insertNode(e,t)}n&&this.collectEnterElement(e)}collectEnterElement(r){this.collectedEnterElements.push(r)}markElementAsDisabled(r,e){e?this.disabledNodes.has(r)||(this.disabledNodes.add(r),Le(r,un)):this.disabledNodes.has(r)&&(this.disabledNodes.delete(r),Dt(r,un))}removeNode(r,e,t){if(di(e)){let n=r?this._fetchNamespace(r):null;n?n.removeNode(e,t):this.markElementAsRemoved(r,e,!1,t);let o=this.namespacesByHostElement.get(e);o&&o.id!==r&&o.removeNode(e,t)}else this._onRemovalComplete(e,t)}markElementAsRemoved(r,e,t,n,o){this.collectedLeaveElements.push(e),e[Be]={namespaceId:r,setForRemoval:n,hasAnimation:t,removedBeforeQueried:!1,previousTriggersValues:o}}listen(r,e,t,n,o){return di(e)?this._fetchNamespace(r).listen(e,t,n,o):()=>{}}_buildInstruction(r,e,t,n,o){return r.transition.build(this.driver,r.element,r.fromState.value,r.toState.value,t,n,r.fromState.options,r.toState.options,e,o)}destroyInnerAnimations(r){let e=this.driver.query(r,ui,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(r,yn,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(r){let e=this.playersByElement.get(r);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(r){let e=this.playersByQueriedElement.get(r);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(r=>{if(this.players.length)return ct(this.players).onDone(()=>r());r()})}processLeaveNode(r){let e=r[Be];if(e&&e.setForRemoval){if(r[Be]=Nl,e.namespaceId){this.destroyInnerAnimations(r);let t=this._fetchNamespace(e.namespaceId);t&&t.clearElementCache(r)}this._onRemovalComplete(r,e.setForRemoval)}r.classList?.contains(un)&&this.markElementAsDisabled(r,!1),this.driver.query(r,nu,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(r=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,n)=>this._balanceNamespaceList(t,n)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let t=0;t<this.collectedEnterElements.length;t++){let n=this.collectedEnterElements[t];Le(n,ou)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let t=[];try{e=this._flushAnimations(t,r)}finally{for(let n=0;n<t.length;n++)t[n]()}}else for(let t=0;t<this.collectedLeaveElements.length;t++){let n=this.collectedLeaveElements[t];this.processLeaveNode(n)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){let t=this._whenQuietFns;this._whenQuietFns=[],e.length?ct(e).onDone(()=>{t.forEach(n=>n())}):t.forEach(n=>n())}}reportError(r){throw Am(r)}_flushAnimations(r,e){let t=new Xt,n=[],o=new Map,s=[],a=new Map,c=new Map,l=new Map,m=new Set;this.disabledNodes.forEach(A=>{m.add(A);let I=this.driver.query(A,iu,!0);for(let P=0;P<I.length;P++)m.add(I[P])});let d=this.bodyNode,S=Array.from(this.statesByElement.keys()),v=Tl(S,this.collectedEnterElements),h=new Map,_=0;v.forEach((A,I)=>{let P=Pl+_++;h.set(I,P),A.forEach(Y=>Le(Y,P))});let L=[],x=new Set,W=new Set;for(let A=0;A<this.collectedLeaveElements.length;A++){let I=this.collectedLeaveElements[A],P=I[Be];P&&P.setForRemoval&&(L.push(I),x.add(I),P.hasAnimation?this.driver.query(I,su,!0).forEach(Y=>x.add(Y)):W.add(I))}let se=new Map,M=Tl(S,Array.from(x));M.forEach((A,I)=>{let P=gn+_++;se.set(I,P),A.forEach(Y=>Le(Y,P))}),r.push(()=>{v.forEach((A,I)=>{let P=h.get(I);A.forEach(Y=>Dt(Y,P))}),M.forEach((A,I)=>{let P=se.get(I);A.forEach(Y=>Dt(Y,P))}),L.forEach(A=>{this.processLeaveNode(A)})});let X=[],N=[];for(let A=this._namespaceList.length-1;A>=0;A--)this._namespaceList[A].drainQueuedTransitions(e).forEach(P=>{let Y=P.player,ue=P.element;if(X.push(Y),this.collectedEnterElements.length){let _e=ue[Be];if(_e&&_e.setForMove){if(_e.previousTriggersValues&&_e.previousTriggersValues.has(P.triggerName)){let mt=_e.previousTriggersValues.get(P.triggerName),ke=this.statesByElement.get(P.element);if(ke&&ke.has(P.triggerName)){let ar=ke.get(P.triggerName);ar.value=mt,ke.set(P.triggerName,ar)}}Y.destroy();return}}let je=!d||!this.driver.containsElement(d,ue),we=se.get(ue),Qe=h.get(ue),ie=this._buildInstruction(P,t,Qe,we,je);if(ie.errors&&ie.errors.length){N.push(ie);return}if(je){Y.onStart(()=>_t(ue,ie.fromStyles)),Y.onDestroy(()=>ze(ue,ie.toStyles)),n.push(Y);return}if(P.isFallbackTransition){Y.onStart(()=>_t(ue,ie.fromStyles)),Y.onDestroy(()=>ze(ue,ie.toStyles)),n.push(Y);return}let mo=[];ie.timelines.forEach(_e=>{_e.stretchStartingKeyframe=!0,this.disabledNodes.has(_e.element)||mo.push(_e)}),ie.timelines=mo,t.append(ue,ie.timelines);let Gd={instruction:ie,player:Y,element:ue};s.push(Gd),ie.queriedElements.forEach(_e=>Re(a,_e,[]).push(Y)),ie.preStyleProps.forEach((_e,mt)=>{if(_e.size){let ke=c.get(mt);ke||c.set(mt,ke=new Set),_e.forEach((ar,Bi)=>ke.add(Bi))}}),ie.postStyleProps.forEach((_e,mt)=>{let ke=l.get(mt);ke||l.set(mt,ke=new Set),_e.forEach((ar,Bi)=>ke.add(Bi))})});if(N.length){let A=[];N.forEach(I=>{A.push(Cm(I.triggerName,I.errors))}),X.forEach(I=>I.destroy()),this.reportError(A)}let te=new Map,Z=new Map;s.forEach(A=>{let I=A.element;t.has(I)&&(Z.set(I,I),this._beforeAnimationBuild(A.player.namespaceId,A.instruction,te))}),n.forEach(A=>{let I=A.element;this._getPreviousPlayers(I,!1,A.namespaceId,A.triggerName,null).forEach(Y=>{Re(te,I,[]).push(Y),Y.destroy()})});let xe=L.filter(A=>Al(A,c,l)),vt=new Map;bl(vt,this.driver,W,l,Ye).forEach(A=>{Al(A,c,l)&&xe.push(A)});let dt=new Map;v.forEach((A,I)=>{bl(dt,this.driver,new Set(A),c,Rr)}),xe.forEach(A=>{let I=vt.get(A),P=dt.get(A);vt.set(A,new Map([...I?.entries()??[],...P?.entries()??[]]))});let $i=[],lo=[],po={};s.forEach(A=>{let{element:I,player:P,instruction:Y}=A;if(t.has(I)){if(m.has(I)){P.onDestroy(()=>ze(I,Y.toStyles)),P.disabled=!0,P.overrideTotalTime(Y.totalTime),n.push(P);return}let ue=po;if(Z.size>1){let we=I,Qe=[];for(;we=we.parentNode;){let ie=Z.get(we);if(ie){ue=ie;break}Qe.push(we)}Qe.forEach(ie=>Z.set(ie,ue))}let je=this._buildAnimation(P.namespaceId,Y,te,o,dt,vt);if(P.setRealPlayer(je),ue===po)$i.push(P);else{let we=this.playersByElement.get(ue);we&&we.length&&(P.parentPlayer=ct(we)),n.push(P)}}else _t(I,Y.fromStyles),P.onDestroy(()=>ze(I,Y.toStyles)),lo.push(P),m.has(I)&&n.push(P)}),lo.forEach(A=>{let I=o.get(A.element);if(I&&I.length){let P=ct(I);A.setRealPlayer(P)}}),n.forEach(A=>{A.parentPlayer?A.syncPlayerEvents(A.parentPlayer):A.destroy()});for(let A=0;A<L.length;A++){let I=L[A],P=I[Be];if(Dt(I,gn),P&&P.hasAnimation)continue;let Y=[];if(a.size){let je=a.get(I);je&&je.length&&Y.push(...je);let we=this.driver.query(I,yn,!0);for(let Qe=0;Qe<we.length;Qe++){let ie=a.get(we[Qe]);ie&&ie.length&&Y.push(...ie)}}let ue=Y.filter(je=>!je.destroyed);ue.length?mu(this,I,ue):this.processLeaveNode(I)}return L.length=0,$i.forEach(A=>{this.players.push(A),A.onDone(()=>{A.destroy();let I=this.players.indexOf(A);this.players.splice(I,1)}),A.play()}),$i}afterFlush(r){this._flushFns.push(r)}afterFlushAnimationsDone(r){this._whenQuietFns.push(r)}_getPreviousPlayers(r,e,t,n,o){let s=[];if(e){let a=this.playersByQueriedElement.get(r);a&&(s=a)}else{let a=this.playersByElement.get(r);if(a){let c=!o||o==qt;a.forEach(l=>{l.queued||!c&&l.triggerName!=n||s.push(l)})}}return(t||n)&&(s=s.filter(a=>!(t&&t!=a.namespaceId||n&&n!=a.triggerName))),s}_beforeAnimationBuild(r,e,t){let n=e.triggerName,o=e.element,s=e.isRemovalTransition?void 0:r,a=e.isRemovalTransition?void 0:n;for(let c of e.timelines){let l=c.element,m=l!==o,d=Re(t,l,[]);this._getPreviousPlayers(l,m,s,a,e.toState).forEach(v=>{let h=v.getRealPlayer();h.beforeDestroy&&h.beforeDestroy(),v.destroy(),d.push(v)})}_t(o,e.fromStyles)}_buildAnimation(r,e,t,n,o,s){let a=e.triggerName,c=e.element,l=[],m=new Set,d=new Set,S=e.timelines.map(h=>{let _=h.element;m.add(_);let L=_[Be];if(L&&L.removedBeforeQueried)return new Ot(h.duration,h.delay);let x=_!==c,W=uu((t.get(_)||au).map(te=>te.getRealPlayer())).filter(te=>{let Z=te;return Z.element?Z.element===_:!1}),se=o.get(_),M=s.get(_),X=Cl(this._normalizer,h.keyframes,se,M),N=this._buildPlayer(h,X,W);if(h.subTimeline&&n&&d.add(_),x){let te=new Jt(r,a,_);te.setRealPlayer(N),l.push(te)}return N});l.forEach(h=>{Re(this.playersByQueriedElement,h.element,[]).push(h),h.onDone(()=>lu(this.playersByQueriedElement,h.element,h))}),m.forEach(h=>Le(h,hl));let v=ct(S);return v.onDestroy(()=>{m.forEach(h=>Dt(h,hl)),ze(c,e.toStyles)}),d.forEach(h=>{Re(n,h,[]).push(v)}),v}_buildPlayer(r,e,t){return e.length>0?this.driver.animate(r.element,e,r.duration,r.delay,r.easing,t):new Ot(r.duration,r.delay)}},Jt=class{constructor(r,e,t){this.namespaceId=r,this.triggerName=e,this.element=t,this._player=new Ot,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(r){this._containsRealPlayer||(this._player=r,this._queuedCallbacks.forEach((e,t)=>{e.forEach(n=>Rn(r,t,void 0,n))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(r.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(r){this.totalTime=r}syncPlayerEvents(r){let e=this._player;e.triggerCallback&&r.onStart(()=>e.triggerCallback("start")),r.onDone(()=>this.finish()),r.onDestroy(()=>this.destroy())}_queueEvent(r,e){Re(this._queuedCallbacks,r,[]).push(e)}onDone(r){this.queued&&this._queueEvent("done",r),this._player.onDone(r)}onStart(r){this.queued&&this._queueEvent("start",r),this._player.onStart(r)}onDestroy(r){this.queued&&this._queueEvent("destroy",r),this._player.onDestroy(r)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(r){this.queued||this._player.setPosition(r)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(r){let e=this._player;e.triggerCallback&&e.triggerCallback(r)}};function lu(i,r,e){let t=i.get(r);if(t){if(t.length){let n=t.indexOf(e);t.splice(n,1)}t.length==0&&i.delete(r)}return t}function pu(i){return i??null}function di(i){return i&&i.nodeType===1}function du(i){return i=="start"||i=="done"}function vl(i,r){let e=i.style.display;return i.style.display=r??"none",e}function bl(i,r,e,t,n){let o=[];e.forEach(c=>o.push(vl(c)));let s=[];t.forEach((c,l)=>{let m=new Map;c.forEach(d=>{let S=r.computeStyle(l,d,n);m.set(d,S),(!S||S.length==0)&&(l[Be]=cu,s.push(l))}),i.set(l,m)});let a=0;return e.forEach(c=>vl(c,o[a++])),s}function Tl(i,r){let e=new Map;if(i.forEach(a=>e.set(a,[])),r.length==0)return e;let t=1,n=new Set(r),o=new Map;function s(a){if(!a)return t;let c=o.get(a);if(c)return c;let l=a.parentNode;return e.has(l)?c=l:n.has(l)?c=t:c=s(l),o.set(a,c),c}return r.forEach(a=>{let c=s(a);c!==t&&e.get(c).push(a)}),e}function Le(i,r){i.classList?.add(r)}function Dt(i,r){i.classList?.remove(r)}function mu(i,r,e){ct(e).onDone(()=>i.processLeaveNode(r))}function uu(i){let r=[];return Ll(i,r),r}function Ll(i,r){for(let e=0;e<i.length;e++){let t=i[e];t instanceof Wi?Ll(t.players,r):r.push(t)}}function hu(i,r){let e=Object.keys(i),t=Object.keys(r);if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let o=e[n];if(!r.hasOwnProperty(o)||i[o]!==r[o])return!1}return!0}function Al(i,r,e){let t=e.get(i);if(!t)return!1;let n=r.get(i);return n?t.forEach(o=>n.add(o)):r.set(i,t),e.delete(i),!0}var Lt=class{constructor(r,e,t){this._driver=e,this._normalizer=t,this._triggerCache={},this.onRemovalComplete=(n,o)=>{},this._transitionEngine=new Pn(r.body,e,t),this._timelineEngine=new wn(r.body,e,t),this._transitionEngine.onRemovalComplete=(n,o)=>this.onRemovalComplete(n,o)}registerTrigger(r,e,t,n,o){let s=r+"-"+n,a=this._triggerCache[s];if(!a){let c=[],l=[],m=Rl(this._driver,o,c,l);if(c.length)throw hm(n,c);l.length&&void 0,a=eu(n,m,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(e,n,a)}register(r,e){this._transitionEngine.register(r,e)}destroy(r,e){this._transitionEngine.destroy(r,e)}onInsert(r,e,t,n){this._transitionEngine.insertNode(r,e,t,n)}onRemove(r,e,t){this._transitionEngine.removeNode(r,e,t)}disableAnimations(r,e){this._transitionEngine.markElementAsDisabled(r,e)}process(r,e,t,n){if(t.charAt(0)=="@"){let[o,s]=ml(t),a=n;this._timelineEngine.command(o,e,s,a)}else this._transitionEngine.trigger(r,e,t,n)}listen(r,e,t,n,o){if(t.charAt(0)=="@"){let[s,a]=ml(t);return this._timelineEngine.listen(s,e,a,o)}return this._transitionEngine.listen(r,e,t,n,o)}flush(r=-1){this._transitionEngine.flush(r)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(r){this._transitionEngine.afterFlushAnimationsDone(r)}};function fu(i,r){let e=null,t=null;return Array.isArray(r)&&r.length?(e=fn(r[0]),r.length>1&&(t=fn(r[r.length-1]))):r instanceof Map&&(e=fn(r)),e||t?new Mn(i,e,t):null}var Nt=class Nt{constructor(r,e,t){this._element=r,this._startStyles=e,this._endStyles=t,this._state=0;let n=Nt.initialStylesByElement.get(r);n||Nt.initialStylesByElement.set(r,n=new Map),this._initialStyles=n}start(){this._state<1&&(this._startStyles&&ze(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ze(this._element,this._initialStyles),this._endStyles&&(ze(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Nt.initialStylesByElement.delete(this._element),this._startStyles&&(_t(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(_t(this._element,this._endStyles),this._endStyles=null),ze(this._element,this._initialStyles),this._state=3)}};Nt.initialStylesByElement=new WeakMap;var Mn=Nt;function fn(i){let r=null;return i.forEach((e,t)=>{gu(t)&&(r=r||new Map,r.set(t,e))}),r}function gu(i){return i==="display"||i==="position"}var Ei=class{constructor(r,e,t,n){this.element=r,this.keyframes=e,this.options=t,this._specialStyles=n,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=t.duration,this._delay=t.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(r=>r()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let r=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,r,this.options),this._finalKeyframe=r.length?r[r.length-1]:new Map;let e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(r){let e=[];return r.forEach(t=>{e.push(Object.fromEntries(t))}),e}_triggerWebAnimation(r,e,t){return r.animate(this._convertKeyframesToObject(e),t)}onStart(r){this._originalOnStartFns.push(r),this._onStartFns.push(r)}onDone(r){this._originalOnDoneFns.push(r),this._onDoneFns.push(r)}onDestroy(r){this._onDestroyFns.push(r)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(r=>r()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(r=>r()),this._onDestroyFns=[])}setPosition(r){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=r*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let r=new Map;this.hasStarted()&&this._finalKeyframe.forEach((t,n)=>{n!=="offset"&&r.set(n,this._finished?t:xn(this.element,n))}),this.currentSnapshot=r}triggerCallback(r){let e=r==="start"?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}},vi=class{validateStyleProperty(r){return!0}validateAnimatableStyleProperty(r){return!0}containsElement(r,e){return Il(r,e)}getParentElement(r){return Dn(r)}query(r,e,t){return wl(r,e,t)}computeStyle(r,e,t){return xn(r,e)}animate(r,e,t,n,o,s=[]){let a=n==0?"both":"forwards",c={duration:t,delay:n,fill:a};o&&(c.easing=o);let l=new Map,m=s.filter(v=>v instanceof Ei);Lm(t,n)&&m.forEach(v=>{v.currentSnapshot.forEach((h,_)=>l.set(_,h))});let d=km(e).map(v=>new Map(v));d=xm(r,d,l);let S=fu(r,d);return new Ei(r,d,c,S)}};var mi="@",xl="@.disabled",bi=class{constructor(r,e,t,n){this.namespaceId=r,this.delegate=e,this.engine=t,this._onDestroy=n,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(r){this.delegate.destroyNode?.(r)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(r,e){return this.delegate.createElement(r,e)}createComment(r){return this.delegate.createComment(r)}createText(r){return this.delegate.createText(r)}appendChild(r,e){this.delegate.appendChild(r,e),this.engine.onInsert(this.namespaceId,e,r,!1)}insertBefore(r,e,t,n=!0){this.delegate.insertBefore(r,e,t),this.engine.onInsert(this.namespaceId,e,r,n)}removeChild(r,e,t){this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(r,e){return this.delegate.selectRootElement(r,e)}parentNode(r){return this.delegate.parentNode(r)}nextSibling(r){return this.delegate.nextSibling(r)}setAttribute(r,e,t,n){this.delegate.setAttribute(r,e,t,n)}removeAttribute(r,e,t){this.delegate.removeAttribute(r,e,t)}addClass(r,e){this.delegate.addClass(r,e)}removeClass(r,e){this.delegate.removeClass(r,e)}setStyle(r,e,t,n){this.delegate.setStyle(r,e,t,n)}removeStyle(r,e,t){this.delegate.removeStyle(r,e,t)}setProperty(r,e,t){e.charAt(0)==mi&&e==xl?this.disableAnimations(r,!!t):this.delegate.setProperty(r,e,t)}setValue(r,e){this.delegate.setValue(r,e)}listen(r,e,t){return this.delegate.listen(r,e,t)}disableAnimations(r,e){this.engine.disableAnimations(r,e)}},Fn=class extends bi{constructor(r,e,t,n,o){super(e,t,n,o),this.factory=r,this.namespaceId=e}setProperty(r,e,t){e.charAt(0)==mi?e.charAt(1)=="."&&e==xl?(t=t===void 0?!0:!!t,this.disableAnimations(r,t)):this.engine.process(this.namespaceId,r,e.slice(1),t):this.delegate.setProperty(r,e,t)}listen(r,e,t){if(e.charAt(0)==mi){let n=yu(r),o=e.slice(1),s="";return o.charAt(0)!=mi&&([o,s]=_u(o)),this.engine.listen(this.namespaceId,n,o,s,a=>{let c=a._data||-1;this.factory.scheduleListenerCallback(c,t,a)})}return this.delegate.listen(r,e,t)}};function yu(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}function _u(i){let r=i.indexOf("."),e=i.substring(0,r),t=i.slice(r+1);return[e,t]}var Ti=class{constructor(r,e,t){this.delegate=r,this.engine=e,this._zone=t,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,e.onRemovalComplete=(n,o)=>{o?.removeChild(null,n)}}createRenderer(r,e){let t="",n=this.delegate.createRenderer(r,e);if(!r||!e?.data?.animation){let l=this._rendererCache,m=l.get(n);if(!m){let d=()=>l.delete(n);m=new bi(t,n,this.engine,d),l.set(n,m)}return m}let o=e.id,s=e.id+"-"+this._currentId;this._currentId++,this.engine.register(s,r);let a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(o,s,r,l.name,l)};return e.data.animation.forEach(a),new Fn(this,s,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(r,e,t){if(r>=0&&r<this._microtaskId){this._zone.run(()=>e(t));return}let n=this._animationCallbacksBuffer;n.length==0&&queueMicrotask(()=>{this._zone.run(()=>{n.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),n.push([e,t])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var Eu=(()=>{let r=class r extends Lt{constructor(t,n,o){super(t,n,o)}ngOnDestroy(){this.flush()}};r.\u0275fac=function(n){return new(n||r)(y(Ze),y(St),y(Et))},r.\u0275prov=E({token:r,factory:r.\u0275fac});let i=r;return i})();function vu(){return new fi}function bu(i,r,e){return new Ti(i,r,e)}var Bl=[{provide:Et,useFactory:vu},{provide:Lt,useClass:Eu},{provide:vr,useFactory:bu,deps:[Yo,Lt,Tt]}],$l=[{provide:St,useFactory:()=>new vi},{provide:Ki,useValue:"BrowserAnimations"},...Bl],Tu=[{provide:St,useClass:Nn},{provide:Ki,useValue:"NoopAnimations"},...Bl],jl=(()=>{let r=class r{static withConfig(t){return{ngModule:r,providers:t.disableAnimations?Tu:$l}}};r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=be({type:r}),r.\u0275inj=Ee({providers:$l,imports:[Fr]});let i=r;return i})();var Ul=(()=>{class i{httpClient;storeConfig;constructor(e,t){this.httpClient=e,this.storeConfig=t}getSecurityConfig({companyId:e,referrer:t,bookformId:n}){let o,s="";return t&&(s=new Mr({fromObject:{referrer:t}}).toString()),e&&(o=`${this.storeConfig.apiUrl}/booking/locations/${e}/security_levels/?${s}`),n&&(o=`${this.storeConfig.apiUrl}/booking/forms/${n}/security_levels/?${s}`),this.httpClient.get(o.toString()).pipe(w(a=>a.data))}static \u0275fac=function(t){return new(t||i)(y(tt),y(Mt))};static \u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Yl=(()=>{class i{actions$=b(ee);securityService=b(Ul);httpError=b(rt);referrerService=b(it);getSecurityEffects$=U(()=>this.actions$.pipe(R(gs),bt(e=>this.securityService.getSecurityConfig({bookformId:e.bookformId,referrer:this.referrerService.getSaved()}).pipe(w(t=>ys({payload:t})),ne(t=>z(_s({message:this.httpError.getErrorMessage(t)})))))));static \u0275fac=function(t){return new(t||i)};static \u0275prov=E({token:i,factory:i.\u0275fac})}return i})();var Gl=lr(Hl(),1);var Un="@ngrx/store/init",xu="@ngrx/store/update-reducers",$u=/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})/,Bu=(i,r)=>typeof r=="string"&&$u.test(r)?new Date(r):r,ju=(i,r)=>r,Uu=()=>typeof window<"u",Yu=i=>i.map(r=>{let e=r;if(typeof r=="object"&&(e=Object.keys(r)[0]),typeof e!="string")throw new TypeError(`localStorageSync Unknown Parameter Type: Expected type of string, got ${typeof e}`);return r}),Ku=(i,r,e,t)=>i.reduce((n,o)=>{let s=o,a=t?Bu:ju,c,l;if(typeof s=="object"&&(s=Object.keys(s)[0],typeof o[s]=="function"?a=o[s]:(o[s].reviver&&(a=o[s].reviver),o[s].deserialize&&(c=o[s].deserialize)),o[s].encrypt&&o[s].decrypt?typeof o[s].encrypt=="function"&&typeof o[s].decrypt=="function"?l=o[s].decrypt:console.error(`Either encrypt or decrypt is not a function on '${o[s]}' key object.`):(o[s].encrypt||o[s].decrypt)&&console.error(`Either encrypt or decrypt function is not present on '${o[s]}' key object.`)),r!==void 0){let m=r.getItem(e(s));if(m){l&&(m=l(m));let d=new RegExp("{|\\["),S=m;return(m==="null"||m==="true"||m==="false"||d.test(m.charAt(0)))&&(S=JSON.parse(m,a)),Object.assign({},n,{[s]:c?c(S):S})}}return n},{});function Wl(i,r){return r.reduce((e,t)=>{if(typeof t=="string"||typeof t=="number"){let n=i?.[t];n!==void 0&&(e[t]=n)}else for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)){let o=t[n];e[n]=Wl(i[n],o)}return e},{})}var Vu=(i,r,e,t,n,o)=>{if(o)try{if(o(i)!==!0)return}catch(s){if(s instanceof TypeError)return;throw s}r.forEach(s=>{let a=i[s],c,l,m;if(typeof s=="object"){let d=Object.keys(s)[0];if(a=i[d],typeof a<"u"&&s[d]){if(s[d].serialize)a=s[d].serialize(a);else{let S;s[d].reduce?S=s[d]:s[d].filter&&(S=s[d].filter),S&&(a=Wl(a,S)),s[d].encrypt&&s[d].decrypt?typeof s[d].encrypt=="function"&&(m=s[d].encrypt):(s[d].encrypt||s[d].decrypt)&&console.error(`Either encrypt or decrypt function is not present on '${s[d]}' key object.`)}c=s[d].replacer,l=s[d].space}s=d}if(typeof a<"u"&&e!==void 0)try{m&&(a=m(typeof a=="string"?a:JSON.stringify(a,c,l))),e.setItem(t(s),typeof a=="string"?a:JSON.stringify(a,c,l))}catch(d){console.warn("Unable to save state to localStorage:",d)}else if(typeof a>"u"&&n&&e!==void 0)try{e.removeItem(t(s))}catch(d){console.warn(`Exception on removing/cleaning undefined '${s}' state`,d)}})},zu=(i,r,e)=>((e.type===Un||e.type===xu)&&r&&(i=(0,Gl.default)(i,r,{arrayMerge:(o,s,a)=>s})),i),ql=i=>r=>{(i.storage===void 0&&!i.checkStorageAvailability||i.checkStorageAvailability&&Uu())&&(i.storage=localStorage||window.localStorage),i.storageKeySerializer===void 0&&(i.storageKeySerializer=o=>o),i.restoreDates===void 0&&(i.restoreDates=!0);let e=i.mergeReducer;(e===void 0||typeof e!="function")&&(e=zu);let t=Yu(i.keys),n=i.rehydrate?Ku(t,i.storage,i.storageKeySerializer,i.restoreDates):void 0;return function(o,s){let a;return s.type===Un&&!o?a=r(o,s):a=C({},o),a=e(a,n,s),a=r(a,s),s.type!==Un&&Vu(a,t,i.storage,i.storageKeySerializer,i.removeOnUndefined,i.syncCondition),a}};var rr="PERFORM_ACTION",Hu="REFRESH",tp="RESET",rp="ROLLBACK",ip="COMMIT",np="SWEEP",op="TOGGLE_ACTION",Gu="SET_ACTIONS_ACTIVE",sp="JUMP_TO_STATE",ap="JUMP_TO_ACTION",eo="IMPORT_STATE",cp="LOCK_CHANGES",lp="PAUSE_RECORDING",$t=class{constructor(r,e){if(this.action=r,this.timestamp=e,this.type=rr,typeof r.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},Yn=class{constructor(){this.type=Hu}},Kn=class{constructor(r){this.timestamp=r,this.type=tp}},Vn=class{constructor(r){this.timestamp=r,this.type=rp}},zn=class{constructor(r){this.timestamp=r,this.type=ip}},Hn=class{constructor(){this.type=np}},Gn=class{constructor(r){this.id=r,this.type=op}};var Wn=class{constructor(r){this.index=r,this.type=sp}},qn=class{constructor(r){this.actionId=r,this.type=ap}},Qn=class{constructor(r){this.nextLiftedState=r,this.type=eo}},Xn=class{constructor(r){this.status=r,this.type=cp}},Zn=class{constructor(r){this.status=r,this.type=lp}};var wi=new ht("@ngrx/store-devtools Options"),Ql=new ht("@ngrx/store-devtools Initial Config");function pp(){return null}var Wu="NgRx Store DevTools";function qu(i){let r={maxAge:!1,monitor:pp,actionSanitizer:void 0,stateSanitizer:void 0,name:Wu,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},e=typeof i=="function"?i():i,t=e.logOnly?{pause:!0,export:!0,test:!0}:!1,n=e.features||t||r.features;n.import===!0&&(n.import="custom");let o=Object.assign({},r,{features:n},e);if(o.maxAge&&o.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${o.maxAge}`);return o}function Xl(i,r){return i.filter(e=>r.indexOf(e)<0)}function dp(i){let{computedStates:r,currentStateIndex:e}=i;if(e>=r.length){let{state:n}=r[r.length-1];return n}let{state:t}=r[e];return t}function tr(i){return new $t(i,+Date.now())}function Qu(i,r){return Object.keys(r).reduce((e,t)=>{let n=Number(t);return e[n]=mp(i,r[n],n),e},{})}function mp(i,r,e){return F(C({},r),{action:i(r.action,e)})}function Xu(i,r){return r.map((e,t)=>({state:up(i,e.state,t),error:e.error}))}function up(i,r,e){return i(r,e)}function hp(i){return i.predicate||i.actionsSafelist||i.actionsBlocklist}function Zu(i,r,e,t){let n=[],o={},s=[];return i.stagedActionIds.forEach((a,c)=>{let l=i.actionsById[a];l&&(c&&to(i.computedStates[c],l,r,e,t)||(o[a]=l,n.push(a),s.push(i.computedStates[c])))}),F(C({},i),{stagedActionIds:n,actionsById:o,computedStates:s})}function to(i,r,e,t,n){let o=e&&!e(i,r.action),s=t&&!r.action.type.match(t.map(c=>Zl(c)).join("|")),a=n&&r.action.type.match(n.map(c=>Zl(c)).join("|"));return o||s||a}function Zl(i){return i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function fp(i){return{ngZone:i?b(Tt):null,connectInZone:i}}var Oi=(()=>{let r=class r extends kr{};r.\u0275fac=(()=>{let t;return function(o){return(t||(t=Io(r)))(o||r)}})(),r.\u0275prov=E({token:r,factory:r.\u0275fac});let i=r;return i})(),Ai={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},Jn=new ht("@ngrx/store-devtools Redux Devtools Extension"),gp=(()=>{let r=class r{constructor(t,n,o){this.config=n,this.dispatcher=o,this.zoneConfig=fp(this.config.connectInZone),this.devtoolsExtension=t,this.createActionStreams()}notify(t,n){if(this.devtoolsExtension)if(t.type===rr){if(n.isLocked||n.isPaused)return;let o=dp(n);if(hp(this.config)&&to(o,t,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let s=this.config.stateSanitizer?up(this.config.stateSanitizer,o,n.currentStateIndex):o,a=this.config.actionSanitizer?mp(this.config.actionSanitizer,t,n.nextActionId):t;this.sendToReduxDevtools(()=>this.extensionConnection.send(a,s))}else{let o=F(C({},n),{stagedActionIds:n.stagedActionIds,actionsById:this.config.actionSanitizer?Qu(this.config.actionSanitizer,n.actionsById):n.actionsById,computedStates:this.config.stateSanitizer?Xu(this.config.stateSanitizer,n.computedStates):n.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,o,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new Ui(t=>{let n=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=n,n.init(),n.subscribe(o=>t.next(o)),n.unsubscribe}):dr}createActionStreams(){let t=this.createChangesObservable().pipe(bo()),n=t.pipe($(m=>m.type===Ai.START)),o=t.pipe($(m=>m.type===Ai.STOP)),s=t.pipe($(m=>m.type===Ai.DISPATCH),w(m=>this.unwrapAction(m.payload)),fr(m=>m.type===eo?this.dispatcher.pipe($(d=>d.type===Qi),go(1e3),gr(1e3),w(()=>m),ne(()=>z(m)),ae(1)):z(m))),c=t.pipe($(m=>m.type===Ai.ACTION),w(m=>this.unwrapAction(m.payload))).pipe(D(o)),l=s.pipe(D(o));this.start$=n.pipe(D(o)),this.actions$=this.start$.pipe(k(()=>c)),this.liftedActions$=this.start$.pipe(k(()=>l))}unwrapAction(t){return typeof t=="string"?(0,eval)(`(${t})`):t}getExtensionConfig(t){let n={name:t.name,features:t.features,serialize:t.serialize,autoPause:t.autoPause??!1,trace:t.trace??!1,traceLimit:t.traceLimit??75};return t.maxAge!==!1&&(n.maxAge=t.maxAge),n}sendToReduxDevtools(t){try{t()}catch(n){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",n)}}};r.\u0275fac=function(n){return new(n||r)(y(Jn),y(wi),y(Oi))},r.\u0275prov=E({token:r,factory:r.\u0275fac});let i=r;return i})(),Ii={type:qi},Ju="@ngrx/store-devtools/recompute",eh={type:Ju};function yp(i,r,e,t,n){if(t)return{state:e,error:"Interrupted by an error up the chain"};let o=e,s;try{o=i(e,r)}catch(a){s=a.toString(),n.handleError(a)}return{state:o,error:s}}function Ci(i,r,e,t,n,o,s,a,c){if(r>=i.length&&i.length===o.length)return i;let l=i.slice(0,r),m=o.length-(c?1:0);for(let d=r;d<m;d++){let S=o[d],v=n[S].action,h=l[d-1],_=h?h.state:t,L=h?h.error:void 0,W=s.indexOf(S)>-1?h:yp(e,v,_,L,a);l.push(W)}return c&&l.push(i[i.length-1]),l}function th(i,r){return{monitorState:r(void 0,{}),nextActionId:1,actionsById:{0:tr(Ii)},stagedActionIds:[0],skippedActionIds:[],committedState:i,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function rh(i,r,e,t,n={}){return o=>(s,a)=>{let{monitorState:c,actionsById:l,nextActionId:m,stagedActionIds:d,skippedActionIds:S,committedState:v,currentStateIndex:h,computedStates:_,isLocked:L,isPaused:x}=s||r;s||(l=Object.create(l));function W(X){let N=X,te=d.slice(1,N+1);for(let Z=0;Z<te.length;Z++)if(_[Z+1].error){N=Z,te=d.slice(1,N+1);break}else delete l[te[Z]];S=S.filter(Z=>te.indexOf(Z)===-1),d=[0,...d.slice(N+1)],v=_[N].state,_=_.slice(N),h=h>N?h-N:0}function se(){l={0:tr(Ii)},m=1,d=[0],S=[],v=_[h].state,h=0,_=[]}let M=0;switch(a.type){case cp:{L=a.status,M=1/0;break}case lp:{x=a.status,x?(d=[...d,m],l[m]=new $t({type:"@ngrx/devtools/pause"},+Date.now()),m++,M=d.length-1,_=_.concat(_[_.length-1]),h===d.length-2&&h++,M=1/0):se();break}case tp:{l={0:tr(Ii)},m=1,d=[0],S=[],v=i,h=0,_=[];break}case ip:{se();break}case rp:{l={0:tr(Ii)},m=1,d=[0],S=[],h=0,_=[];break}case op:{let{id:X}=a;S.indexOf(X)===-1?S=[X,...S]:S=S.filter(te=>te!==X),M=d.indexOf(X);break}case Gu:{let{start:X,end:N,active:te}=a,Z=[];for(let xe=X;xe<N;xe++)Z.push(xe);te?S=Xl(S,Z):S=[...S,...Z],M=d.indexOf(X);break}case sp:{h=a.index,M=1/0;break}case ap:{let X=d.indexOf(a.actionId);X!==-1&&(h=X),M=1/0;break}case np:{d=Xl(d,S),S=[],h=Math.min(h,d.length-1);break}case rr:{if(L)return s||r;if(x||s&&to(s.computedStates[h],a,n.predicate,n.actionsSafelist,n.actionsBlocklist)){let N=_[_.length-1];_=[..._.slice(0,-1),yp(o,a.action,N.state,N.error,e)],M=1/0;break}n.maxAge&&d.length===n.maxAge&&W(1),h===d.length-1&&h++;let X=m++;l[X]=a,d=[...d,X],M=d.length-1;break}case eo:{({monitorState:c,actionsById:l,nextActionId:m,stagedActionIds:d,skippedActionIds:S,committedState:v,currentStateIndex:h,computedStates:_,isLocked:L,isPaused:x}=a.nextLiftedState);break}case qi:{M=0,n.maxAge&&d.length>n.maxAge&&(_=Ci(_,M,o,v,l,d,S,e,x),W(d.length-n.maxAge),M=1/0);break}case Qi:{if(_.filter(N=>N.error).length>0)M=0,n.maxAge&&d.length>n.maxAge&&(_=Ci(_,M,o,v,l,d,S,e,x),W(d.length-n.maxAge),M=1/0);else{if(!x&&!L){h===d.length-1&&h++;let N=m++;l[N]=new $t(a,+Date.now()),d=[...d,N],M=d.length-1,_=Ci(_,M,o,v,l,d,S,e,x)}_=_.map(N=>F(C({},N),{state:o(N.state,eh)})),h=d.length-1,n.maxAge&&d.length>n.maxAge&&W(d.length-n.maxAge),M=1/0}break}default:{M=1/0;break}}return _=Ci(_,M,o,v,l,d,S,e,x),c=t(c,a),{monitorState:c,actionsById:l,nextActionId:m,stagedActionIds:d,skippedActionIds:S,committedState:v,currentStateIndex:h,computedStates:_,isLocked:L,isPaused:x}}}var Jl=(()=>{let r=class r{constructor(t,n,o,s,a,c,l,m){let d=th(l,m.monitor),S=rh(l,d,c,m.monitor,m),v=ut(ut(n.asObservable().pipe(To(1)),s.actions$).pipe(w(tr)),t,s.liftedActions$).pipe(fo(ho)),h=o.pipe(w(S)),_=fp(m.connectInZone),L=new De(1);this.liftedStateSubscription=v.pipe(me(h),ep(_),yr(({state:se},[M,X])=>{let N=X(se,M);return M.type!==rr&&hp(m)&&(N=Zu(N,m.predicate,m.actionsSafelist,m.actionsBlocklist)),s.notify(M,N),{state:N,action:M}},{state:d,action:null})).subscribe(({state:se,action:M})=>{if(L.next(se),M.type===rr){let X=M.action;a.next(X)}}),this.extensionStartSubscription=s.start$.pipe(ep(_)).subscribe(()=>{this.refresh()});let x=L.asObservable(),W=x.pipe(w(dp));Object.defineProperty(W,"state",{value:ss(W,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=t,this.liftedState=x,this.state=W}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(t){this.dispatcher.next(t)}next(t){this.dispatcher.next(t)}error(t){}complete(){}performAction(t){this.dispatch(new $t(t,+Date.now()))}refresh(){this.dispatch(new Yn)}reset(){this.dispatch(new Kn(+Date.now()))}rollback(){this.dispatch(new Vn(+Date.now()))}commit(){this.dispatch(new zn(+Date.now()))}sweep(){this.dispatch(new Hn)}toggleAction(t){this.dispatch(new Gn(t))}jumpToAction(t){this.dispatch(new qn(t))}jumpToState(t){this.dispatch(new Wn(t))}importState(t){this.dispatch(new Qn(t))}lockChanges(t){this.dispatch(new Xn(t))}pauseRecording(t){this.dispatch(new Zn(t))}};r.\u0275fac=function(n){return new(n||r)(y(Oi),y(kr),y(cs),y(gp),y(ps),y(Sr),y(as),y(wi))},r.\u0275prov=E({token:r,factory:r.\u0275fac});let i=r;return i})();function ep({ngZone:i,connectInZone:r}){return e=>r?new Ui(t=>e.subscribe({next:n=>i.run(()=>t.next(n)),error:n=>i.run(()=>t.error(n)),complete:()=>i.run(()=>t.complete())})):e}var ih=new ht("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function nh(i,r){return!!i||r.monitor!==pp}function oh(){let i="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[i]<"u"?window[i]:null}function sh(i={}){return Co([gp,Oi,Jl,{provide:Ql,useValue:i},{provide:ih,deps:[Jn,wi],useFactory:nh},{provide:Jn,useFactory:oh},{provide:wi,deps:[Ql],useFactory:qu},{provide:ds,deps:[Jl],useFactory:ah},{provide:ls,useExisting:Oi}])}function ah(i){return i.state}var _p=(()=>{let r=class r{static instrument(t={}){return{ngModule:r,providers:[sh(t)]}}};r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=be({type:r}),r.\u0275inj=Ee({});let i=r;return i})();var Sp=(()=>{class i{logoUrl;dataLocator;size="small";static \u0275fac=function(t){return new(t||i)};static \u0275cmp=ve({type:i,selectors:[["ui-kit-logo"]],hostVars:2,hostBindings:function(t,n){t&2&&Do(n.size)},inputs:{logoUrl:"logoUrl",dataLocator:"dataLocator",size:"size"},standalone:!0,features:[Or],decls:1,vars:2,consts:[["alt","logo",1,"logo",3,"src"]],template:function(t,n){t&1&&pe(0,"img",0),t&2&&(q("src",n.logoUrl,Fo),Ge("data-locator",n.dataLocator))},styles:['@charset "UTF-8";[_nghost-%COMP%]{display:block}.small[_nghost-%COMP%]{width:40px;min-width:40px;height:auto}.normal[_nghost-%COMP%]{width:56px;min-width:56px;height:auto}.medium[_nghost-%COMP%]{width:var(--yclients-ui-kit-logo-size-medium);min-width:var(--yclients-ui-kit-logo-size-medium);height:auto}.big[_nghost-%COMP%]{width:104px;min-width:104px;height:auto}.logo[_ngcontent-%COMP%]{border-radius:var(--yclients-ui-kit-logo-border-radius);width:100%;height:auto}'],changeDetection:0})}return i})();var dh=["*"];function mh(i,r){i&1&&Tr(0,0,["*ngIf","!disabled"])}function uh(i,r){if(i&1&&pe(0,"ui-kit-logo",6),i&2){let e=de(2);q("logoUrl",e.company==null?null:e.company.logo)}}function hh(i,r){if(i&1&&(J(0,"h1"),At(1),le()),i&2){let e=de(2);V(),wr(e.company.title)}}function fh(i,r){if(i&1&&(J(0,"div",2)(1,"div",3),Ne(2,uh,1,1,"ui-kit-logo",4)(3,hh,2,1,"h1",0),J(4,"app-not-allowed"),pe(5,"span",5),Oe(6,"translate"),Oe(7,"uiKitSafeHtml"),le()()()),i&2){let e=de();V(2),q("ngIf",e.company==null?null:e.company.logo),V(),q("ngIf",e.company==null?null:e.company.title),V(2),q("innerHTML",Pe(7,5,Pe(6,3,"online_record_disabled")),Mo)}}var vp=(()=>{class i{store;cdr;actions$;referrerService;disabled=!1;company;destroy$=new De(1);constructor(e,t,n,o){this.store=e,this.cdr=t,this.actions$=n,this.referrerService=o}ngOnInit(){this.store.select(g.currentCompany.getCurrentCompany).pipe($(e=>!!e),ae(1),D(this.destroy$)).subscribe(e=>{this.disabled=e.active!==1&&!this.referrerService.isFromCRM(),this.company=e,this.cdr.markForCheck()}),this.actions$.pipe(R(ua),D(this.destroy$)).subscribe(e=>{e?.companies?.length===0&&(this.disabled=!0,this.cdr.markForCheck())})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(t){return new(t||i)(oe(j),oe(Ct),oe(ee),oe(it))};static \u0275cmp=ve({type:i,selectors:[["app-disabled"]],ngContentSelectors:dh,decls:2,vars:2,consts:[[4,"ngIf"],["class","disabled",4,"ngIf"],[1,"disabled"],[1,"disabled-info"],["size","big",3,"logoUrl",4,"ngIf"],[3,"innerHTML"],["size","big",3,"logoUrl"]],template:function(t,n){t&1&&(br(),Ne(0,mh,1,0,"ng-content",0)(1,fh,8,7,"div",1)),t&2&&(q("ngIf",!n.disabled),V(),q("ngIf",n.disabled))},dependencies:[Je,Ya,Sp,Pt,Ka],styles:['@charset "UTF-8";.disabled[_ngcontent-%COMP%]{width:100%;height:100%}.disabled-info[_ngcontent-%COMP%]{position:relative;padding:24px 16px;margin:0 auto;top:50%;transform:translate3d(0,-50%,0);width:100%;display:flex;align-items:center;justify-content:center;flex-direction:column}h1[_ngcontent-%COMP%]{padding-top:16px;text-align:center;padding-bottom:48px}.disabled-icon[_ngcontent-%COMP%]{width:40px;height:40px}.disabled-text[_ngcontent-%COMP%]{text-align:center;padding-top:12px}'],changeDetection:0})}return i})();var bp=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=be({type:i});static \u0275inj=Ee({imports:[et,oi,Qr]})}return i})();var Pi=(()=>{class i{router;appNavigationService;constructor(e,t){this.router=e,this.appNavigationService=t}canActivate(){return re(this,null,function*(){let e=this.router.getCurrentNavigation().extras?.state;return this.router.navigateByUrl(yield this.appNavigationService.getInitUrlTree(),{replaceUrl:!e?.continueNavigation,state:{skipInitOrder:!!e?.skipInitOrder}}),!1})}static \u0275fac=function(t){return new(t||i)(y(Q),y(ge))};static \u0275prov=E({token:i,factory:i.\u0275fac})}return i})();var Tp=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=be({type:i});static \u0275inj=Ee({providers:[Pi]})}return i})();var Ap=(()=>{class i{actions$=b(ee);moveRecord=b(Rc);tracking=b(ot);router=b(Q);recordMovedSuccessfully$=U(()=>this.actions$.pipe(R(Kr),k(({recordId:e})=>this.moveRecord.onRecordMoved(e))),{dispatch:!1});logout$=U(()=>this.actions$.pipe(R(Ca),w(e=>(this.tracking.setUser(""),e.openLoginPage&&this.router.navigate([ec()],{queryParamsHandling:"preserve"}),new Ia))));static \u0275fac=function(t){return new(t||i)};static \u0275prov=E({token:i,factory:i.\u0275fac})}return i})();var Cp=(()=>{class i{actions$=b(ee);store=b(j);metrika=b(ei);trackingService=b(ot);trackingServiceDeselected$=U(()=>{let e=this.store.select(g.order.getSelectedServiceIds),t=this.store.select(g.currentCompany.getCurrentCompanyId),n=he([e,t]).pipe(Ie(),Se(([o,s])=>{this.metrika.reachGoal("cancel_service_selection",{services:o,companyId:s})}));return this.actions$.pipe(R(js),jt(n))},{dispatch:!1});trackingServiceSelected$=U(()=>this.actions$.pipe(R(Us),k(e=>he([this.store.select(g.currentCompany.getCurrentCompany),this.store.select(g.services.getServiceById(e.serviceId))]).pipe(ae(1),Se(([t,n])=>{this.metrika.reachGoal("service_selected",{serviceId:n.id,service:n.title,isEvent:!1,companyId:t.id,companyName:t.title})})))),{dispatch:!1});deleteRecordAction$=U(()=>this.actions$.pipe(R(Vr),Se(e=>{this.metrika.reachGoal("appointment_deleted",{recordId:e.record.id,master:e.record.staff.name,masterId:e.record.staff.id,services:e.record.services.map(t=>t.title),servicesId:e.record.services.map(t=>t.id),companyName:e.record.company.title})})),{dispatch:!1});recordMovedSuccessfullyAction$=U(()=>this.actions$.pipe(R(Kr),Se(e=>{this.metrika.reachGoal("appointment_changed",{recordId:e.recordId,companyId:e.company.id,companyName:e.company.title})})),{dispatch:!1});toggleServiceEvent$=U(()=>this.actions$.pipe(R(Dc),fr(e=>this.enrichServiceContext(e)),Se(e=>{let t=e.isSelectAction?nn.Action.select:nn.Action.unselect,n=C({type:t,name:`${t}_service`},e.context);this.trackingService.track(n)})),{dispatch:!1});reachTimeSelectedGoalOnDemand$=U(()=>{let e=this.actions$.pipe(R(Nc)),t=this.actions$.pipe(R(Lc)),n=this.reachTimeSelectedGoal().pipe(D(t));return e.pipe(jt(n))},{dispatch:!1});enrichServiceContext(e,t=!1){let n=this.store.select(g.services.getServiceById(e.serviceId)),o=this.getCategoryFrom(n),s=this.getCategoryNumberFrom(n),a=this.getServiceNumberFrom(e.serviceId);return he([n,o,s,a]).pipe(ae(1),w(([c,l,m,d])=>{let S={part_type:"service_category",part_id:c.category_id,part_name:l.title,part_number:t?void 0:m,element_type:c.composite_details?.type==="parallel"?"service_complex":"service",element_id:c.id,element_name:c.title,element_active:c.isBookable?1:0,element_number:t?void 0:d,prepay_status:c.prepaid};return F(C({},e),{context:S})}))}getServiceNumberFrom(e){return this.store.select(g.services.getServiceNumberById(e))}getCategoryNumberFrom(e){return e.pipe(k(t=>this.store.select(g.services.getCategoryNumberById(t.category_id))))}getCategoryFrom(e){return e.pipe(k(t=>this.store.select(g.services.getCategoryById(t.category_id))))}reachTimeSelectedGoal(){return he([this.store.select(g.currentCompany.getCurrentCompany),this.store.select(g.order.getSelectedDateTime)]).pipe(Se(([e,t])=>{t&&e&&this.metrika.reachGoal("time_selected",{date:t.datetime,companyId:e.id,companyName:e.title})}),Eo())}static \u0275fac=function(t){return new(t||i)};static \u0275prov=E({token:i,factory:i.\u0275fac})}return i})();var Ip=[{url:new RegExp("/privacy_policy/d*")},{url:new RegExp("/user/auth")},{url:new RegExp("/book_record/"),pagesForIgnore:[new RegExp(`/${Zr.successOrder}/.*`)]},{url:new RegExp("/locations/[0-9]*/search/service")},{url:new RegExp("/locations/[0-9]*/search/staff")}];var wp=aa("SplashScreen",{web:()=>import("./web-Q3Z4YML5.js").then(i=>new i.SplashScreenWeb)});function yh(i){return typeof i=="object"&&i!==null&&(i instanceof Ho||i instanceof Go)&&!!i.snapshot?.component}var Mi=(()=>{class i{router;lastActivatedRouteSnapshot=new pr(null);constructor(e){this.router=e}subscribeToRouter(e){return this.router.events.pipe($(yh),D(e)).subscribe(t=>{this.persistActualRouteSnapshot(t.snapshot)})}persistActualRouteSnapshot(e){this.lastActivatedRouteSnapshot.next(e)}getCurrentRouteName(){return this.lastActivatedRouteSnapshot.getValue()?.data?.routeName??""}static \u0275fac=function(t){return new(t||i)(y(Q))};static \u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var ro="FadeOut",Op=Jo("routeAnimations",[is(`* <=> ${ro}`,[Gi(":leave",ns(),{optional:!0}),ts([Gi(":leave",[es("0.2s ease-in",Vt({opacity:0}))],{optional:!0})])])]);var Eh=["content"],vh=["*"];function bh(i,r){if(i&1){let e=Ue();J(0,"button",5),fe("click",function(){Te(e);let n=de();return Ae(n.expand())}),pe(1,"ui-kit-svg-icon",6),le()}i&2&&(V(),q("setSvgSize",!1))}var Pp=(()=>{class i{hostRef;destroyRef;contentRef;isExpanded=!1;isContentOverflowed=new pr(!1);constructor(e,t){this.hostRef=e,this.destroyRef=t}ngAfterViewInit(){this.recheckOverflow(),hr(window,"resize").pipe(gr(50),os(this.destroyRef)).subscribe(()=>{this.recheckOverflow()})}ngAfterContentChecked(){this.recheckOverflow()}recheckOverflow(){let e=this.hostRef?.nativeElement?.offsetWidth,t=this.contentRef?.nativeElement?.offsetWidth;this.isContentOverflowed.next(t>e)}expand(){this.isExpanded=!0}static \u0275fac=function(t){return new(t||i)(oe(Po),oe(Oo))};static \u0275cmp=ve({type:i,selectors:[["ui-kit-modal-default-header"]],viewQuery:function(t,n){if(t&1&&Ar(Eh,5),t&2){let o;Cr(o=Ir())&&(n.contentRef=o.first)}},hostVars:2,hostBindings:function(t,n){t&2&&Xe("expanded",n.isExpanded)},ngContentSelectors:vh,decls:7,vars:4,consts:[["content",""],[1,"content-wrapper"],[1,"hack-container"],[1,"content"],["class","chevron",3,"click",4,"ngIf"],[1,"chevron",3,"click"],["name","arrow-down-light",1,"chevron-icon",3,"setSvgSize"]],template:function(t,n){t&1&&(br(),J(0,"span",1),pe(1,"div",2),J(2,"div",3,0),Tr(4),le()(),Ne(5,bh,2,1,"button",4),Oe(6,"async")),t&2&&(V(2),Ge("data-locator","popup_title"),V(3),q("ngIf",Pe(6,2,n.isContentOverflowed)&&!n.isExpanded))},dependencies:[Je,xr,Pr],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:flex;position:relative;max-height:48px;align-items:baseline;overflow:hidden}.expanded[_nghost-%COMP%]{overflow:visible;max-height:unset}.expanded[_nghost-%COMP%]   .hack-container[_ngcontent-%COMP%]{display:none}.expanded[_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .hack-container[_ngcontent-%COMP%]{display:inline-block;height:24px;float:right;width:50%}[_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{width:200%;flex-shrink:0}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{display:inline}[_nghost-%COMP%]   .chevron[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:0;position:absolute;right:0;bottom:0;width:40px;background:linear-gradient(270deg,var(--yclients-ui-kit-color-color_white) 47%,transparent 95%)}[_nghost-%COMP%]   .chevron-icon[_ngcontent-%COMP%]{font-size:16px;color:var(--yclients-ui-kit-color-color_grey_dark)}'],changeDetection:0})}return i})();var Ah=["contentContainer"];function Ch(i,r){if(i&1){let e=Ue();J(0,"div",8),fe("uiKitSwipe",function(n){Te(e);let o=de();return Ae(o.swipe(n))}),J(1,"ui-kit-header",9),fe("leadingClick",function(){Te(e);let n=de();return Ae(n.modalParams==null?null:n.modalParams.onCloseClick())}),le()()}if(i&2){let e=de();V(),q("leading","back")("leadingDataLocator","close_popup_btn")("title",e.modalParams.title)("titleDataLocator","popup_title")("transparent",e.modalParams.isGrayBackground)}}function Ih(i,r){if(i&1){let e=Ue();J(0,"div",10),fe("uiKitSwipe",function(n){Te(e);let o=de();return Ae(o.swipe(n))}),J(1,"div",11),fe("click",function(){Te(e);let n=de();return Ae(n.close(n.modalParams==null?null:n.modalParams.onCloseClick))}),pe(2,"ui-kit-svg-icon",12),le()()}if(i&2){let e,t=de();V(),Ge("data-locator",(e=t.modalParams==null?null:t.modalParams.closeButtonDataLocator)!==null&&e!==void 0?e:"close_popup_btn"),V(),q("name","cross-circle")("setSvgSize",!1)}}function wh(i,r){if(i&1&&(J(0,"ui-kit-modal-default-header",15),At(1),le()),i&2){let e=de(2);V(),Lo(" ",e.modalParams==null?null:e.modalParams.title," ")}}function Oh(i,r){if(i&1){let e=Ue();J(0,"div",13),fe("uiKitSwipe",function(n){Te(e);let o=de();return Ae(o.swipe(n))}),Ne(1,wh,2,1,"ui-kit-modal-default-header",14),J(2,"div",11),fe("click",function(){Te(e);let n=de();return Ae(n.close(n.modalParams==null?null:n.modalParams.onCloseClick))}),pe(3,"ui-kit-svg-icon",12),le()()}if(i&2){let e,t=de();V(),q("ngIf",(t.modalParams==null?null:t.modalParams.title)&&t.showedIsTrue),V(),Ge("data-locator",(e=t.modalParams==null?null:t.modalParams.closeButtonDataLocator)!==null&&e!==void 0?e:"close_popup_btn"),V(),q("name","cross-circle")("setSvgSize",!1)}}function Ph(i,r){if(i&1){let e=Ue();J(0,"div",16),fe("click",function(){Te(e);let n=de();return Ae(n.close(n.modalParams==null?null:n.modalParams.onCloseClick))}),pe(1,"ui-kit-svg-icon",12),le()}if(i&2){let e,t=de();Ge("data-locator",(e=t.modalParams==null?null:t.modalParams.closeButtonDataLocator)!==null&&e!==void 0?e:"close_popup_btn"),V(),q("name","cross-circle")("setSvgSize",!1)}}var Mp=(()=>{class i{bodyScrollLockService;modalService;cd;modalType=kt;modalParams=void 0;scrollTop=0;animationState="*";isShowed=!1;dirty=!1;fullyClosed=!0;_destroyed$=new uo;contentContainer;get isDirty(){return this.dirty}get showedIsTrue(){return this.isShowed}get isDisplayed(){return this.fullyClosed?"0":"100%"}onAnimateEnd(){!this.isShowed&&!this.fullyClosed&&(this.fullyClosed=!0)}processPop(){return re(this,null,function*(){this.modalService.closeModal()})}set showed(e){this.isShowed=e,this.animationState=e?ro:"*",e?(this.dirty=!0,this.fullyClosed=!1,this.scrollTop=0,this.bodyScrollLockService.lock()):this.bodyScrollLockService.unlock()}constructor(e,t,n){this.bodyScrollLockService=e,this.modalService=t,this.cd=n}ngOnInit(){this.modalService.onModalOpened().pipe(D(this._destroyed$)).subscribe(e=>{e?(this.modalParams=e,this.showed=!0):this.postClose(),this.cd.detectChanges()})}isVirtualPage(e){return e?.modalType===kt.virtualPage}isDefault(e){return e?.modalType===kt.default}isWithImage(e){return e?.modalType===kt.withImage}isWithTitle(e){return e?.modalType===kt.withTitle}ngAfterViewInit(){this.modalService.setModalContainer(this.contentContainer)}swipe(e){this.modalParams?.onManualClose?.(),e.eventType===Oc.swipeDown&&(e.domEvent.stopPropagation(),this.modalService.closeModal())}onChildScrollTopChange(e){this.scrollTop=e}handleOutsideClickClose(){this.modalParams?.onManualClose?.(),!this.modalParams?.ignoreOutsideClick&&(this.modalParams?.onOutsideClick?.(),this.modalService.closeModal())}close(e){this.modalParams?.onManualClose?.(),e&&e(),this.modalService.closeModal()}postClose(){this.scrollTop=0,this.showed=!1,this.bodyScrollLockService.unlock(),this.modalParams?.onModalClose&&this.modalParams.onModalClose()}ngOnDestroy(){this.bodyScrollLockService.unlock(),this._destroyed$.next()}static \u0275fac=function(t){return new(t||i)(oe($c),oe(Ur),oe(Ct))};static \u0275cmp=ve({type:i,selectors:[["ui-kit-modal"]],viewQuery:function(t,n){if(t&1&&Ar(Ah,7,Ro),t&2){let o;Cr(o=Ir())&&(n.contentContainer=o.first)}},hostVars:6,hostBindings:function(t,n){t&1&&fe("transitionend",function(){return n.onAnimateEnd()})("webkitTransitionEnd",function(){return n.onAnimateEnd()})("msTransitionEnd",function(){return n.onAnimateEnd()})("oTransitionEnd",function(){return n.onAnimateEnd()})("popstate",function(){return n.processPop()},!1,Er),t&2&&(ko("height",n.isDisplayed),Xe("dirty",n.isDirty)("showed",n.showedIsTrue))},decls:9,vars:14,consts:[["contentContainer",""],[1,"background",3,"click","uiKitSwipe"],[1,"modal"],["class","virtual-page-header",3,"uiKitSwipe",4,"ngIf"],["class","default-header",3,"uiKitSwipe",4,"ngIf"],["class","title-header",3,"uiKitSwipe",4,"ngIf"],["class","cross-icon absolute",3,"click",4,"ngIf"],["uiKitHandleChildScroll","",1,"content-container",3,"childScrollTop","uiKitSwipe","swipeLocked","swipePreventDefault"],[1,"virtual-page-header",3,"uiKitSwipe"],[3,"leadingClick","leading","leadingDataLocator","title","titleDataLocator","transparent"],[1,"default-header",3,"uiKitSwipe"],[1,"cross-icon",3,"click"],[3,"name","setSvgSize"],[1,"title-header",3,"uiKitSwipe"],["class","title",4,"ngIf"],[1,"title"],[1,"cross-icon","absolute",3,"click"]],template:function(t,n){if(t&1){let o=Ue();J(0,"div",1),fe("click",function(){return Te(o),Ae(n.handleOutsideClickClose())})("uiKitSwipe",function(a){return Te(o),Ae(n.swipe(a))}),le(),J(1,"div",2),Ne(2,Ch,2,5,"div",3)(3,Ih,3,3,"div",4)(4,Oh,4,4,"div",5)(5,Ph,2,3,"div",6),J(6,"div",7),fe("childScrollTop",function(a){return Te(o),Ae(n.onChildScrollTopChange(a))})("uiKitSwipe",function(a){return Te(o),Ae(n.swipe(a))}),No(7,null,0),le()()}if(t&2){let o;Xe("darken",!n.isVirtualPage(n.modalParams)),V(),Xe("full-height",n.isVirtualPage(n.modalParams))("gray-background",(n.isDefault(n.modalParams)||n.isVirtualPage(n.modalParams))&&n.modalParams.isGrayBackground),Ge("data-locator",(o=n.modalParams==null?null:n.modalParams.dataLocator)!==null&&o!==void 0?o:"expanded_modal_popup"),V(),q("ngIf",n.isVirtualPage(n.modalParams)&&(n.modalParams==null?null:n.modalParams.title)),V(),q("ngIf",n.isDefault(n.modalParams)),V(),q("ngIf",n.isWithTitle(n.modalParams)),V(),q("ngIf",n.isWithImage(n.modalParams)),V(),q("@routeAnimations",n.animationState)("swipeLocked",n.scrollTop>0)("swipePreventDefault",n.scrollTop<0)}},dependencies:[Je,Mc,ia,xr,Pc,Pp],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:block;position:fixed;inset:0;width:100%;z-index:11000;overflow:hidden}.background[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;z-index:10500;opacity:0;will-change:auto;top:0;transition:opacity .2s ease-in}.background.darken[_ngcontent-%COMP%]{background-color:#000000a6}.dirty[_nghost-%COMP%]   .background[_ngcontent-%COMP%]{opacity:0}.showed[_nghost-%COMP%]   .background[_ngcontent-%COMP%]{opacity:1}.modal[_ngcontent-%COMP%]{will-change:auto;display:flex;flex-direction:column;position:absolute;bottom:0;z-index:11000;background-color:var(--yclients-ui-kit-color-color_white);width:100%;transform:translate3d(0,100%,0);border-top-right-radius:16px;border-top-left-radius:16px;transition:transform .2s ease-in;max-height:90%;overflow:hidden}.dirty[_nghost-%COMP%]   .modal[_ngcontent-%COMP%]{transform:translate3d(0,100%,0)}.showed[_nghost-%COMP%]   .modal[_ngcontent-%COMP%]{transform:translateZ(0)}.modal.gray-background[_ngcontent-%COMP%]{background-color:#f6f6f6}.modal[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{flex:1 1 auto;overflow:auto}.modal.full-height[_ngcontent-%COMP%]{max-height:100vh;height:100%;display:flex;flex-direction:column;border-radius:0}.modal.full-height[_ngcontent-%COMP%]   ui-kit-header[_ngcontent-%COMP%]{padding-top:var(--safe-area-top)}.virtual-page-header[_ngcontent-%COMP%]{position:relative}.virtual-page-header[_ngcontent-%COMP%]   ui-kit-header[_ngcontent-%COMP%]{position:static;padding-top:0}.default-header[_ngcontent-%COMP%]{display:block;min-height:56px;width:100%}.title-header[_ngcontent-%COMP%]{min-height:56px;width:100%;display:flex;align-items:center;padding:16px 64px 16px 16px;box-sizing:border-box}.title-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-style:normal;font-weight:700;font-size:20px;line-height:24px}.cross-icon[_ngcontent-%COMP%]{cursor:pointer;position:absolute;top:12px;right:12px;width:32px!important;height:32px!important;display:flex;justify-content:center;align-items:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.cross-icon[_ngcontent-%COMP%]   ui-kit-svg-icon[_ngcontent-%COMP%]{display:block;background-color:var(--yclients-ui-kit-color-color_grey_03);color:var(--yclients-ui-kit-color-color_text_black);border-radius:50%}@media (min-width: 500px){[_nghost-%COMP%]   .swipe-area[_ngcontent-%COMP%]{display:none}.modal[_ngcontent-%COMP%]{max-width:392px;left:50%;top:50%;bottom:auto;border-radius:16px;transform:translate3d(-50%,-50%,0);opacity:1;transition:opacity .2s ease-in}.dirty[_nghost-%COMP%]   .modal[_ngcontent-%COMP%]{opacity:0;transform:translate3d(-50%,-50%,0)}.showed[_nghost-%COMP%]   .modal[_ngcontent-%COMP%]{opacity:1;transform:translate3d(-50%,-50%,0)}.modal.full-height[_ngcontent-%COMP%]{max-width:600px}}'],data:{animation:[Op]},changeDetection:0})}return i})();var Fp=(()=>{class i{document;timer;constructor(e){this.document=e}ngOnInit(){wt().phone&&this.document.body.classList.add("mobile"),this.timer=window.setInterval(this.checkOrientation,ba)}ngOnDestroy(){clearInterval(this.timer)}checkOrientation(){if(wt().phone&&window.screen.orientation&&window.screen.orientation.angle!==0){this.document.body.classList.add("landscape");try{document.activeElement.blur()}catch(e){console.error(e)}}else if(wt().phone&&window.orientation&&window.orientation!==0){this.document.body.classList.add("landscape");try{document.activeElement.blur()}catch(e){console.error(e)}}else this.document.body.classList.remove("landscape")}static \u0275fac=function(t){return new(t||i)(oe(Ze))};static \u0275cmp=ve({type:i,selectors:[["app-lock-landscape"]],hostBindings:function(t,n){t&1&&fe("orientationchange",function(){return n.checkOrientation()},!1,Er)},decls:6,vars:3,consts:[[1,"background"],[1,"container"],["src","/assets/icon/inverted-phone.svg","alt","","loading","lazy"]],template:function(t,n){t&1&&(pe(0,"div",0),J(1,"div",1),pe(2,"img",2),J(3,"p"),At(4),Oe(5,"translate"),le()()),t&2&&(V(4),wr(Pe(5,1,"landscape")))},dependencies:[Pt],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:none}body.mobile.landscape   [_nghost-%COMP%]{display:block}body.mobile.landscape   [_nghost-%COMP%]   .background[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000040;z-index:20000}body.mobile.landscape   [_nghost-%COMP%]   .container[_ngcontent-%COMP%]{position:fixed;background:#fff;top:calc(50% - 75px);left:0;width:70%;min-height:150px;margin:0 15%;padding:24px;box-sizing:border-box;border-radius:10px;z-index:90000}body.mobile.landscape   [_nghost-%COMP%]   .container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0 auto;display:block;width:40px;height:40px}body.mobile.landscape   [_nghost-%COMP%]   .container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;text-align:center;font-size:17px;line-height:20px}'],changeDetection:0})}return i})();var Rp=(()=>{class i{store;ngxFavicon;title;destroy$=new De(1);constructor(e,t,n){this.store=e,this.ngxFavicon=t,this.title=n}ngOnInit(){this.store.select(g.currentCompany.getCurrentCompany).pipe($(e=>!!(e instanceof Object&&typeof e.logo=="string"&&e.logo.length)),D(this.destroy$)).subscribe(e=>{this.ngxFavicon.setFavicon(e.logo,""),this.title.setTitle(e.title)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(t){return new(t||i)(oe(j),oe(Bc),oe(Vo))};static \u0275cmp=ve({type:i,selectors:[["app-company-favicon"]],decls:0,vars:0,template:function(t,n){},encapsulation:2,changeDetection:0})}return i})();function Dh(i,r){if(i&1){let e=Ue();J(0,"router-outlet",4),fe("activate",function(){Te(e);let n=de();return Ae(n.scrollTop())}),le()}}function Nh(i,r){i&1&&pe(0,"ui-kit-global-loader")}function Lh(i,r){i&1&&pe(0,"app-lock-landscape")}var xh=200,kp=(()=>{class i{store=b(j);globalLoaderService=b(sa);navigation=b(Ke);router=b(Q);captchaService=b(si);localizationService=b(qr);paymentService=b(ti);metrikaService=b(ei);appNavigationService=b(ge);actions=b(ee);changeDetectorRef=b(Ct);ngZone=b(Tt);currentRouteName=b(Mi);metaService=b(xc);orderDefaultsService=b(ii);bridgeService=b(st);trackingService=b(ot);capacitorService=b(Jr);showGlobalLoader$=he([this.store.select(g.loader.getLoadingActions),this.store.select(g.loader.getLoadingStatus),this.globalLoaderService.isLoading$,this.navigation.currentStep$(),this.router.events.pipe($(e=>e instanceof Yt),w(()=>!0),Ie(),Ao(!1))]).pipe(w(([e,t,n,o,s])=>s?this.captchaService.captchaV2FrameSrc||[T.service,T.master,T.datetime].includes(o)||e.every(a=>[va,Ea].includes(a))||e.every(a=>[ya,_a].includes(a))||o===T.menu&&this.navigation.menuMode?!1:t||n:!0),_r({refCount:!0,bufferSize:1}));lockScroll$;unlockLandscape$;bookform$;selectedLanguage$;localisationLoaded=!1;openedViaYplaces=!!localStorage.getItem("yplaces_user_data");destroy$=new De(1);coldLoadingBenchmarkGuard$=this.router.events.pipe($(e=>e instanceof Yt),yr(e=>e+1,0),$(e=>e>1),Se(()=>{$e.end("booking_cold_start")}),ae(1),D(this.destroy$));constructor(){$e.init(),$e.start("booking_magic"),this.navigation.currentStepSubscription().pipe(D(this.destroy$)).subscribe()}ngOnInit(){this.configureTracking(),this.appNavigationService.startSaveHistory(),this.handleBridgeEvents(),this.orderDefaultsService.clearDefaultsFlag(),this.store.dispatch(new wa),this.metaService.setSafariTabColor(),this.paymentService.init().pipe(D(this.destroy$)).subscribe(),this.trackingService.addLabel({page:{current:{version:"new_widget"}}}),this.currentRouteName.subscribeToRouter(this.destroy$),this.lockScroll$=this.store.select(g.loader.getLockScroll),this.bookform$=this.store.select(g.bookform.getBookform).pipe($(o=>!!o),ae(1)),this.selectedLanguage$=this.localizationService.getLanguage(),this.addBookformLabel(),this.addCompanyLabel(),this.startUnlockLandscapeTracking(),this.bookform$.subscribe(o=>{this.initMetrikaService(o),this.hideSplashScreen()},()=>{this.hideSplashScreen()}),this.showGlobalLoader$.pipe(k(o=>o?z(null):Yi(200).pipe(Se(()=>{this.bridgeService.post(new on(sn.widget_loaded,null))}))),$(o=>o!==null),ae(1)).subscribe(),this.coldLoadingBenchmarkGuard$.subscribe(),this.store.dispatch(Wr()),window&&(this.ngZone.runOutsideAngular(()=>{hr(window,"scroll").pipe(So(()=>Yi(xh)),D(this.destroy$)).subscribe(()=>{let o=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Lr({event:"scroll",scrollTop:o})})}),this.trackRouteChangeEvents(),this.initUserTokenForTracks().subscribe(),this.initUtmForClientAppTracks().subscribe());let e=this.router.events.pipe($(o=>o instanceof zi),w(({url:o})=>o),Ie()),t=this.trackingService.onPageView$.pipe(Ji(),ae(1)),n=this.trackingService.labelSettled$.pipe(Ji(),ae(1));he([e,t,n]).subscribe(([o])=>{let a=o.startsWith("/e/")?"review_widget_open":"widget_open";this.trackingService.track({name:a,type:a})}),e.subscribe(o=>{this.validateOldWidgetLinks(o)}),this.clearCachedUserDataIfLoggedOut()}ngOnDestroy(){$e.dispose(),this.destroy$.next(),this.destroy$.complete(),this.bridgeService.destroy(),this.appNavigationService.stopSaveHistory()}ngAfterContentChecked(){this.changeDetectorRef.detectChanges()}scrollTop(){document.body.style.overflow="hidden",document.body.scrollTo({top:0,left:0}),window.scrollTo(0,0),document.body.style.overflow="scroll"}initMetrikaService(e){this.trackingService.getAb().then(t=>{this.metrikaService.init(e,H.metrika,{enabled:H.production,group:Number(t.strong)},H.production),this.metrikaService.reachGoal("widget_loaded")})}initUserTokenForTracks(){return this.store.select(g.user.getUserToken).pipe($(e=>!!e),Se(e=>{this.trackingService.setUser(e)}),D(this.destroy$))}initUtmForClientAppTracks(){return this.store.select(g.applications.getApplications).pipe($(()=>this.capacitorService.isNativePlatform()),w(e=>e.filter(t=>!["yplaces","client_app"].includes(t.slug))),$(e=>e.length>0),Se(([e])=>{this.trackingService.setUtm({source:`clientapp_${e.id}`,content:"",term:"",medium:""})}),D(this.destroy$))}addBookformLabel(){let e=this.store.select(g.bookform.getBookformId).pipe($(t=>Number.isInteger(t)),ae(1));he(this.bookform$,e).pipe(ae(1),D(this.destroy$)).subscribe(([t,n])=>{this.trackingService.addLabel({bookform:{widget_id:n,language:t.lang,type:t.group_id===0?"salon":"group",group_id:t.group_id}})})}addCompanyLabel(){this.store.select(g.currentCompany.getCurrentCompany).pipe($(e=>!!e),ae(1),D(this.destroy$)).subscribe(e=>{this.trackingService.addLabel({company:{id:e.id,latitude:e.coordinate_lat,longitude:e.coordinate_lon,address:e.address}})})}startUnlockLandscapeTracking(){this.unlockLandscape$=this.router.events.pipe($(e=>e instanceof zi),w(e=>!e.url.startsWith(`/${f.tips}/`)))}hideSplashScreen(){this.capacitorService.isNativePlatform()&&wp.hide()}validateOldWidgetLinks(e){return re(this,null,function*(){new RegExp(":[0-9].*").test(e)&&(e=e.split(":").join("/"),yield this.router.navigateByUrl(e))})}trackRouteChangeEvents(){this.appNavigationService.navigationEnd$.subscribe(()=>this.metrikaService.trackFBViewContent())}clearCachedUserDataIfLoggedOut(){he([this.store.select(g.user.isLoggedIn),this.store.select(g.user.getUser)]).pipe(Ie(),D(this.destroy$)).subscribe(([e,t])=>{!e&&t&&this.store.dispatch(new Hr(!1))})}handleBridgeEvents(){this.bridgeService.init(),this.bridgeService.onAuthByUserData$().pipe(D(this.destroy$)).subscribe(e=>this.store.dispatch(new zr(e))),this.bridgeService.onWidgetUtmChanged$().pipe(D(this.destroy$)).subscribe(({source:e})=>{this.trackingService.setUtm({source:e,medium:"",term:"",content:""})}),this.bridgeService.onWidgetSettingsInit$().pipe(D(this.destroy$)).subscribe(e=>this.store.dispatch(new $a(e))),this.actions.pipe(R(nt),D(this.destroy$)).subscribe(e=>{this.bridgeService.post(new on(sn.record_created,e.payload[0]||null))})}configureTracking(){this.store.select(g.currentCompany.getCurrentCompany).pipe($(Boolean),D(this.destroy$)).subscribe(e=>{this.trackingService.configureTracker(e.active)})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=ve({type:i,selectors:[["app-root"]],decls:13,vars:18,consts:[[1,"app-wrapper"],[3,"isLoaded","bookformLanguage","languages","selectedLanguage"],[3,"activate",4,"ngIf"],[4,"ngIf"],[3,"activate"]],template:function(t,n){if(t&1&&(J(0,"div",0)(1,"app-disabled")(2,"app-localization-host",1),Oe(3,"async"),Oe(4,"async"),Oe(5,"async"),fe("isLoaded",function(s){return n.localisationLoaded=s}),le(),Ne(6,Dh,1,0,"router-outlet",2),le(),Ne(7,Nh,1,0,"ui-kit-global-loader",3),Oe(8,"async"),Ne(9,Lh,1,0,"app-lock-landscape",3),Oe(10,"async"),le(),pe(11,"app-company-favicon")(12,"ui-kit-modal")),t&2){let o,s;Xe("app-yplaces-wrapper",n.openedViaYplaces),V(2),q("bookformLanguage",(o=Pe(3,8,n.bookform$))==null?null:o.lang)("languages",(s=Pe(4,10,n.bookform$))==null?null:s.langs)("selectedLanguage",Pe(5,12,n.selectedLanguage$)),V(4),q("ngIf",n.localisationLoaded),V(),q("ngIf",Pe(8,14,n.showGlobalLoader$)),V(2),q("ngIf",Pe(10,16,n.unlockLandscape$))}},dependencies:[Je,Wo,vp,Wa,Br,Mp,Fp,Rp,Pr],encapsulation:2,changeDetection:0})}return i})();var Dp=(()=>{class i{currentCompany;store;constructor(e,t){this.currentCompany=e,this.store=t}canActivate(e){return re(this,null,function*(){let t=jc(e);return yield this.currentCompany.loadCompany(t,!0),this.currentCompany.isCurrentCompanyLoaded()})}canActivateChild(e){return re(this,null,function*(){return yield this.canActivate(e)})}static \u0275fac=function(t){return new(t||i)(y(ni),y(j))};static \u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Np=[{path:"group/:groupId/city/all",redirectTo:"select-city"},{path:"group/:groupId/city/:cityId",redirectTo:`select-city/${Ja}`},{path:"group",redirectTo:Ht},{path:"group/:groupId",redirectTo:Ht},{path:"company/:companyId",redirectTo:`${f.company}/${f["record-type"]}`},{path:"company/:companyId/info",redirectTo:`${f.company}/about`},{path:"company/:companyId/activities",redirectTo:"company/:companyId/activity/select"},{path:"company/:companyId/activity-info/:activityId/:staffId",redirectTo:"company/:companyId/activity/info/:activityId"},{path:"company/:companyId/login",redirectTo:`${f.profile}/${f.auth}`},{path:"company/:companyId/login/code",redirectTo:`${f.profile}/${f.auth}`},{path:"company/:companyId/my-records-login",redirectTo:`${f.profile}/${f.auth}`},{path:"company/:companyId/fullscreen-menu",redirectTo:f.profile},{path:"company/:companyId/fullscreen-menu/code",redirectTo:`${f.profile}/${f.auth}`},{path:"company/:companyId/fullscreen-menu-login/code",redirectTo:`${f.profile}/${f.auth}`},{path:"company/:companyId/profile/account",redirectTo:f.profile},{path:"company/:companyId/profile/password",redirectTo:f.profile},{path:"company/:companyId/profile/loyalty-cards",redirectTo:f.profile},{path:"company/:companyId/profile/loyalty-cards/:loyaltyCardId",redirectTo:f.profile},{path:"company/:companyId/profile/loyalty-subscriptions",redirectTo:f.profile},{path:"company/:companyId/profile/loyalty-certificates",redirectTo:f.profile},{path:"company/:companyId/profile/records",redirectTo:`${f.profile}/${f.record}/${f.records}`},{path:"company/:companyId/order",redirectTo:`${f.company}/${f["create-record"]}`},{path:"company/:companyId/profile/record/master-info/:masterId",redirectTo:`${f.profile}/${f.record}/${f.records}/${f[Zr.masterInfo]}`},{path:"company/:companyId/profile/record/:recordId/date",redirectTo:`${f.profile}`},{path:"company/:companyId/profile/record/:recordId/time",redirectTo:`${f.profile}`},{path:"company/:companyId/profile/record/:recordId/:customCompanyId",redirectTo:`${f.profile}/${f.record}/${f.record}/:customCompanyId/:recordId`},{path:"profile/record/:recordId/:customCompanyId",redirectTo:`${f.profile}/${f.record}/${f.record}/:recordId/:customCompanyId`},{path:"company/:companyId/idx/:idx/date",redirectTo:`${f.company}/${f["create-record"]}`},{path:"company/:companyId/idx/:idx/time",redirectTo:`${f.company}/${f["create-record"]}`},{path:"company/:companyId/idx/:idx/service",redirectTo:`${f.company}/${f["select-services"]}`},{path:"company/:companyId/idx/:idx/master",redirectTo:`${f.company}/${f["create-record"]}`},{path:"company/:companyId/select-master",redirectTo:`${f.company}/${f.personal}/${f["select-master"]}`},{path:"company/:companyId/select-services",redirectTo:`${f.company}/${f.personal}/${f["select-services"]}`},{path:"company/:companyId/select-time",redirectTo:`${f.company}/${f.personal}/${f["select-time"]}`},{path:"company/:companyId",redirectTo:`${f.company}/${f.personal}/${f["select-services"]}`},{path:"auth/code-verification",redirectTo:`${f.profile}/${f.auth}/${f["code-verification"]}`},{path:"company/:companyId/menu",redirectTo:`${f.company}/${f.personal}/${f.menu}`},{path:"company/:companyId/create-record",redirectTo:`${f.company}/${f.personal}/${f.short}`},{path:"company/:companyId/create-record/master-info/:id/:masterId",redirectTo:`${f.company}/${f.personal}/${f.short}/${f["master-info"]}`},{path:"company/:companyId/create-record/service-info/:serviceId",redirectTo:`${f.company}/${f.personal}/${f.short}/${f["service-info"]}`},{path:"company/:companyId/create-record/select-time",redirectTo:`${f.company}/${f.personal}/${f.short}/${f["select-time"]}`},{path:"company/:companyId/create-record/select-master",redirectTo:`${f.company}/${f.personal}/${f.short}/${f["select-master"]}`}];var Lp=(()=>{class i{orderManager;constructor(e){this.orderManager=e}resolve(){this.orderManager.clearOrder()}static \u0275fac=function(t){return new(t||i)(y(Ve))};static \u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var or=(()=>{class i{orderManager;currentCompany;router;store;appNavigationService;skipInitOrder=!1;constructor(e,t,n,o,s){this.orderManager=e,this.currentCompany=t,this.router=n,this.store=o,this.appNavigationService=s}canActivate(e){return re(this,null,function*(){return yield this.currentCompany.waitForCurrentCompanyLoaded(),(!e.data?.skipOrderTypeCheck&&this.orderTypeChanged(e)||!this.shouldSkipInitOrder())&&(yield this.orderManager.initOrderFromParams(e.queryParams,this.currentCompany.getCurrentCompany())),this.skipInitOrder=!0,this.router.getCurrentNavigation()?.extras?.state?.skipInitOrder&&Ft(this.router.events.pipe($(t=>t instanceof Yt))).then(()=>{this.appNavigationService.clearHistoryParam("skipInitOrder")}),yield Ft(this.store.select(g.order.getIsOrderInitiated).pipe($(Boolean)))})}shouldSkipInitOrder(){return this.router.getCurrentNavigation()?.extras?.state?.skipInitOrder===!0||this.skipInitOrder}orderTypeChanged(e){let t=e.data?.orderType==="activity",n=this.store.selectSnapshot(g.order.isActivityOrder);return t!==n}static \u0275fac=function(t){return new(t||i)(y(Ve),y(ni),y(Q),y(ye),y(ge))};static \u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var xp=(()=>{class i{canActivate(){return Yr.isFeatureEnabled(ca.test_route)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Fi=(()=>{class i{store;constructor(e){this.store=e}canActivateChild(e){let t=e.data?.orderType==="activity";return this.store.dispatch(new Ks(t||!!Js(e.queryParams))),!0}static \u0275fac=function(t){return new(t||i)(y(j))};static \u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var $p=(()=>{class i{store;actions$;router;orderManager;destroy$=new De(1);constructor(e,t,n,o){this.store=e,this.actions$=t,this.router=n,this.orderManager=o}ngOnInit(){return re(this,null,function*(){yield Ft(this.store.select(g.widgetSettings.getWidgetSource).pipe($(c=>c==="yplaces"),D(this.destroy$)));let e=localStorage.getItem("yplaces_user_data");if(!e){this.router.navigate(["/"],{queryParamsHandling:"preserve"});return}let t=JSON.parse(e);this.store.dispatch(new zr(t));let n=localStorage.getItem("yplaces_record_data"),o=JSON.parse(n);if(o===null||!["repeat","move"].includes(o.type)){this.router.navigate(["/"],{queryParamsHandling:"preserve"});return}let s=this.store.selectSnapshot(g.widgetSettings.getWidgetApplicationVersion),a=null;if(s&&s>=118000001){let c=o.record;this.store.dispatch(new tn(c.companyId)),this.store.dispatch(new Ys(c.companyId,c.id)),a=yield Ft(he([ut(this.actions$.pipe(R($s),w(l=>l.payload)),this.actions$.pipe(R(Bs),vo(void 0))),this.store.select(g.services.getServicesDict).pipe($(l=>l.length>0))]).pipe(w(([l])=>l),D(this.destroy$)))}else{let c=o.record;a=Oa(c,this.store.selectSnapshot(g.bookform.getBookformSpecializationDisplayModeType))}if(!a){this.router.navigate(["/"],{queryParamsHandling:"preserve"});return}this.processRecordItem(a,o.type)})}processRecordItem(e,t){return re(this,null,function*(){t==="repeat"?(yield this.setCurrentCompanyByRecord(e),yield this.orderManager.repeatRecordYplaces(e)):t==="move"&&(yield this.setCurrentCompanyByRecord(e),yield this.orderManager.moveRecordYplaces(e))})}setCurrentCompanyByRecord(e){return re(this,null,function*(){yield this.store.select(g.currentCompany.getCurrentCompanyId).pipe(Ie(),k(t=>t===e.company.id?z(null):(this.store.dispatch(new tn(e?.company?.id)),this.actions$.pipe(R(ha),Ie(),D(this.destroy$)))),D(this.destroy$)).toPromise()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(t){return new(t||i)(oe(ye),oe(ee),oe(Q),oe(Ve))};static \u0275cmp=ve({type:i,selectors:[["app-yplaces-redirect-page"]],standalone:!0,features:[Or],decls:1,vars:0,template:function(t,n){t&1&&pe(0,"ui-kit-global-loader")},dependencies:[Br],encapsulation:2,changeDetection:0})}return i})();var Bp=(()=>{class i{router;constructor(e){this.router=e}canActivate(e){return this.router.navigated?!0:this.router.createUrlTree(["/"],{queryParamsHandling:"merge",queryParams:e.queryParams})}static \u0275fac=function(t){return new(t||i)(y(Q))};static \u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Bh=(i,r)=>i.params.companyId!==r.params.companyId,jp=[{path:"",pathMatch:"full",children:[],canActivate:[Pi]},...Np,{path:f.tips,loadChildren:()=>import("./tips.routes-W2ERV5DF.js").then(i=>i.routes)},{canActivate:[Dp,or],canActivateChild:[ai],runGuardsAndResolvers:Bh,path:f.company,children:[{path:f["record-type"],loadChildren:()=>import("./record-type-J2JQFELX.js").then(i=>i.RecordTypeModule)},{path:f.activity,canActivate:[or],canActivateChild:[Fi],data:{orderType:"activity"},loadChildren:()=>import("./activity-flow-ADAKVP2W.js").then(i=>i.ActivityFlowModule)},{path:f.personal,canActivate:[or],canActivateChild:[Fi],data:{orderType:"personal"},loadChildren:()=>import("./booking-flow-SB7COMSU.js").then(i=>i.BookingFlowModule)},{path:f["create-record"],canActivate:[or],canActivateChild:[Fi],data:{skipOrderTypeCheck:!0},loadChildren:()=>import("./record.route-XJ53XKFQ.js").then(i=>i.recordRoutes)},{path:f["page-not-found"],data:{[ai.IGNORE_ORDER_AVAILABILITY_ROUTE_DATA_KEY]:!0},loadChildren:()=>import("./page-not-found-PB2UZ2OB.js").then(i=>i.PageNotFoundModule)},{path:f["about-company"],data:{[ai.IGNORE_ORDER_AVAILABILITY_ROUTE_DATA_KEY]:!0},loadChildren:()=>import("./about-company.module-F6URI36G.js").then(i=>i.AboutCompanyModule)},{path:f["success-order"],resolve:[Lp],loadChildren:()=>import("./success-order.module-2UUQPMYX.js").then(i=>i.SuccessOrderModule)},{path:"move-record",children:[{path:"",data:{routeName:"company.move-record",moveRecord:!0},loadChildren:()=>import("./date-time-CMSXMONJ.js").then(i=>i.DateTimeModule)},{path:f["master-info"],loadChildren:()=>import("./master-info-M5ROWDXA.js").then(i=>i.MasterInfoModule)}]},{path:"new-move-record",children:[{path:"",data:{routeName:"company.move-record",moveRecord:!0},loadChildren:()=>import("./date-time-CMSXMONJ.js").then(i=>i.DateTimeModule)},{path:f["master-info"],loadChildren:()=>import("./master-info-M5ROWDXA.js").then(i=>i.MasterInfoModule)}]},{path:"repeat-record",data:{repeatRecord:!0},loadChildren:()=>import("./date-time-CMSXMONJ.js").then(i=>i.DateTimeModule)}]},...ma,{path:Ht,loadChildren:()=>import("./select-location.module-GS2DRSWM.js").then(i=>i.SelectLocationModule)},{path:"order-confirmation",canActivate:[Bp],resolve:{authChannel:Vc},loadChildren:()=>import("./order-confirmation.module-GZ2PF6ZP.js").then(i=>i.OrderConfirmationModule)},{path:f.auth,component:Kc},{path:f.profile,loadChildren:()=>import("./profile-ZYRD6MDB.js").then(i=>i.ProfileModule)},{path:"yplaces",component:$p},{path:f["page-not-found"],data:{[Yc.PAGE_NOT_FOUND_KEY]:!0},loadChildren:()=>import("./page-not-found-PB2UZ2OB.js").then(i=>i.PageNotFoundModule)},{path:"test",canActivate:[xp],loadChildren:()=>import("./test-component.module-NILECEXJ.js").then(i=>i.TestComponentModule)},{path:"**",redirectTo:""}];var jh=5e3,Up=(()=>{class i{store;constructor(e){this.store=e}handle(e){e?.error?.errors?.code===Xa.UNAUTHORIZED&&setTimeout(()=>this.store.dispatch(new Hr),jh)}static \u0275fac=function(t){return new(t||i)(y(j))};static \u0275prov=E({token:i,factory:i.\u0275fac})}return i})();var Yp={provide:za,useFactory:i=>{let r=i.path().split("?")?.[1],t=(!r||!r.length?null:r.split("&").find(n=>n.startsWith("sdkudid"))?.split("="))?.[1]??"";return typeof t=="string"&&t.length&&(H.tracking.rewriteSdkUdidWithValue=t),H},deps:[It]};var Kp=(()=>{class i{injector;notificationService;location;httpError;constructor(e,t,n,o){this.injector=e,this.notificationService=t,this.location=n,this.httpError=o}handle(e,t){let o=this.getIgnoreList().find(l=>typeof e.url=="string"&&l.url.exec(e.url)!==null);if(o===void 0){this.notificationService.notifyError(this.httpError.getErrorMessage(e));return}let s=o?.pagesForIgnore instanceof Array?o.pagesForIgnore.some(l=>l.exec(this.location.path())!==null):!0,a=o?.methodsForIgnore instanceof Array?o.methodsForIgnore.some(l=>l===t.method):!0;o&&s&&a||this.notificationService.notifyError(this.httpError.getErrorMessage(e))}getIgnoreList(){return Array.prototype.concat.apply([],this.injector.get(na))}static \u0275fac=function(t){return new(t||i)(y(wo),y($r),y(It),y(rt))};static \u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Vp=(()=>{class i{config;currentRouteName;storeSnapshotService;constructor(e,t,n){this.config=e,this.currentRouteName=t,this.storeSnapshotService=n}intercept(e,t){if(!e.url.match(this.config.apiUrl))return t.handle(e);let o=this.storeSnapshotService.selectSnapshot(g.widgetSettings.getWidgetParentAppName),s=o?`${this.config.name}, ${o}`:this.config.name||"",a=e.clone({setHeaders:{[`X-${H.brandDomain}-Application-Name`]:s,[`X-${H.brandDomain}-Application-Platform`]:`angular-${xo.full}`,[`X-${H.brandDomain}-Application-Version`]:this.config.version||"",[`X-${H.brandDomain}-Application-Action`]:this.currentRouteName.getCurrentRouteName()}});return t.handle(a)}static \u0275fac=function(t){return new(t||i)(y(Nr),y(Mi),y(ye))};static \u0275prov=E({token:i,factory:i.\u0275fac})}return i})();var Ri=[18,18,18],zp=[255,255,255],Hp="#060F07",Gp={hue:0,saturation:0,lightness:7.0588235294117645,alpha:1};var fd=lr(ld()),gd=lr(dd());var p={bright:"bright",light:"light",lighter:"lighter",dark:"dark",blind:"blind"};function md(i){let r=i.map(e=>(e/=255,e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)));return r[0]*.2126+r[1]*.7152+r[2]*.0722}function ud(i,r){let e=md(i),t=md(r);return(Math.max(e,t)+.05)/(Math.min(e,t)+.05)}function hd(i){let r=ud(i,zp),e=ud(i,Ri);return r<=1.4?p.lighter:r<=3?p.light:r>3&&e>=1.4?p.bright:e<1.4?p.dark:(console.log("Bad WCAG color"),"blind")}function G(i){let r=(0,fd.default)(i)||Ri,[e,t,n]=(0,gd.default)(r),o=hd(r);return{hue:e,saturation:t,lightness:n,alpha:1,type:o}}function rf(i){let{hue:r,saturation:e,lightness:t,alpha:n}=i;return`hsla(${[r,`${e}%`,`${t}%`,n].join(",")})`}function u(i,r){return rf(C(C({},i),r))}var pt=(()=>{class i{static makeLinearGradient(...e){if(e=e.filter(Boolean),e.length===1){let[n]=e;return this.makeLinearGradient(n,n)}return`linear-gradient(0deg, ${e.join(", ")})`}static mixColors(e,t,n=50){return`color-mix(in srgb, ${u(e)}, ${u(t)} ${n}%)`}getDefaultPalette(e){return this.getDarkPalette(Gp,e)}getLightPalette(e,t){let n=u(e),o=n,s=u(e,{lightness:6}),a="#808080",c="#000000",l=n,m=n,d=i.makeLinearGradient(u(e,{lightness:95,alpha:.4})),S=u(e,{lightness:95,alpha:.4});return C({primary:n,"primary-agile":o,"primary-text":s,"secondary-text":a,link:c,"background-dark":"#f0f0f0","border-active":n,"border-picture":u(e,{lightness:6,alpha:.04}),"border-grey-on-bg-grey":"#E8E8E8","icons-secondary-text":"#aaaaaa","icons-grey":"#AAAAAA","icons-grey-bg":"#F0F0F0","icons-color-agile":u(e,{lightness:30}),"icons-color-bg":u(e,{alpha:.1}),"color-agile-text":u(e,{lightness:30}),"icons-agile-bg":u(e,{alpha:.4}),"banner-accent-bg":"#FFFFFF","banner-accent-bg-image":i.makeLinearGradient(u(e,{alpha:.3})),"input-bg":"#ffffff","input-default-border":"#ececec","input-active-border":n,"btn-primary-default-bg":n,"btn-primary-text":c,"btn-primary-secondary-text":u(G("#000000"),{alpha:.6}),"btn-primary-default-border":l,"btn-label-text":c,"btn-label-bg":"#ffffff","btn-hover-press-bg":m,"btn-hover-press-bg-image":d,"btn-hover-press-border":S,"btn-secondary-default-bg":"#ffffff","btn-secondary-text":c,"btn-secondary-default-border":n,"tab-stroke-default-text":a,"tab-stroke-active-border":n,"timeslot-active-text":c,"timeslot-active-bg":n,"timeslot-active-border":n,"timeslot-default-bg":"#ffffff","timeslot-default-border":"#EDEDED","timeslot-today-bg":"#F5F5F5","timeslot-today-border":"#F5F5F5","timeslot-today-text-disabled":"#CDCECE","search-selected-text":n,"city-select-bg":"#F5F5F5","tag-bg":u(e,{lightness:92}),"tag-border":u(G("#000000"),{alpha:.02}),"loyalty-button-bg":u(e,{lightness:90}),"loyalty-button-border":u(G("#000000"),{alpha:.04}),"loyalty-card-text":u(G("#000000"),{alpha:.9}),"loyalty-card-secondary-text":u(G("#000000"),{alpha:.4}),"loyalty-card-logo-border":u(G("#000000"),{alpha:.04}),"loyalty-card-border":u(G("#000000"),{alpha:0}),"loyalty-card-bg-from":u(e,{alpha:.8}),"loyalty-card-bg-to":u(e,{alpha:1}),"loyalty-card-shadow":u(e,{alpha:.4}),"label-text":c,"label-bg":n,"label-border":n},Di(e,p.light,t))}getLighterPalette(e,t){let n=u(e),o=u(e,{lightness:6}),s="#808080",a="#000000",c=u(e,{lightness:60}),l=n,m=i.makeLinearGradient(u(e,{lightness:e.lightness-16,alpha:.8}));return C({primary:n,"primary-agile":u(e,{lightness:45}),"primary-text":o,"secondary-text":s,link:a,"background-dark":"#f0f0f0","border-active":u(e,{lightness:60}),"border-picture":u(e,{lightness:6,alpha:.04}),"border-grey-on-bg-grey":"#E8E8E8","icons-secondary-text":"#aaaaaa","icons-grey":"#AAAAAA","icons-grey-bg":"#F0F0F0","icons-color-agile":u(e,{lightness:30}),"icons-color-bg":u(e,{lightness:45,alpha:.1}),"color-agile-text":u(e,{lightness:30}),"icons-agile-bg":u(e,{alpha:.2,lightness:45}),"banner-accent-bg":u(e,{lightness:90}),"banner-accent-bg-image":u(e,{lightness:90}),"input-bg":"#ffffff","input-default-border":"#ececec","input-active-border":u(e,{lightness:60}),"btn-primary-default-bg":n,"btn-primary-text":a,"btn-primary-secondary-text":u(G("#000000"),{alpha:.6}),"btn-primary-default-border":c,"btn-label-text":"#ffffff","btn-label-bg":a,"btn-hover-press-bg":l,"btn-hover-press-bg-image":m,"btn-hover-press-border":u(e,{lightness:50}),"btn-secondary-default-bg":"#ffffff","btn-secondary-text":o,"btn-secondary-default-border":u(e,{lightness:55}),"tab-stroke-default-text":s,"tab-stroke-active-border":u(e,{lightness:60}),"timeslot-active-text":o,"timeslot-active-bg":n,"timeslot-active-border":u(e,{lightness:60}),"timeslot-default-bg":"#ffffff","timeslot-default-border":"#EDEDED","timeslot-today-bg":"#F5F5F5","timeslot-today-border":"#F5F5F5","timeslot-today-text-disabled":"#CDCECE","search-selected-text":"#f5f5f5","city-select-bg":"#F5F5F5","tag-bg":u(e,{lightness:90}),"tag-border":u(G("#000000"),{alpha:.04}),"loyalty-button-bg":u(e,{lightness:90}),"loyalty-button-border":u(G("#000000"),{alpha:.04}),"loyalty-card-text":u(G("#000000"),{alpha:.9}),"loyalty-card-secondary-text":u(G("#000000"),{alpha:.4}),"loyalty-card-logo-border":u(G("#000000"),{alpha:.04}),"loyalty-card-border":u(G("#000000"),{alpha:.04}),"loyalty-card-bg-from":u(e,{lightness:e.lightness-2}),"loyalty-card-bg-to":u(e,{lightness:e.lightness-12}),"loyalty-card-shadow":u(e,{lightness:e.lightness-12,alpha:.5}),"label-text":o,"label-bg":n,"label-border":u(e,{lightness:60})},Di(e,p.lighter,t))}getBrightPalette(e,t){let n=u(e),o=n,s=u(e,{lightness:6}),a="#808080",c=n,l=i.makeLinearGradient(u(e,{lightness:95,alpha:.2})),m=u(e,{lightness:95,alpha:.2});return C({primary:n,"primary-agile":o,"primary-text":s,"secondary-text":a,link:c,"background-dark":"#f0f0f0","border-active":n,"border-picture":u(e,{lightness:6,alpha:.04}),"border-grey-on-bg-grey":"#E8E8E8","icons-secondary-text":"#aaaaaa","icons-grey":"#AAAAAA","icons-grey-bg":"#F0F0F0","icons-color-agile":n,"icons-color-bg":u(e,{alpha:.1}),"color-agile-text":n,"icons-agile-bg":u(e,{alpha:.15}),"banner-accent-bg":"#FFFFFF","banner-accent-bg-image":i.makeLinearGradient(u(e,{alpha:.2})),"input-bg":"#ffffff","input-default-border":"#ececec","input-active-border":n,"btn-primary-default-bg":n,"btn-primary-text":"#ffffff","btn-primary-secondary-text":u(G("#FFFFFF"),{alpha:.7}),"btn-primary-default-border":n,"btn-label-text":n,"btn-label-bg":"#ffffff","btn-hover-press-bg":n,"btn-hover-press-bg-image":l,"btn-hover-press-border":m,"btn-secondary-default-bg":"#ffffff","btn-secondary-text":n,"btn-secondary-default-border":n,"tab-stroke-default-text":a,"tab-stroke-active-border":n,"timeslot-active-text":"#ffffff","timeslot-active-bg":n,"timeslot-active-border":n,"timeslot-default-bg":"#ffffff","timeslot-default-border":"#EDEDED","timeslot-today-bg":"#F5F5F5","timeslot-today-border":"#F5F5F5","timeslot-today-text-disabled":"#CDCECE","search-selected-text":u(G(a),{alpha:.5}),"city-select-bg":"#F5F5F5","tag-bg":u(e,{lightness:92}),"tag-border":u(G("#000000"),{alpha:.02}),"loyalty-button-bg":u(e,{lightness:90}),"loyalty-button-border":u(G("#000000"),{alpha:.04}),"loyalty-card-text":u(G("#FFFFFF")),"loyalty-card-secondary-text":u(G("#FFFFFF"),{alpha:.7}),"loyalty-card-logo-border":u(G("#000000"),{alpha:.04}),"loyalty-card-border":u(G("#000000"),{alpha:0}),"loyalty-card-bg-from":u(e,{alpha:.8}),"loyalty-card-bg-to":u(e,{alpha:1}),"loyalty-card-shadow":u(e,{alpha:.35}),"label-text":"#ffffff","label-bg":n,"label-border":n},Di(e,p.bright,t))}getDarkPalette(e,t){let n=u(e),o=u(e,{lightness:6}),s="#808080",a=n,c=n,l=i.makeLinearGradient(u(e,{lightness:95,alpha:.16})),m=u(e,{lightness:95,alpha:.16});return C({primary:n,"primary-agile":c,"primary-text":o,"secondary-text":s,link:a,"background-dark":"#f0f0f0","border-active":n,"border-picture":u(e,{lightness:6,alpha:.04}),"border-grey-on-bg-grey":"#E8E8E8","icons-secondary-text":"#aaaaaa","icons-grey":"#AAAAAA","icons-grey-bg":"#F0F0F0","icons-color-agile":u(e,{lightness:30}),"icons-color-bg":u(e,{alpha:.1}),"color-agile-text":u(e,{lightness:30}),"icons-agile-bg":u(e,{alpha:.2,lightness:45}),"banner-accent-bg":u(e,{lightness:90}),"banner-accent-bg-image":u(e,{lightness:90}),"input-bg":"#ffffff","input-default-border":"#ececec","input-active-border":n,"btn-primary-default-bg":n,"btn-primary-text":"#ffffff","btn-primary-secondary-text":u(G("#FFFFFF"),{alpha:.7}),"btn-primary-default-border":n,"btn-label-text":n,"btn-label-bg":"#ffffff","btn-hover-press-bg":n,"btn-hover-press-bg-image":l,"btn-hover-press-border":m,"btn-secondary-default-bg":"#ffffff","btn-secondary-text":n,"btn-secondary-default-border":n,"tab-stroke-default-text":s,"tab-stroke-active-border":n,"timeslot-active-text":"#ffffff","timeslot-active-bg":n,"timeslot-active-border":n,"timeslot-default-bg":"#ffffff","timeslot-default-border":"#EDEDED","timeslot-today-bg":"#F5F5F5","timeslot-today-border":"#F5F5F5","timeslot-today-text-disabled":"#CDCECE","search-selected-text":u(e,{alpha:.1}),"city-select-bg":"#F5F5F5","tag-bg":u(e,{lightness:92}),"tag-border":u(G("#000000"),{alpha:.02}),"loyalty-button-bg":u(e,{lightness:90}),"loyalty-button-border":u(G("#000000"),{alpha:.04}),"loyalty-card-text":u(G("#FFFFFF")),"loyalty-card-secondary-text":u(G("#FFFFFF"),{alpha:.7}),"loyalty-card-logo-border":u(G("#000000"),{alpha:.04}),"loyalty-card-border":u(G("#000000"),{alpha:0}),"loyalty-card-bg-from":u(e,{lightness:25}),"loyalty-card-bg-to":u(e,{lightness:15}),"loyalty-card-shadow":u(e,{lightness:15,alpha:.3}),"label-text":"#ffffff","label-bg":n,"label-border":n},Di(e,p.dark,t))}generatePaletteForAccent(e,t){let s=G(e),{type:n}=s,o=cr(s,["type"]);switch(n){case p.light:return this.getLightPalette(o,t);case p.lighter:return this.getLighterPalette(o,t);case p.bright:return this.getBrightPalette(o,t);case p.dark:return this.getDarkPalette(o,t);default:return console.warn(`no palette for type '${n}', using default`),this.getDefaultPalette(t)}}static \u0275fac=function(t){return new(t||i)};static \u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),nf=["color_bg","color_primary","color_stroke_primary","color_checkbox_hover_primary","color_pressed_primary","color_text_primary","color_text_primary_12","color_icon_primary","color_chip_primary","color_chip_stroke_primary","color_chip_text_primary","color_btn_shadow_primary","color_text_black","color_text_white","color_white","color_sub_white","color_btn_shadow_grey","color_grey_dark","color_grey_medium","color_grey_lines","color_grey_03","color_grey_05","color_grey_07","color_grey_09","color_grey_11","color_avatar_text","color_avatar_bg","color_green_01","color_green_05","color_green_07","color_yellow_light","color_yellow_accent","color_yellow_dark","color_red_light","color_red_accent","color_red_dark","color_blue_light","color_blue_accent","color_violet_light","color_violet_accent","color_grey_light","color_grey"];function Di(i,r,e=!1){let t={color_bg:{[p.lighter]:"#F5F5F5",[p.light]:"#F5F5F5",[p.bright]:"#F5F5F5",[p.dark]:"#F5F5F5",darkMode:"#141414"},color_primary:{[p.lighter]:u(i),[p.light]:u(i),[p.bright]:u(i),[p.dark]:u(i)},color_stroke_primary:{[p.lighter]:u(F(C({},i),{lightness:50})),[p.light]:u(i),[p.bright]:u(i),[p.dark]:u(i)},color_checkbox_hover_primary:{[p.lighter]:u(F(C({},i),{lightness:i.lightness-5})),[p.light]:pt.mixColors(i,F(C({},i),{lightness:i.lightness-16}),30),[p.bright]:pt.mixColors(i,F(C({},i),{lightness:i.lightness-16}),30),[p.dark]:pt.mixColors(i,F(C({},i),{lightness:35}),30)},color_pressed_primary:{[p.lighter]:u(F(C({},i),{lightness:i.lightness-10})),[p.light]:pt.mixColors(i,F(C({},i),{lightness:i.lightness-16}),45),[p.bright]:pt.mixColors(i,F(C({},i),{lightness:i.lightness-16}),45),[p.dark]:pt.mixColors(i,F(C({},i),{lightness:35}),50)},color_text_primary:{[p.lighter]:"#2B3134",[p.light]:"#2B3134",[p.bright]:"#ffffff",[p.dark]:"#ffffff"},color_text_primary_12:{[p.lighter]:"#2B31341f",[p.light]:"#2B31341f",[p.bright]:"#ffffff1f",[p.dark]:"#ffffff1f"},color_icon_primary:{[p.lighter]:"#2B3134",[p.light]:"#2B3134",[p.bright]:"#ffffff",[p.dark]:"#ffffff"},color_chip_primary:{[p.lighter]:u(i),[p.light]:u(i),[p.bright]:u(i),[p.dark]:u(i)},color_chip_stroke_primary:{[p.lighter]:u(F(C({},i),{lightness:50})),[p.light]:u(i),[p.bright]:u(i),[p.dark]:u(i)},color_chip_text_primary:{[p.lighter]:"#2B3134",[p.light]:"#2B3134",[p.bright]:"#ffffff",[p.dark]:"#ffffff"},color_btn_shadow_primary:{[p.lighter]:u(F(C({},i),{lightness:34,alpha:.35})),[p.light]:u(F(C({},i),{lightness:i.lightness-20,alpha:.35})),[p.bright]:u(F(C({},i),{lightness:i.lightness-16,alpha:.35})),[p.dark]:u({hue:0,saturation:0,lightness:0,alpha:.5})},color_text_black:{[p.lighter]:"#2B3134",[p.light]:"#2B3134",[p.bright]:"#2B3134",[p.dark]:"#2B3134",darkMode:"#ECEDEF"},color_text_white:{[p.lighter]:"#FFFFFF",[p.light]:"#FFFFFF",[p.bright]:"#FFFFFF",[p.dark]:"#FFFFFF",darkMode:"#2B3134"},color_white:{[p.lighter]:"#FFFFFF",[p.light]:"#FFFFFF",[p.bright]:"#FFFFFF",[p.dark]:"#FFFFFF",darkMode:"#252525"},color_sub_white:{[p.lighter]:"#FFFFFF",[p.light]:"#FFFFFF",[p.bright]:"#FFFFFF",[p.dark]:"#FFFFFF",darkMode:"#2E2E2E"},color_btn_shadow_grey:{[p.lighter]:"#212F4159",[p.light]:"#212F4159",[p.bright]:"#212F4159",[p.dark]:"#212F4159",darkMode:"#212F4159"},color_grey_dark:{[p.lighter]:"#71757F",[p.light]:"#71757F",[p.bright]:"#71757F",[p.dark]:"#71757F",darkMode:"#B2B2B2"},color_grey_medium:{[p.lighter]:"#9AA3B1",[p.light]:"#9AA3B1",[p.bright]:"#9AA3B1",[p.dark]:"#9AA3B1",darkMode:"#878787"},color_grey_lines:{[p.lighter]:"#E0E3EB",[p.light]:"#E0E3EB",[p.bright]:"#E0E3EB",[p.dark]:"#E0E3EB",darkMode:"#3D3D3D"},color_grey_03:{[p.lighter]:"#EAEEF4",[p.light]:"#EAEEF4",[p.bright]:"#EAEEF4",[p.dark]:"#EAEEF4",darkMode:"#363636"},color_grey_05:{[p.lighter]:"#D1D5DC",[p.light]:"#D1D5DC",[p.bright]:"#D1D5DC",[p.dark]:"#D1D5DC",darkMode:"#4D4D4D"},color_grey_07:{[p.lighter]:"#AEB5C1",[p.light]:"#AEB5C1",[p.bright]:"#AEB5C1",[p.dark]:"#AEB5C1",darkMode:"#7A7A7A"},color_grey_09:{[p.lighter]:"#828995",[p.light]:"#828995",[p.bright]:"#828995",[p.dark]:"#828995",darkMode:"#A3A3A3"},color_grey_11:{[p.lighter]:"#444951",[p.light]:"#444951",[p.bright]:"#444951",[p.dark]:"#444951",darkMode:"#CCCCCC"},color_avatar_text:{[p.lighter]:Li(i),[p.light]:Li(i),[p.bright]:Li(i),[p.dark]:Li(i)},color_avatar_bg:{[p.lighter]:Ni(i),[p.light]:Ni(i),[p.bright]:Ni(i),[p.dark]:Ni(i)},color_green_01:{[p.lighter]:"#E9F7E9",[p.light]:"#E9F7E9",[p.bright]:"#E9F7E9",[p.dark]:"#E9F7E9",darkMode:"#BCE7BC2E"},color_green_05:{[p.lighter]:"#52D45D",[p.light]:"#52D45D",[p.bright]:"#52D45D",[p.dark]:"#52D45D",darkMode:"#52D45D"},color_green_07:{[p.lighter]:"#219C2B",[p.light]:"#219C2B",[p.bright]:"#219C2B",[p.dark]:"#219C2B",darkMode:"#74E27D"},color_yellow_light:{[p.lighter]:"#FFF2BF",[p.light]:"#FFF2BF",[p.bright]:"#FFF2BF",[p.dark]:"#FFF2BF",darkMode:"#FFE67D2E"},color_yellow_accent:{[p.lighter]:"#FFCB00",[p.light]:"#FFCB00",[p.bright]:"#FFCB00",[p.dark]:"#FFCB00",darkMode:"#FFDB4D"},color_yellow_dark:{[p.lighter]:"#FFA800",[p.light]:"#FFA800",[p.bright]:"#FFA800",[p.dark]:"#FFA800",darkMode:"#FFE67DBD"},color_red_light:{[p.lighter]:"#FEEFEF",[p.light]:"#FEEFEF",[p.bright]:"#FEEFEF",[p.dark]:"#FEEFEF",darkMode:"#FEB4B42E"},color_red_accent:{[p.lighter]:"#F72C32",[p.light]:"#F72C32",[p.bright]:"#F72C32",[p.dark]:"#F72C32",darkMode:"#FA8488"},color_red_dark:{[p.lighter]:"#D1050B",[p.light]:"#D1050B",[p.bright]:"#D1050B",[p.dark]:"#D1050B",darkMode:"#FEB4B4BD"},color_blue_light:{[p.lighter]:"#F0F6FF",[p.light]:"#F0F6FF",[p.bright]:"#F0F6FF",[p.dark]:"#F0F6FF",darkMode:"#99C2FF2E"},color_blue_accent:{[p.lighter]:"#0041E5",[p.light]:"#0041E5",[p.bright]:"#0041E5",[p.dark]:"#0041E5",darkMode:"#80A4FF"},color_violet_light:{[p.lighter]:"#EDEDFC",[p.light]:"#EDEDFC",[p.bright]:"#EDEDFC",[p.dark]:"#EDEDFC",darkMode:"#9999FF2E"},color_violet_accent:{[p.lighter]:"#583CF1",[p.light]:"#583CF1",[p.bright]:"#583CF1",[p.dark]:"#583CF1",darkMode:"#9988F7"},color_grey_light:{[p.lighter]:"#C6CBD3",[p.light]:"#C6CBD3",[p.bright]:"#C6CBD3",[p.dark]:"#C6CBD3",darkMode:"#636363"},color_grey:{[p.lighter]:"#F7F9FC",[p.light]:"#F7F9FC",[p.bright]:"#F7F9FC",[p.dark]:"#F7F9FC",darkMode:"#2E2E2E"}};return nf.reduce((n,o)=>{let s=t[o].darkMode;return e&&s?(n[o]=s,n):(n[o]=t[o][r],n)},{})}function Ni(i){let r=F(C({},i),{saturation:i.saturation<15?0:72.73,lightness:87.06});return i.lightness<50?r=F(C({},i),{saturation:i.saturation<15?0:71.43,lightness:95.88}):i.lightness<59?r=F(C({},i),{saturation:i.saturation<15?0:70.73,lightness:91.96}):i.lightness<80&&(r=F(C({},i),{saturation:i.saturation<15?0:70.73,lightness:91.96})),u(r)}function Li(i){let r=F(C({},i),{saturation:i.saturation<15?0:73.91,lightness:45.1});return i.lightness<50?r=F(C({},i),{saturation:i.saturation<15?0:94.12,lightness:80}):i.lightness<59?r=F(C({},i),{saturation:i.saturation<15?0:93.46,lightness:70}):i.lightness<80&&(r=F(C({},i),{saturation:i.saturation<15?0:73.53,lightness:60})),u(r)}var sf="--yclients-ui-kit",yd=(()=>{class i{document;paletteGenerator;constructor(e,t){this.document=e,this.paletteGenerator=t}getRootStyle(){return this.document.documentElement.style}buildCssVar(...e){return[sf,...e].join("-")}getValue(...e){let t=this.buildCssVar(...e);return this.getRootStyle().getPropertyValue(t)||null}initPalette(e,t=!1){let n=this.paletteGenerator.generatePaletteForAccent(e||Hp,t);Object.entries(n).forEach(([o,s])=>{s&&this.setCssVarForPath(["color",o],s)})}setCssVarForPath(e,t){this.getRootStyle().setProperty(this.buildCssVar(...e),t)}static \u0275fac=function(t){return new(t||i)(y(Ze),y(pt))};static \u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var _d=(()=>{class i{orderManager;location;router;orderDefaults;appNavigationService;orderSubscription;constructor(e,t,n,o,s){this.orderManager=e,this.location=t,this.router=n,this.orderDefaults=o,this.appNavigationService=s}reflectOrderToUrl(e){let t=this.router.parseUrl(this.location.path(!0));e.toString().length>0&&this.orderDefaults.enableDefaults(),Object.assign(t.queryParams,{[Zs]:e.toString()}),this.location.replaceState(this.router.serializeUrl(t),"",this.location.getState())}reflectOrderToUrlOnDemand(){if(!this.orderSubscription){let e=this.appNavigationService.navigationEnd$.pipe(jt(this.orderManager.getOrder$()));this.orderSubscription=e.subscribe(t=>{this.reflectOrderToUrl(t)})}}ngOnDestroy(){this.orderSubscription?.unsubscribe()}static \u0275fac=function(t){return new(t||i)(y(Ve),y(It),y(Q),y(ii),y(ge))};static \u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function af(i,r,e,t,n,o,s,a,c,l,m){return function(){return re(this,null,function*(){e.resolveAndPersist(),m.readQueryData(),yield i.loadCurrentBookform(),yield i.setAbUserValue();let S=i.getCurrentBookform();n.resolveDomain(S.brand),yield c.init(),a.validateAndSetLanguage(S),Yr.init(o,s),r.reflectOrderToUrlOnDemand();let v=S.style?.main_color;t.initPalette(v,l.selectSnapshot(g.bookform.getIsDarkThemeFeatureEnabled)),window._changeColor=h=>t.initPalette(h||v,l.selectSnapshot(g.bookform.getIsDarkThemeFeatureEnabled))})}}var Sd={provide:Ut,useFactory:af,deps:[ri,_d,it,yd,Xr,vr,Q,qr,Jr,ye,al],multi:!0};var Ed=(()=>{class i{http;store;config;widgetApiHelperService;constructor(e,t,n,o){this.http=e,this.store=t,this.config=n,this.widgetApiHelperService=o}getTranslation(e){let t;e?t=!1:(e=vc,t=!0),this.store.dispatch(new fa);let n=Ga(e)||e,o=this.config.useLocalTranslates?this.config.localTranslatesPath:`${this.config.apiUrl}/i18n/${n}`,s=this.http.get(o);return _o(s).pipe(w(([a])=>(this.store.dispatch(new ga(e,t)),this.widgetApiHelperService?.customTranslates[e]!=null&&(a=Xs(a,this.widgetApiHelperService.customTranslates[e])),a)))}static \u0275fac=function(t){return new(t||i)(y(tt),y(j),y(Va),y(tc))};static \u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var vd=(()=>{class i{httpClient;storeConfig;constructor(e,t){this.httpClient=e,this.storeConfig=t}getApplications({companyId:e}){return this.httpClient.get(`${this.storeConfig.apiUrl}/booking/locations/${e}/applications/available`).pipe(w(t=>t.data.map(n=>F(C({},n.attributes),{id:n.id}))))}static \u0275fac=function(t){return new(t||i)(y(tt),y(Mt))};static \u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var bd=(()=>{class i{actions$=b(ee);store=b(j);applicationsService=b(vd);getApplicationsEffect$=U(()=>this.actions$.pipe(R(Wr),me(this.store.select(g.bookform.getBookformCompanyId)),k(([,e])=>this.applicationsService.getApplications({companyId:e})),w(e=>La({payload:e})),ne(()=>z(xa()))));static \u0275fac=function(t){return new(t||i)};static \u0275prov=E({token:i,factory:i.\u0275fac})}return i})();var Td=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=be({type:i});static \u0275inj=Ee({providers:[st,dc,mc,uc,hc]})}return i})();function Ad(i,r="SHA-256"){return re(this,null,function*(){try{let e=new TextEncoder().encode(i),t=yield crypto.subtle.digest(r,e);return Array.from(new Uint8Array(t)).map(o=>o.toString(16).padStart(2,"0")).join("")}catch(e){return console.warn(e),""}})}var xi=new ht("yclients.libs.http.recaptcha-v3-key");var Cd="app-security-level",Id=(()=>{class i{config=b(Nr);securityConfigRecaptchaV3Key$=b(xi);captchaService=b(si);bridgeService=b(st);recaptchaInitialized=!1;mustSkipRepeatRecaptchaRequest=!1;recaptchaV3Key=JSON.parse(sessionStorage.getItem(Cd)||"{}").recaptcha_v3?.key;URLS_TO_USE_CAPTCHA=[{url:`${this.config.apiUrl}/book_record/`,method:"POST"},{url:"/attendances",method:"POST"}];intercept(e,t){let n=e.url.match(this.config.apiUrl),o=this.URLS_TO_USE_CAPTCHA.some(l=>e.method===l.method&&(e.url.startsWith(l.url)||e.url.endsWith(l.url)));if(!n)return t.handle(e);let s=`${H.apiToken.replace("Bearer ","")}.${location.pathname}.${JSON.stringify(e.body)}`,a=o?this.getRecaptchaV3Key$():z(""),c=o?mr(Ad(s)):z("");return he([a,c,this.securityConfigRecaptchaV3Key$]).pipe(ne(l=>(console.warn("error",l),z(""))),ae(1),k(([l,m,d])=>{d&&(this.recaptchaV3Key=d);let S=e.clone({setHeaders:{"X-App-Validation-Token":l,"X-App-Signature":m}});return t.handle(S).pipe(k(v=>{if(!(v instanceof Bo))return z(v);let h=JSON.parse(v.headers.get("X-App-Security-Level")||"{}"),_=h?.recaptcha_v3?.key;return _&&(this.recaptchaV3Key=_),h&&!this.isEmptyObject(h)&&sessionStorage.setItem(Cd,JSON.stringify(h)),this.recaptchaV3Key&&!this.recaptchaInitialized?this.addRecaptchaScript$().then(()=>v).catch(()=>v):z(v)}),ne(v=>{if(v?.status!==412||this.mustSkipRepeatRecaptchaRequest)return this.mustSkipRepeatRecaptchaRequest=!1,ur(v);try{let h=v.error.meta.errors["X-App-Security-Level"];if(h.user_confirm)return this.captchaService.openCaptchaFrame(h.user_confirm.url),ut(this.bridgeService.onCaptchaV2Failure$(),this.bridgeService.onCaptchaV2Success$(),this.captchaService.onCaptchaPageLeft$().pipe(k(()=>ur(new Hs("Captcha is required"))))).pipe(ae(1),k(()=>t.handle(e.clone())));{let _=h.recaptcha_v3?.key;_?.length>0&&(this.recaptchaV3Key=_)}}catch(h){console.warn(h)}return mr(this.addRecaptchaScript$()).pipe(k(()=>(this.recaptchaInitialized=!0,this.getRecaptchaV3Key$().pipe(k(h=>(this.mustSkipRepeatRecaptchaRequest=!0,t.handle(e.clone({setHeaders:{"X-App-Validation-Token":h,"X-App-Signature":m}}))))))),ne(()=>ur(v)))}))}))}addRecaptchaScript$(){return new Promise((e,t)=>{if(!this.recaptchaV3Key||this.recaptchaInitialized){e();return}lc.appendScript(`https://www.google.com/recaptcha/api.js?render=${this.recaptchaV3Key}`).then(()=>{e(),this.recaptchaInitialized=!0}).catch(()=>{t(),this.recaptchaInitialized=!1}),this.recaptchaInitialized=!0})}getRecaptchaV3Key$(){return typeof window.grecaptcha?.execute=="function"?mr(window.grecaptcha.execute(this.recaptchaV3Key,{action:"booking"})).pipe(ne(e=>(console.warn("error",e),z("")))):z("")}isEmptyObject(e){return Object.keys(e).length===0&&e.constructor===Object}static \u0275fac=function(t){return new(t||i)};static \u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var wd=(()=>{class i{static forRoot(e,t,n,o){return{ngModule:i,providers:[{provide:Qc,useFactory:e},{provide:Xc,useFactory:t},{provide:Zc,useFactory:n},{provide:rl,useFactory:o}]}}static \u0275fac=function(t){return new(t||i)};static \u0275mod=be({type:i});static \u0275inj=Ee({providers:[el,sl,tl,ol,il,nl],imports:[et,oi,Dr,jr,la]})}return i})();var Od=lr(Wd());var Pd=(()=>{class i{baseApiService;apiCustomFieldsService;constructor(e){this.baseApiService=e,e.init(),this.apiCustomFieldsService=new Od.ClientCustomFieldService}getCustomFields(e){return yo(()=>this.apiCustomFieldsService.getFields(e))}static \u0275fac=function(t){return new(t||i)(y(Qa))};static \u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Md=(()=>{class i{customFieldsService=b(Pd);store=b(j);getCustomFields$=U(()=>this.store.select(g.bookform.getBookformId).pipe($(e=>!!e),k(e=>this.customFieldsService.getCustomFields(e.toString())),w(e=>new Ba(e)),ne(()=>z(new ja))));static \u0275fac=function(t){return new(t||i)};static \u0275prov=E({token:i,factory:i.\u0275fac})}return i})();var Rd=(()=>{class i extends Ke{navigationStepUrlResolver;router;store;appNavigationService;initNavigationServiceSettings;sequenceType=Ce.original;orderSteps;constructor(e,t,n,o,s){super(e,t,n,o,s),this.navigationStepUrlResolver=e,this.router=t,this.store=n,this.appNavigationService=o,this.initNavigationServiceSettings=s}buildSteps(e,t){let{preOrderSteps:n,orderSteps:o,contactStep:s}=Rt(e);this.orderSteps=o;let a=ft(n);return t&&ce(a,{step:T.recordType,hidden:!1}),ce(a,Me(o,"service")),ce(a,{step:T.order,hidden:!1}),ce(a,s),a}resolveNextStep(e,t){return t.hasDateTime()&&t.hasServices()&&t.hasStaff()?T.contact:super.resolveNextStep(e,t)}changeVisibilityByType(e,t){this.orderSteps=this.orderSteps.map(n=>n.step===e?F(C({},n),{hidden:t}):n)}isHiddenByType(e,t=!1){return!t&&super.isMasterStepAndHasParallelComplexSelected(e)?!1:!!this.orderSteps.find(n=>n.step===e)?.hidden}getHiddenMasterId(){let e=this.orderSteps.find(n=>n.step===T.master),t=e?.hidden?e?.default:null;return typeof t=="number"?t:null}static \u0275fac=function(t){return new(t||i)(y(at),y(Q),y(ye),y(ge),y("initOptions"))};static \u0275prov=E({token:i,factory:i.\u0275fac})}return i})();var kd=(()=>{class i extends Ke{navigationStepUrlResolver;router;store;appNavigationService;initNavigationServiceSettings;sequenceType=Ce.serial;constructor(e,t,n,o,s){super(e,t,n,o,s),this.navigationStepUrlResolver=e,this.router=t,this.store=n,this.appNavigationService=o,this.initNavigationServiceSettings=s}buildSteps(e,t){let{preOrderSteps:n,orderSteps:o,contactStep:s}=Rt(e),a=ft(n);return t&&ce(a,{step:T.recordType,hidden:!1}),ft(o).forEach(l=>{ce(a,l)}),ce(a,s),a}isOnOrderFirstStep(e){return this.store.selectSnapshot(g.order.getAddExtraMasterStepForComposites)&&super.resolveFirstOrderStep()===T.master?!1:super.isOnOrderFirstStep(e)}resolvePreviousStep(e){return e===T.master&&this.store.selectSnapshot(g.order.getAddExtraMasterStepForComposites)?super.at(super.findIndexByType(T.service)-1)?.step||T.service:super.resolvePreviousStep(e)}resolveNextStep(e,t){return e===T.service&&this.store.selectSnapshot(g.order.getAddExtraMasterStepForComposites)&&!t.hasStaff()?T.master:e===T.master&&this.store.selectSnapshot(g.order.getAddExtraMasterStepForComposites)&&!t.hasDateTime()?T.datetime:e===T.master&&this.store.selectSnapshot(g.order.getAddExtraMasterStepForComposites)&&t.isFull()?T.contact:super.resolveNextStep(e,t)}static \u0275fac=function(t){return new(t||i)(y(at),y(Q),y(ye),y(ge),y("initOptions"))};static \u0275prov=E({token:i,factory:i.\u0275fac})}return i})();var Dd=(()=>{class i extends Ke{navigationStepUrlResolver;router;store;appNavigationService;initNavigationServiceSettings;sequenceType=Ce.menu;isDefaultStepsOrder=!0;calculateNextStepLabelForMaster(){return this.store.selectSnapshot(g.order.getAddExtraMasterStepForComposites)?this.store.selectSnapshot(g.order.getIsSomeMasterSelected)?"steps.select_second_specialist":"steps.select_specialists":"steps.select_staff"}nextStepLabelToken$=this.nextStepType$.pipe(w(e=>{switch(e){case T.datetime:return"steps.select_date_time";case T.master:return this.calculateNextStepLabelForMaster();case T.service:return"steps.select_service";case T.contact:return"steps.contact"}return""}),_r(1));constructor(e,t,n,o,s){super(e,t,n,o,s),this.navigationStepUrlResolver=e,this.router=t,this.store=n,this.appNavigationService=o,this.initNavigationServiceSettings=s,this.currentStepType$.pipe($(a=>!!a),Ie(),me(this.initNavigationServiceSettings.isMixedRecordType$),D(this.destroy$)).subscribe(([a,c])=>{this.isDefaultStepsOrder&&[T.master,T.service,T.datetime].includes(a)&&this.reinitSteps(this.buildSteps(this.initNavigationServiceSettings.steps,c,a))})}resolveFirstOrderStep(){return T.menu}resolveNextStep(e,t){if(e===T.service&&this.store.selectSnapshot(g.order.getAddExtraMasterStepForComposites)&&!t.hasStaff())return T.master;let n=super.resolveNextStep(e,t);if(ta(n)){for(let o of this.steps$.value){if(o.step===T.datetime&&!t.hasDateTime())return T.datetime;if(o.step===T.service&&!t.hasServices())return T.service;if(o.step===T.master&&!t.hasStaff())return T.master}return T.contact}return en(n)&&(n===T.datetime&&t.hasDateTime()||n===T.service&&t.hasServices()||n===T.master&&t.hasStaff())?this.resolveNextStep(n,t):n}resolvePreviousStep(e){if(ea(e))return this.resolvePreviousStep(this.resolveFirstOrderStep());let t=this.getPreviousStep(e);if(!t||!en(t.step))return T.menu;Vs(t,"failed to resolve prev step: no step before current");let n=t.step;return ra(t)?this.resolvePreviousStep(n):n}generateNextStepLink(e,t){return re(this,null,function*(){let n=t?null:e;return this.currentStepType$.value===T.menu&&[T.master,T.service,T.datetime].includes(n)&&this.reinitSteps(this.buildSteps(this.currentSteps,!1,n)),ji(i.prototype,this,"generateNextStepLink").call(this,e,t)})}navigateToNextStep(e,t){return re(this,null,function*(){let n=t?null:e;return this.currentStepType$.value===T.menu&&[T.master,T.service,T.datetime].includes(n)&&this.reinitSteps(this.buildSteps(this.currentSteps,!1,n)),ji(i.prototype,this,"navigateToNextStep").call(this,e,t)})}buildSteps(e,t,n){let{preOrderSteps:o,orderSteps:s,contactStep:a}=Rt(e),c=ft(o);if(t&&ce(c,{step:T.recordType,hidden:!1}),n)switch(this.isDefaultStepsOrder=!1,ce(c,Me(s,n)),n){case T.datetime:ce(c,Me(s,T.service)),ce(c,Me(s,T.master));break;case T.service:ce(c,Me(s,T.master)),ce(c,Me(s,T.datetime));break;case T.master:ce(c,Me(s,T.service)),ce(c,Me(s,T.datetime));break}else ce(c,Me(s,T.service)),ce(c,Me(s,T.datetime)),ce(c,Me(s,T.master));return ce(c,a),this.steps$.value.length>0&&(c=c.map(l=>F(C({},l),{hidden:this.isHiddenByType(l.step,!0)}))),c}static \u0275fac=function(t){return new(t||i)(y(at),y(Q),y(ye),y(ge),y("initOptions"))};static \u0275prov=E({token:i,factory:i.\u0275fac})}return i})();function cf(i,r,e,t,n,o,s,a){let c=r.getCurrentBookform(),l={order$:s.getOrder$(),steps:c.steps,isMixedRecordType$:o.isMixedRecordType$};switch(lf(c,i)){case Ce.original:return new Rd(e,t,n,a,l);case Ce.menu:return new Dd(e,t,n,a,l);case Ce.serial:return new kd(e,t,n,a,l)}}function lf(i,r){let t=new URL(r.location.href).searchParams.get("seq"),n=Object.keys(Ce);if(t){if(n.includes(t))return t;console.warn("invalid ?seq. possible values:",n.join(","))}switch(i.sequence_type){case"menu":return Ce.menu;case"steps":return Ce.serial;case"order":return Ce.original;default:return Ce.menu}}var Nd={provide:Ke,useFactory:cf,deps:[Ze,ri,at,Q,ye,Uc,Ve,ge,ye]};var Ld=["onChangeRoute","onRecordSuccess","getUserData"],xd=(()=>{class i{actions$;store;appNavigationService;constructor(e,t,n){this.actions$=e,this.store=t,this.appNavigationService=n}destroy$=new De(1);version="0.0.1";ignoredMasters=[];ignoredServices=[];hideReviewStaff=[];hideReviewCompany=[];ignoredCategories=[];analytics={};customTranslates={};additionalOptions={};notWorkingDatesRanges=[];filialName="";forceShowNextMonth=!1;ignoredCustomFields=[];ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}init(){let e=Object.keys(new Gt).filter(t=>!Ld.includes(t));return window.widgetApi=new Gt,window.altegioApi=new Gt,window.yclientsApi=new Gt,Ld.forEach(t=>{Object.defineProperty(window.widgetApi,t,{value:this[t](),writable:!1,configurable:!1}),Object.defineProperty(window.altegioApi,t,{value:this[t](),writable:!1,configurable:!1}),Object.defineProperty(window.yclientsApi,t,{value:this[t](),writable:!1,configurable:!1})}),e.forEach(t=>{Object.defineProperty(window.widgetApi,t,{value:this[t],writable:typeof this[t]!=typeof Function,configurable:!1}),Object.defineProperty(window.altegioApi,t,{value:this[t],writable:typeof this[t]!=typeof Function,configurable:!1}),Object.defineProperty(window.yclientsApi,t,{value:this[t],writable:typeof this[t]!=typeof Function,configurable:!1})}),this.version="0.0.1",Promise.resolve(!0)}setIgnoreMasters(e){Array.isArray(e)&&(this.ignoredMasters=e)}setIgnoreServices(e){Array.isArray(e)&&(this.ignoredServices=e)}setIgnoreCategories(e){Array.isArray(e)&&(this.ignoredCategories=e)}setHideReviewStaff(e){Array.isArray(e)&&(this.hideReviewStaff=e)}setHideReviewCompany(e){Array.isArray(e)&&(this.hideReviewCompany=e)}setYandexAnalytic(e){this.analytics.yandex=e}setGoogleAnalytic(e){this.analytics.google=e}setFacebookAnalytic(e){this.analytics.facebook=e}onChangeRoute(){return e=>{this.appNavigationService.navigationEnd$.subscribe(t=>e(location.href,t.urlAfterRedirects))}}onRecordSuccess(){return e=>{this.actions$.pipe(R(nt),D(this.destroy$)).subscribe(t=>e([F(C({},t.record),{record_id:t?.payload[0]?.record_id,record_hash:t?.payload[0]?.record_hash})]))}}setCustomTranslates(e){this.customTranslates=e}setAdditionalOptions(e){this.additionalOptions=e}setNotWorkingDatesRanges(e){Array.isArray(e)&&(this.notWorkingDatesRanges=e)}setForceShowNextMonth(e){e&&(this.forceShowNextMonth=!0)}setFilialName(e){this.filialName=e}getUserData(){return e=>{typeof e=="function"&&this.store.select(g.user.getUser).pipe(D(this.destroy$)).subscribe(t=>e(t))}}getLastOrderInfo(){if(localStorage.getItem("client_booking:order")!==null)try{return JSON.parse(localStorage.getItem("client_booking:order")).lastRecordByIdFromApi}catch(e){console.warn(e)}}setIgnoredCustomFields(e){Array.isArray(e)&&(this.ignoredCustomFields=e)}static \u0275fac=function(t){return new(t||i)(y(ee),y(j),y(ge))};static \u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var $d=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=be({type:i});static \u0275inj=Ee({imports:[et,Fc,pa,jr]})}return i})();var Bd=(()=>{class i{actions$=b(ee);store=b(j);sentryMessage=b(qs);sendStuffCommentReport$=U(()=>{let e=this.store.select(g.user.getUser),t=this.store.select(g.currentCompany.getCurrentCompany),n=this.store.select(g.user.isLoggedIn);return this.actions$.pipe(R(an),me(e,t,n),k(([o,s,a,c])=>this.store.select(g.reviews.getMasterReviewsById({id:o.commentId})).pipe(Ie(Boolean),k(l=>this.sentryMessage.sendSentryMessage$(an.type,"info",{action:o,review:l,userName:s?.name,userId:s?.id,userPhone:s?.phone,userEmail:s?.email,companyId:a.id,companyName:a.title,isLoggedIn:c}).pipe(w(()=>Wc()))))))});sendCompanyCommentReport$=U(()=>{let e=this.store.select(g.user.getUser),t=this.store.select(g.currentCompany.getCurrentCompany),n=this.store.select(g.user.isLoggedIn);return this.actions$.pipe(R(cn),me(e,t,n),k(([o,s,a,c])=>this.store.select(g.reviews.getCompanyReviewsById({id:o.commentId})).pipe(Ie(Boolean),k(l=>this.sentryMessage.sendSentryMessage$(cn.type,"info",{action:o,review:l,userName:s.name,userId:s.id,userPhone:s.phone,userEmail:s.email,companyId:a.id,companyName:a.title,isLoggedIn:c}).pipe(w(()=>qc()))))))});static \u0275fac=function(t){return new(t||i)};static \u0275prov=E({token:i,factory:i.\u0275fac})}return i})();var jd=(()=>{class i{actions$=b(ee);store=b(j);lastOrderPostMessage$=U(()=>{let e=(t,n,o)=>{let s=a=>{let{avatar:c,avatar_big:l,id:m,name:d,prepaid:S,rating:v,show_rating:h,specialization:_,votes_count:L}=n.find(x=>x.id===a.staff_id)||{};return{avatar:c,avatar_big:l,id:m,name:d,prepaid:S,rating:v,show_rating:h,specialization:_,votes_count:L}};return o.map(a=>({services:a.services.map(c=>t.find(l=>l.id===c)||{id:null}).filter(c=>Number.isInteger(c.id)),staff:s(a),id:a.id})).filter(a=>a.services.length&&Number.isInteger(a.staff.id))};return this.actions$.pipe(R(nt),k(t=>{let n=this.store.select(g.services.getServices).pipe(ae(1)),o=this.store.select(g.masters.getMasters).pipe(ae(1)),s=this.store.select(g.currentCompany.getCurrentCompany);return he([n,o,s]).pipe(w(([a,c,l])=>{let{record:{appointments:m},payload:d}=t,{public_title:S,id:v,title:h}=l;return{appointments:e(a,c,m),payload:d,company:{public_title:S,id:v,title:h}}}))}),Se(({appointments:t,payload:n,company:o})=>{let s=t.map(({services:a,staff:c})=>F(C({services:a,staff:c},C({id:null},n[0])),{company:o})).filter(a=>Number.isInteger(a.id));Lr(s)}))},{dispatch:!1});static \u0275fac=function(t){return new(t||i)};static \u0275prov=E({token:i,factory:i.\u0275fac})}return i})();var Ud=(()=>{class i{http;storeConfig;httpContext=new $o().set(Gs,!0);constructor(e,t){this.http=e,this.storeConfig=t}getNotifications({bookformId:e,page:t=1,limit:n}){let o=new Mr({fromObject:{page:t,bookform_id:e}});return n&&o.set("limit",n),this.http.get(`${this.storeConfig.apiUrl}/client_app/notifications/?${o.toString()}`,{context:this.httpContext})}updateReadStatus(e,t){switch(t){case"erp":return this.updateReadStatusByBackendId(e);case"firebase":return this.updateReadStatusByFirebaseId(e);default:throw new Error("unsupported notification read backend type")}}updateReadStatusByBackendId(e){return this.http.put(`${this.storeConfig.apiUrl}/client_app/notifications/${e}/status`,{context:this.httpContext,status:"read"})}updateReadStatusByFirebaseId(e){return e.startsWith(":0")&&(e=e.slice(2)),this.http.put(`${this.storeConfig.apiUrl}/client_app/notifications/message_status`,{context:this.httpContext,message_id:e,channel:"push",status:"read"})}static \u0275fac=function(t){return new(t||i)(y(tt),y(Mt))};static \u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Yd=(()=>{class i{actions$=b(ee);store=b(j);notificationsService=b(Ud);httpError=b(rt);GetNotificationsAction$=U(()=>this.actions$.pipe(R(Ma),me(this.store.select(g.bookform.getBookformId)),bt(([,e])=>this.notificationsService.getNotifications({page:1,bookformId:e}).pipe(w(t=>new ka({meta:t.meta,notifications:t.data})),ne(t=>z(new Gr({message:this.httpError.getErrorMessage(t)})))))));GetNotificationsChunkAction$=U(()=>this.actions$.pipe(R(Fa),me(this.store.select(g.notifications.getMeta),this.store.select(g.bookform.getBookformId)),bt(([,e,t])=>{let n=e.pagesLoadedCount+1;return this.notificationsService.getNotifications({page:n,limit:10,bookformId:t}).pipe(w(o=>new Na(o)),ne(o=>z(new Gr({message:this.httpError.getErrorMessage(o)}))))})));NotificationReadAction$=U(()=>this.actions$.pipe(R(Ra),bt(e=>this.notificationsService.updateReadStatus(e.payload.notificationId,e.payload.backendType).pipe(w(t=>new Da({notification:t.data})),ne(t=>z(new Gr({message:this.httpError.getErrorMessage(t)})))))));static \u0275fac=function(t){return new(t||i)};static \u0275prov=E({token:i,factory:i.\u0275fac})}return i})();var Kd=20,Vd=(()=>{class i{actions$=b(ee);activitiesService=b(cc);store=b(j);httpError=b(rt);tracking=b(ot);paymentService=b(ti);mapActivities(e,t,n,o){let[s,a]=e.date.split(" "),c=Math.min(e.capacity,e.records_count);return F(C({},e),{date:Aa(s+"T"+a,t),dateOnly:s,records_count:c,available_spots_count:Math.min(e.capacity-c,o||0),staff:F(C({},e.staff),{positionOrSpecialization:Sa.mapPositionOrSpecialization([e.staff],n)[0]?.positionOrSpecialization||""}),needPay:this.paymentService.needPayActivities([e])})}getActivitiesAvailableDatesAction$=U(()=>this.actions$.pipe(R(Es),me(this.store.select(g.activities.getAllFilters),this.store.select(g.currentCompany.getCurrentCompanyId)),k(([e,t,n])=>this.activitiesService.getAvailableDates(n,e.from,e.till,t).pipe(w(o=>new Os(o.data)),ne(o=>z(new Ps(this.httpError.getErrorMessage(o))))))));loadMoreActivitiesByDate$=U(()=>this.actions$.pipe(R(vs),me(this.store.select(g.activities.getAllFilters),this.store.select(g.activities.getSelectedDate),this.store.select(g.activities.getMoreActivitiesCurrentPage),this.store.select(g.currentCompany.getCurrentCompany),this.store.select(g.bookform.getBookformSpecializationDisplayModeType)),k(([e,t,n,o,s,a])=>this.activitiesService.getActivities({companyId:s.id,count:Kd,from:zt.fromISO(n).toISODate(),till:e.tillRange==="infinity"?Ta:zt.fromISO(n).toISODate(),filters:t,page:o+1}).pipe(w(c=>new Ms(c.data.map(l=>this.mapActivities(l,s.timezone,a,s.activity_online_record_clients_count_max)),c.meta.count)))),ne(e=>z(new Fs(this.httpError.getErrorMessage(e))))));loadPreviousActivitiesByDate$=U(()=>this.actions$.pipe(R(bs),me(this.store.select(g.activities.getAllFilters),this.store.select(g.activities.getSelectedDate),this.store.select(g.activities.getPreviousActivitiesCurrentPage),this.store.select(g.currentCompany.getCurrentCompany),this.store.select(g.bookform.getBookformSpecializationDisplayModeType)),k(([e,t,n,o,s,a])=>this.activitiesService.getActivities({companyId:s.id,count:Kd,from:zt.now().toISODate(),till:zt.fromISO(n).subtractDays(1).toISODate(),filters:t,page:o+1,reverse:!0}).pipe(w(c=>new Rs(c.data.map(l=>this.mapActivities(l,s.timezone,a,s.activity_online_record_clients_count_max)),c.meta.count)))),ne(e=>z(new ks(this.httpError.getErrorMessage(e))))));getActivitiesAvailableDates$=U(()=>this.actions$.pipe(R(Ts),me(this.store.select(g.activities.getAppliedFilters),this.store.select(g.currentCompany.getCurrentCompanyId)),k(([,e,t])=>{let n=Object.keys(e).reduce((o,s)=>(o=[...o,...(e[s]||[]).map(({id:a})=>({id:a,type:s}))],o),[]);return this.activitiesService.getActivitiesDatesRange(t,n).pipe(w(o=>new Ds(o)),ne(o=>z(new Ns(this.httpError.getErrorMessage(o)))))})));activitiesRemoveAll$=U(()=>this.actions$.pipe(R(nt),w(()=>new Cs)));getActivity$=U(()=>this.actions$.pipe(R(Ss),me(this.store.select(g.currentCompany.getCurrentCompany),this.store.select(g.bookform.getBookformSpecializationDisplayModeType),this.store.select(g.order.getMultipleActivityCount)),k(([e,t,n,o])=>{let s=e.getActivitiesProps.map(a=>typeof a=="number"?{activityId:a,count:0}:a);return he(s.map(a=>this.activitiesService.getActivityById(t.id,a.activityId).pipe(w(c=>{let l=this.mapActivities(c.data,t.timezone,n,t.activity_online_record_clients_count_max);return this.store.dispatch(new ws(l)),a.count===0?null:F(C({},a),{count:Math.min(a.count,l.available_spots_count),activity:l})})))).pipe(w(a=>{let c=a.filter(Boolean);return c.length&&(c[0].activity.needPay?this.store.dispatch(new Xi(a.slice(0,1))):this.store.dispatch(new Xi(a.slice(0,o)))),new Is}))})));getActivityFilters$=U(()=>this.actions$.pipe(R(As),me(this.store.select(g.activities.getSelectedFilters)),k(([e,t])=>this.activitiesService.getActivitiesFilters(e.companyId,t).pipe(w(n=>new Ls(n,e.filtersFromQuery)),Se(()=>{let n=$e.end("booking_activity_filters_open");this.tracking.trackBenchmark(n)}),ne(n=>z(new xs(this.httpError.getErrorMessage(n))))))));static \u0275fac=function(t){return new(t||i)};static \u0275prov=E({token:i,factory:i.\u0275fac})}return i})();var zd=(()=>{class i{actions$=b(ee);notificationService=b($r);translate=b(fs);deleteRecordSuccessfullyAction$=U(()=>this.actions$.pipe(R(Vr),k(()=>(this.notificationService.notifyInfo(this.translate.instant("record.is_canceled")),dr))),{dispatch:!1});static \u0275fac=function(t){return new(t||i)};static \u0275prov=E({token:i,factory:i.\u0275fac})}return i})();$e.start("booking_start_app");function df(i){let r="cities",e="lastSelectedCityId",t="currentCompany",n="user",o=["authPhone","user","userToken","lastRecordData","authBySmsErrorMessage","authByPasswordErrorMessage"],s="smsConfirm",a="localization",c=["currentLanguage"],l=["reviews"];return ql({keys:[{[n]:o},s,{[r]:[e]},{[t]:l},{[a]:c}],rehydrate:!0,storageKeySerializer:m=>`${H.storagePrefix}:${m}`,restoreDates:!1})(i)}function mf(i){return(r,e)=>{let t=i(r,e);return Object.keys(t||{}).forEach(o=>{rn[o]&&!g[o]&&(g[o]=rn[o])}),t}}var Hd=(()=>{class i{appStore;referrerService;constructor(e,t){this.appStore=e,this.referrerService=t;let n={},o=new URLSearchParams(location.search),s=o.has("superButton"),a="yextrafield_";this.appStore.dispatch(new Pa(s)),o.forEach((c,l)=>{!l||!c||(l.startsWith(a)&&(n[l.replace(a,"")]=c),l.startsWith("gcid")&&localStorage.setItem("gcid",c.split("#")[0]),l.startsWith("ym_uid")&&localStorage.setItem("ym_uid",c))}),Object.keys(n).length!==0&&(n.referrer=this.referrerService.getCurrent()?.hostname,localStorage.setItem("yReferrer",JSON.stringify(n)))}static \u0275fac=function(t){return new(t||i)(y(j),y(it))};static \u0275mod=be({type:i,bootstrap:[kp]});static \u0275inj=Ee({providers:[Sd,Pt,wc,ll,Ac,kc,{provide:Zi,useClass:Kp,multi:!0},{provide:Zi,useClass:Up,multi:!0},{provide:Vi,useClass:Vp,multi:!0},{provide:Sr,useValue:Xo({logErrors:!0,showDialog:!1})},{provide:Hi,deps:[Q]},{provide:Ut,useFactory:()=>()=>{},deps:[Hi],multi:!0},{provide:Ut,useFactory:e=>()=>re(this,null,function*(){yield e.init()}),deps:[xd],multi:!0},pc,{provide:Hc,useClass:Gc},Nd,jo(Uo())],imports:[et,da.forRoot(()=>H),qa.forRoot(()=>H),Ha.forRoot(Yp),ms.forRoot(Ua,{metaReducers:[df,mf],runtimeChecks:{strictStateImmutability:!0,strictActionImmutability:!0,strictActionSerializability:!1}}),us.forRoot([rc,yc,_c,Za,sc,ac,gc,Sc,oc,Ec,Bd,ic,nc,zd,Cp,Ap,jd,Vd,Yd,bd,Yl,Md]),Tc,Fr,jl,Tp,Ic,qo.forRoot(jp,{paramsInheritanceStrategy:"always",enableTracing:!1,preloadingStrategy:Cc}),Qs.forRoot(()=>H.sentry),bp,_p.instrument({maxAge:25,logOnly:H.production,connectInZone:!0}),Ws.forRoot(()=>{let e=new URLSearchParams(document.location.search).get("api_key");return F(C({},H),{apiToken:e?`Bearer ${e}`:H.apiToken})},[{provide:zs,useFactory:e=>e.select(g.user.getUserToken),deps:[j]},{provide:xi,useFactory:e=>e.select(g.securityRules.getRecaptchaV3Token),deps:[j]},{provide:Vi,useClass:Id,multi:!0}]),Dr.forRoot({loader:{provide:hs,useClass:Ed}}),Qr.forRoot(()=>H),bc.forRoot(()=>({yandex:{key:H.mapsKeys.yandex},google:{key:H.mapsKeys.google},twoGis:{key:H.mapsKeys.twoGis}})),oa.forRoot(Ip),zc,Td,cl,wd.forRoot(()=>b(Ur),()=>!b(Xr).isAltegio,()=>Jc.google,()=>b(st)),$d]})}return i})();H.production&&void 0;H.debug&&pl(H);var{sentry:sr}=H;sr.enabled&&Qo({dsn:sr.dsn,integrations:[Zo(),zo()],denyUrls:[/graph\.facebook\.com/i,/connect\.facebook\.net\/en_US\/all\.js/i,/extensions\//i,/^chrome:\/\//i,/injection-listener\.js/i],release:sr.release,environment:sr.environment,tracesSampleRate:sr.tracesSampleRate,beforeSend(i){try{if(i.exception.values[0].stacktrace.frames[0].filename==="<anonymous>")return null}catch{}return i}});document?.documentElement&&wt().apple.device&&navigator.userAgent.includes("Instagram")&&document.documentElement.classList.add("position-fixed-hack");fc();$e.start("booking_cold_start");Ko().bootstrapModule(Hd).catch(i=>console.error(i));
/*! Bundled license information:

@angular/animations/fesm2022/browser.mjs:
  (**
   * @license Angular v18.2.13
   * (c) 2010-2024 Google LLC. https://angular.io/
   * License: MIT
   *)

@angular/platform-browser/fesm2022/animations.mjs:
  (**
   * @license Angular v18.2.13
   * (c) 2010-2024 Google LLC. https://angular.io/
   * License: MIT
   *)
*/
